@startuml
!theme plain

package "MeshHook System" {
    [Webhook Intake] as Webhooks
    [Workflow CRUD API] as CRUD
    [Publish Versions] as Publish
    [Run Console] as Console
    [Realtime Log Streaming] as Logs
    [Artifact Storage] as Storage
    [Cron/Timers] as Timers
}

package "Supabase" {
    [Postgres] as DB
    [Realtime] as RealtimeDB
    [Storage] as SupabaseStorage
    [Edge Functions] as Edge
}

package "Workers" {
    [Orchestrator] as Orchestrator
    [HTTP Executor] as Executor
}

database "Postgres (data + queues)" as PostgresData

[Deployment Guide] - [Analysis]
[Analysis] --> [Design]
[Design] --> [Implementation]
[Implementation] --> [Integration]
[Integration] --> [Testing]
[Testing] --> [Documentation]
[Documentation] --> [Review]
[Review] --> [Deployment Guide]

Webhooks --> DB : triggers & signature verification
CRUD --> DB : CRUD operations
Publish --> DB : version management
Console --> DB : run management
Logs --> RealtimeDB : log updates
Storage --> SupabaseStorage : artifact storage
Timers --> Edge : scheduling

Orchestrator --> PostgresData : state management & scheduling
Executor --> PostgresData : HTTP requests handling

DB -[hidden]- RealtimeDB
RealtimeDB -[hidden]- SupabaseStorage
SupabaseStorage -[hidden]- Edge
Edge -[hidden]- Orchestrator
Orchestrator -[hidden]- Executor

@enduml