@startuml
!theme plain

package "MeshHook System" {
    [Logging Interface] - [Supabase Realtime]
    [Logging Interface] --> [Project Settings]
    [Background Worker] --> [Supabase Realtime]
    [Background Worker] --> [Notification System]

    package "Log Retention Feature" {
        [Project Settings] - [Log Retention Policy Config]
        [Log Retention Policy Config] --> [Automated Log Management]
        [Automated Log Management] --> [Manual Log Management]
        [Automated Log Management] --> [User Notification]
        [Manual Log Management] --> [User Notification]

        [Log Retention Policy Config] --> [Supabase Realtime]
        [User Notification] --> [Notification System]
    }
}

[Supabase Realtime] --> [Distributed Worker System]
[Notification System] --> [User Devices]

note right of [Log Retention Policy Config]
  Update `project` table to include:
  - `log_retention_period`
  - `log_retention_last_enforced`
end note

note right of [Automated Log Management]
  Scheduled task checks and enforces
  log retention policies
end note

note right of [Manual Log Management]
  Provides UI for manual log actions
end note

note right of [User Notification]
  Notify users upon log actions
end note

note right of [Project Settings]
  Extend to include log retention settings
end note

note right of [Notification System]
  Supports email and in-app notifications
end note

@enduml