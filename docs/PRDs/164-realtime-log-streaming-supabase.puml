@startuml
!theme plain

title Realtime Log Streaming (Supabase) Architecture

package "MeshHook Engine" {
    [SvelteKit Frontend] as Frontend
    database "Supabase (Postgres)" as Supabase {
        [Log Table]
    }
    [Existing Logging System]
}

cloud {
    [Supabase Realtime] as Realtime
}

Frontend --> Realtime : Subscribes to log updates
Realtime --> Supabase : Streams updates
Supabase --> [Log Table] : Writes logs
[Existing Logging System] ..> [Log Table] : Uses for logging

note right of Realtime : Configured to publish changes\nto the log table

package "Client UI" {
    [Log Stream Display] as UI
    [Filter & Search] as Filter
    [Error Highlighting] as ErrorHL
}

Frontend --> UI : Displays real-time logs
UI --> Filter : Allows filtering and searching
UI --> ErrorHL : Highlights errors and warnings

note over Frontend, UI : SvelteKit based implementation

note over Supabase : Multi-tenant RLS security model

legend right
  -- Key --
  [ ] : Component
  --> : Data flow or subscription
  ..> : Integration or usage
endlegend

@enduml