@startuml
!theme amiga

package "MeshHook System" {
    [SvelteKit SSR/API] as SvelteKit
    database "Supabase" {
        [Postgres] as Postgres
        [Realtime] as Realtime
        [Storage] as Storage
        [Edge] as Edge
    }
    [Workers] {
        [Orchestrator] as Orchestrator
        [HTTP Executor] as HTTPExecutor
    }
}

package "Secrets Management" {
    [Project-scoped Secrets] as ProjectSecrets
}

SvelteKit --> Postgres : uses
SvelteKit --> Realtime : streams logs
SvelteKit --> ProjectSecrets : manages secrets

Postgres --> ProjectSecrets : stores secrets\nwith RLS
Realtime --> ProjectSecrets : updates in real-time

Orchestrator --> ProjectSecrets : accesses secrets\nfor workflow
HTTPExecutor --> ProjectSecrets : accesses secrets\nfor HTTP requests

note right of ProjectSecrets : No new data model\nor API endpoints required

@enduml