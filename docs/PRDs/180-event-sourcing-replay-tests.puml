@startuml
!theme plain

title Event Sourcing Replay Tests

actor Tester
database PostgresDB {
    folder "Event Sourcing Tables" as EST
}
component SupabaseRealtime
component CI_CD_Pipeline
component TestSuite {
    component "Integration Tests" as IT
    component "Failure Injection Tests" as FIT
}

Tester --> TestSuite : initiates
TestSuite --> SupabaseRealtime : observes logs
TestSuite --> PostgresDB : verifies state replay
CI_CD_Pipeline --> TestSuite : executes tests
SupabaseRealtime ..> EST : streams logs
PostgresDB ..> EST : stores events

note right of IT : Covers normal replays,\nfailures, manual interventions
note right of FIT : Simulates system failures\nto verify recovery

legend right
  -- Key Components --
  Tester : Initiates test scenarios
  TestSuite : Contains all tests for event sourcing replay
  Integration Tests : Focus on event sourcing replay capabilities
  Failure Injection Tests : Simulate system failures
  SupabaseRealtime : For live log streaming
  PostgresDB : Stores event sourcing data
  CI/CD Pipeline : Automates test execution
endlegend

@enduml