@startuml
!theme plain

package "MeshHook System" {
    [Webhook Intake] --> [Workflow CRUD]
    [Workflow CRUD] --> [Publish Versions]
    [Publish Versions] --> [Run Console]
    [Run Console] .> [Database Performance Monitoring] : triggers
    database "Supabase Postgres" {
        [Data + Queues]
        [Realtime Log Streaming]
        [Storage Artifacts]
        [Edge Cron/Timers]
    }
    [Database Performance Monitoring] ..> [Data + Queues] : monitors
    [Database Performance Monitoring] ..> [Realtime Log Streaming] : uses
}

package "External Services" {
    [Supabase] --> [Supabase Postgres] : provides
}

cloud {
    [Orchestrator Worker]
    [HTTP Executor Worker]
}

[Webhook Intake] --> [Supabase]
[Workflow CRUD] --> [Supabase]
[Run Console] --> [Supabase]
[Data + Queues] --> [Orchestrator Worker] : manages
[Realtime Log Streaming] --> [HTTP Executor Worker] : notifies

[Database Performance Monitoring] --> [Orchestrator Worker] : configures
[Database Performance Monitoring] --> [HTTP Executor Worker] : configures

note right of [Database Performance Monitoring]
  Key Activities:
  - Analyze query performance
  - Implement RLS policies
  - Create indexes
  - Monitor live logs
  - Ensure multi-tenant security
end note

@enduml