@startuml
!theme plain

package "MeshHook System" {
    [Workers] - [Orchestrator]
    [Orchestrator] - [Supabase DB]
    [Supabase DB] - [API Server]
    [API Server] - [SvelteKit UI]
    database "Supabase DB" {
        [execution_time_statistics]
    }
    node "API Server" {
        [GET /api/v1/statistics/execution-times]
    }
    node "SvelteKit UI" {
        [Execution Time Display]
    }
}

[Orchestrator] --> [execution_time_statistics] : records execution times
[execution_time_statistics] --> [GET /api/v1/statistics/execution-times] : aggregates and filters data
[GET /api/v1/statistics/execution-times] --> [Execution Time Display] : provides data for UI

note right of [execution_time_statistics]
  Data Model:
  - id (PK)
  - workflow_id (FK)
  - run_id (FK)
  - execution_time_ms (INTEGER)
  - created_at (TIMESTAMP)
end note

note right of [GET /api/v1/statistics/execution-times]
  Supports query parameters:
  - workflow_id
  - start_date
  - end_date
end note

note right of [Execution Time Display]
  Displays:
  - Average
  - Median
  - Min/Max
  - Percentiles (95th, 99th)
end note

note "Integration Points" as N1
  - Capture and record execution time in Workers
  - Update database schema for execution time statistics
  - Enhance UI to display statistics
end note

[Workers] .. N1
[Supabase DB] .. N1
[SvelteKit UI] .. N1

@enduml