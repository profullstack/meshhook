@startuml
!theme plain

package "MeshHook Webhook System" {
    [Webhook Intake] as WI
    [Rate Limiter] as RL
    database "Postgres\n(tenant_settings)" as DB
    [API Endpoint\n(/api/v1/tenants/{tenantId}/rate_limit)] as API
}

WI --> RL : checks rate limit
RL --> DB : fetches tenant rate limit settings
RL --> RL : applies token bucket algorithm
RL -[#red]-> WI : returns 429 Too Many Requests\nif limit is exceeded
RL --> WI : proceeds if within limit
DB <-- API : updates rate limit settings

note right of RL : Token Bucket Algorithm\nfor rate limiting
note right of DB : rate_limit_rps INTEGER

@enduml