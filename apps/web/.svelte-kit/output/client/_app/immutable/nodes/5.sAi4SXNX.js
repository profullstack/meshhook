import"../chunks/CWj6FrbW.js";import{ab as da,ak as T,ac as g,ag as s,aj as n,aa as h,ad as va,ae as la,af as d,ah as t,J as oa,al as na}from"../chunks/DLTaHJlt.js";import{d as ra,a as fa,s as o}from"../chunks/BZOnZgKm.js";import{i as U}from"../chunks/D6SFIRjf.js";import{s as ca}from"../chunks/Ihp2QH7c.js";import{W as pa}from"../chunks/BBCkNNU0.js";import{g as _a}from"../chunks/jEEpMCDI.js";var ma=()=>_a("/runs"),ja=g('<div class="info-item svelte-1eidjaf"><span class="info-label svelte-1eidjaf">Completed:</span> <span class="info-value svelte-1eidjaf"> </span></div>'),ua=g('<div class="info-item error svelte-1eidjaf"><span class="info-label svelte-1eidjaf">Error:</span> <span class="info-value svelte-1eidjaf"> </span></div>'),ba=g('<div class="run-detail-page svelte-1eidjaf"><header class="page-header svelte-1eidjaf"><div class="header-content svelte-1eidjaf"><button class="btn-back svelte-1eidjaf">‚Üê Back to Runs</button> <div class="run-info svelte-1eidjaf"><h1 class="svelte-1eidjaf"> </h1> <span class="status-badge svelte-1eidjaf"> </span></div></div></header> <div class="run-content svelte-1eidjaf"><div class="run-sidebar svelte-1eidjaf"><div class="info-panel svelte-1eidjaf"><h3 class="svelte-1eidjaf">Run Information</h3> <div class="info-item svelte-1eidjaf"><span class="info-label svelte-1eidjaf">Workflow:</span> <span class="info-value svelte-1eidjaf"> </span></div> <div class="info-item svelte-1eidjaf"><span class="info-label svelte-1eidjaf">Status:</span> <span class="info-value svelte-1eidjaf"> </span></div> <div class="info-item svelte-1eidjaf"><span class="info-label svelte-1eidjaf">Started:</span> <span class="info-value svelte-1eidjaf"> </span></div> <!> <div class="info-item svelte-1eidjaf"><span class="info-label svelte-1eidjaf">Duration:</span> <span class="info-value svelte-1eidjaf"> </span></div> <!></div></div> <div class="run-main svelte-1eidjaf"><div class="dag-container svelte-1eidjaf"><h3 class="svelte-1eidjaf">Execution Flow</h3> <div class="dag-viewer svelte-1eidjaf"><!></div></div></div></div></div>');function Ra(q,w){var H,I,J,L;da(w,!0);const a=w.data.run,z=T(((I=(H=a==null?void 0:a.workflow)==null?void 0:H.definition)==null?void 0:I.nodes)||[]),E=T(((L=(J=a==null?void 0:a.workflow)==null?void 0:J.definition)==null?void 0:L.edges)||[]),G=na(()=>z.map(i=>{var v;const e=(v=a==null?void 0:a.events)==null?void 0:v.find(l=>l.node_id===i.id);return{...i,data:{...i.data,status:(e==null?void 0:e.status)||"pending",executionTime:e==null?void 0:e.execution_time}}})),K={pending:"#fbbf24",running:"#3b82f6",completed:"#10b981",failed:"#ef4444",cancelled:"#6b7280"};function k(i){return i?new Date(i).toLocaleString():"N/A"}function O(i){if(!i)return"N/A";const e=Math.floor(i/1e3);return e<60?`${e}s`:`${Math.floor(e/60)}m ${e%60}s`}var r=ba();fa(i=>{n(e=>la.title=`Run ${e??""} - MeshHook`,[()=>{var e;return(e=a==null?void 0:a.id)==null?void 0:e.slice(0,8)}])});var f=s(r),x=s(f),D=s(x);D.__click=[ma];var $=d(D,2),c=s($),P=s(c);t(c);var p=d(c,2),Q=s(p,!0);t(p),t($),t(x),t(f);var R=d(f,2),_=s(R),M=s(_),m=d(s(M),2),N=d(s(m),2),V=s(N,!0);t(N),t(m);var j=d(m,2),W=d(s(j),2),X=s(W,!0);t(W),t(j);var u=d(j,2),y=d(s(u),2),Y=s(y,!0);t(y),t(u);var A=d(u,2);{var Z=i=>{var e=ja(),v=d(s(e),2),l=s(v,!0);t(v),t(e),n(ia=>o(l,ia),[()=>k(a==null?void 0:a.completed_at)]),h(i,e)};U(A,i=>{a!=null&&a.completed_at&&i(Z)})}var b=d(A,2),C=d(s(b),2),aa=s(C,!0);t(C),t(b);var ea=d(b,2);{var sa=i=>{var e=ua(),v=d(s(e),2),l=s(v,!0);t(v),t(e),n(()=>o(l,a.error)),h(i,e)};U(ea,i=>{a!=null&&a.error&&i(sa)})}t(M),t(_);var S=d(_,2),B=s(S),F=d(s(B),2),ta=s(F);pa(ta,{get nodes(){return oa(G)},get edges(){return E}}),t(F),t(B),t(S),t(R),t(r),n((i,e,v)=>{var l;o(P,`Run #${i??""}`),ca(p,`background-color: ${(K[a==null?void 0:a.status]||"#6b7280")??""}`),o(Q,a==null?void 0:a.status),o(V,((l=a==null?void 0:a.workflow)==null?void 0:l.name)||"Unknown"),o(X,a==null?void 0:a.status),o(Y,e),o(aa,v)},[()=>{var i;return(i=a==null?void 0:a.id)==null?void 0:i.slice(0,8)},()=>k(a==null?void 0:a.started_at),()=>O(a!=null&&a.completed_at?new Date(a.completed_at)-new Date(a.started_at):Date.now()-new Date((a==null?void 0:a.started_at)||Date.now()))]),h(q,r),va()}ra(["click"]);export{Ra as component};
