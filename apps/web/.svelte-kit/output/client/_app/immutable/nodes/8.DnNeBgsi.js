import"../chunks/CWj6FrbW.js";import{ab as H,ac as D,ag as r,ah as l,af as o,aj as R,J as n,al as V,aa as y,ad as M,an as f,am as L,ak as I,ae as K}from"../chunks/DLTaHJlt.js";import{d as X,s as p,a as $}from"../chunks/BZOnZgKm.js";import{i as B}from"../chunks/D6SFIRjf.js";import{e as ee}from"../chunks/B9wM4kaC.js";import{r as te}from"../chunks/C21iDxsO.js";import{b as ae}from"../chunks/au-VDWBU.js";import{s as le,b as Q}from"../chunks/Ihp2QH7c.js";import{p as re}from"../chunks/B90PUMjC.js";import{g as oe}from"../chunks/jEEpMCDI.js";function se(b,e){var i;(i=e.onEdit)==null||i.call(e,e.workflow)}function ne(b,e){var i;confirm(`Delete workflow "${e.workflow.name}"?`)&&((i=e.onDelete)==null||i.call(e,e.workflow))}function ie(b,e){var i;(i=e.onDuplicate)==null||i.call(e,e.workflow)}var de=D('<p class="workflow-description svelte-zdbdul"> </p>'),ve=D('<div class="workflow-card svelte-zdbdul"><div class="card-header svelte-zdbdul"><h3 class="workflow-name svelte-zdbdul"> </h3> <span class="status-badge svelte-zdbdul"> </span></div> <!> <div class="card-meta svelte-zdbdul"><div class="meta-item svelte-zdbdul"><span class="meta-label svelte-zdbdul">Nodes:</span> <span class="meta-value svelte-zdbdul"> </span></div> <div class="meta-item svelte-zdbdul"><span class="meta-label svelte-zdbdul">Version:</span> <span class="meta-value svelte-zdbdul"> </span></div> <div class="meta-item svelte-zdbdul"><span class="meta-label svelte-zdbdul">Updated:</span> <span class="meta-value svelte-zdbdul"> </span></div></div> <div class="card-actions svelte-zdbdul"><button class="btn-action svelte-zdbdul">Edit</button> <button class="btn-action svelte-zdbdul">Duplicate</button> <button class="btn-action btn-danger svelte-zdbdul">Delete</button></div></div>');function ce(b,e){H(e,!0);const i={draft:"#fbbf24",published:"#10b981"},v=V(()=>i[e.workflow.status]||"#6b7280");function m(t){return new Date(t).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}var u=ve(),k=r(u),w=r(k),q=r(w,!0);l(w);var d=o(w,2),c=r(d,!0);l(d),l(k);var _=o(k,2);{var N=t=>{var a=de(),s=r(a,!0);l(a),R(()=>p(s,e.workflow.description)),y(t,a)};B(_,t=>{e.workflow.description&&t(N)})}var h=o(_,2),x=r(h),j=o(r(x),2),z=r(j,!0);l(j),l(x);var g=o(x,2),C=o(r(g),2),U=r(C,!0);l(C),l(g);var E=o(g,2),S=o(r(E),2),F=r(S,!0);l(S),l(E),l(h);var T=o(h,2),A=r(T);A.__click=[se,e];var J=o(A,2);J.__click=[ie,e];var O=o(J,2);O.__click=[ne,e],l(T),l(u),R(t=>{var a,s;p(q,e.workflow.name),le(d,`background-color: ${n(v)??""}`),p(c,e.workflow.status),p(z,((s=(a=e.workflow.definition)==null?void 0:a.nodes)==null?void 0:s.length)||0),p(U,e.workflow.version),p(F,t)},[()=>m(e.workflow.updated_at)]),y(b,u),M()}X(["click"]);var ue=D('<a href="/workflows/new" class="btn-primary svelte-11grnxr">Create Your First Workflow</a>'),fe=D('<div class="empty-state svelte-11grnxr"><p class="empty-icon svelte-11grnxr">ðŸ“‹</p> <p class="empty-text svelte-11grnxr"> </p> <!></div>'),we=D('<div class="workflows-grid svelte-11grnxr"></div>'),_e=D('<div class="workflow-list svelte-11grnxr"><div class="list-controls svelte-11grnxr"><div class="search-box svelte-11grnxr"><input type="search" placeholder="Search workflows..." class="search-input svelte-11grnxr"/></div> <div class="filters svelte-11grnxr"><select class="filter-select svelte-11grnxr"><option>All Status</option><option>Draft</option><option>Published</option></select> <select class="filter-select svelte-11grnxr"><option>Recently Updated</option><option>Recently Created</option><option>Name (A-Z)</option></select></div></div> <!></div>');function me(b,e){H(e,!0);let i=re(e,"workflows",19,()=>[]),v=L(""),m=L("updated_at"),u=L("all");const k=V(()=>()=>{let t=i();if(n(v)){const a=n(v).toLowerCase();t=t.filter(s=>{var W;return s.name.toLowerCase().includes(a)||((W=s.description)==null?void 0:W.toLowerCase().includes(a))})}return n(u)!=="all"&&(t=t.filter(a=>a.status===n(u))),t=[...t].sort((a,s)=>n(m)==="name"?a.name.localeCompare(s.name):n(m)==="created_at"?new Date(s.created_at)-new Date(a.created_at):new Date(s.updated_at)-new Date(a.updated_at)),t}),w=n(k)();function q(t){oe(`/workflows/${t.id}/edit`)}function d(t){var a;(a=e.onDelete)==null||a.call(e,t)}function c(t){var a;(a=e.onDuplicate)==null||a.call(e,t)}var _=_e(),N=r(_),h=r(N),x=r(h);te(x),l(h);var j=o(h,2),z=r(j),g=r(z);g.value=g.__value="all";var C=o(g);C.value=C.__value="draft";var U=o(C);U.value=U.__value="published",l(z);var E=o(z,2),S=r(E);S.value=S.__value="updated_at";var F=o(S);F.value=F.__value="created_at";var T=o(F);T.value=T.__value="name",l(E),l(j),l(N);var A=o(N,2);{var J=t=>{var a=fe(),s=o(r(a),2),W=r(s,!0);l(s);var Y=o(s,2);{var Z=P=>{var G=ue();y(P,G)};B(Y,P=>{!n(v)&&n(u)==="all"&&P(Z)})}l(a),R(()=>p(W,n(v)||n(u)!=="all"?"No workflows match your filters":"No workflows yet")),y(t,a)},O=t=>{var a=we();ee(a,21,()=>w,s=>s.id,(s,W)=>{ce(s,{get workflow(){return n(W)},onEdit:q,onDelete:d,onDuplicate:c})}),l(a),y(t,a)};B(A,t=>{w.length===0?t(J):t(O,!1)})}l(_),ae(x,()=>n(v),t=>f(v,t)),Q(z,()=>n(u),t=>f(u,t)),Q(E,()=>n(m),t=>f(m,t)),y(b,_),M()}var be=D('<div class="workflows-page svelte-1ucrgqm"><header class="page-header svelte-1ucrgqm"><h1 class="svelte-1ucrgqm">Workflows</h1> <a href="/workflows/new" class="btn-primary svelte-1ucrgqm">Create Workflow</a></header> <!></div>');function Se(b,e){H(e,!0);let i=L(I(e.data.workflows||[])),v=L(!1),m=L("");async function u(d){try{if(f(v,!0),!(await fetch(`/api/workflows/${d.id}`,{method:"DELETE"})).ok)throw new Error("Failed to delete workflow");f(i,n(i).filter(_=>_.id!==d.id),!0)}catch(c){f(m,c.message,!0),alert(`Error deleting workflow: ${c.message}`)}finally{f(v,!1)}}async function k(d){try{f(v,!0);const c=await fetch("/api/workflows",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:`${d.name} (Copy)`,description:d.description,nodes:d.definition.nodes,edges:d.definition.edges,status:"draft"})});if(!c.ok)throw new Error("Failed to duplicate workflow");const _=await c.json();f(i,[_.workflow,...n(i)],!0)}catch(c){f(m,c.message,!0),alert(`Error duplicating workflow: ${c.message}`)}finally{f(v,!1)}}var w=be();$(d=>{K.title="Workflows - MeshHook"});var q=o(r(w),2);me(q,{get workflows(){return n(i)},onDelete:u,onDuplicate:k}),l(w),y(b,w),M()}export{Se as component};
