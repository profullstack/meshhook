var Ss=Object.defineProperty;var wo=e=>{throw TypeError(e)};var Cs=(e,t,n)=>t in e?Ss(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var xo=(e,t,n)=>Cs(e,typeof t!="symbol"?t+"":t,n),gi=(e,t,n)=>t.has(e)||wo("Cannot "+n);var pt=(e,t,n)=>(gi(e,t,"read from private field"),n?n.call(e):t.get(e)),nn=(e,t,n)=>t.has(e)?wo("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n),mi=(e,t,n,i)=>(gi(e,t,"write to private field"),i?i.call(e,n):t.set(e,n),n),po=(e,t,n)=>(gi(e,t,"access private method"),n);import"./CWj6FrbW.js";import{h as Ms,w as zs,ao as yt,u as T,r as Ps,at as C,aK as Ns,i as Ts,ab as ce,n as Vn,bf as U,J as l,V as F,bg as Je,ac as Te,ag as _e,ah as we,aj as Ne,aa as $,ad as ue,an as X,a9 as Ve,K as ne,af as me,ai as Zi,bh as We,aV as zi,bi as Nt,s as Xn,al as bo,a8 as ct,bj as at,o as As,ak as _o,am as ko}from"./DLTaHJlt.js";import{e as De,s as Tt}from"./BZOnZgKm.js";import{i as Re}from"./D6SFIRjf.js";import{p as h,s as B,a as Ue,l as Xe,b as Yn,c as Yt,d as Hs}from"./B90PUMjC.js";import{i as he}from"./Cv3ukLNJ.js";import{o as ti,c as ni,a as lr}from"./Cb6g15UT.js";import{a as ee,s as wt,c as Gi,S as cr}from"./C21iDxsO.js";import{b as Ui,c as ur}from"./Ck7ZZh2V.js";import{g as q,w as j,r as dt,d as Wt}from"./D5cQzGxD.js";import{c as Mt,s as rt}from"./Ihp2QH7c.js";import{e as ii}from"./B9wM4kaC.js";function it(e,t,n,i,o){var s;Ms&&zs();var a=(s=t.$$slots)==null?void 0:s[n],r=!1;a===!0&&(a=t[n==="default"?"children":n],r=!0),a===void 0||a(e,r?()=>i:i)}function Ds(e){const t={};e.children&&(t.default=!0);for(const n in e.$$slots)t[n]=!0;return t}function tt(e,t,n){yt(()=>{var i=T(()=>t(e,n==null?void 0:n())||{});if(n&&(i!=null&&i.update)){var o=!1,a={};Ps(()=>{var r=n();C(r),o&&Ns(a,r)&&(a=r,i.update(r))}),o=!0}if(i!=null&&i.destroy)return()=>i.destroy()})}var Pt,Ut,mn,jn,dr;const ei=class ei{constructor(t){nn(this,jn);nn(this,Pt,new WeakMap);nn(this,Ut);nn(this,mn);mi(this,mn,t)}observe(t,n){var i=pt(this,Pt).get(t)||new Set;return i.add(n),pt(this,Pt).set(t,i),po(this,jn,dr).call(this).observe(t,pt(this,mn)),()=>{var o=pt(this,Pt).get(t);o.delete(n),o.size===0&&(pt(this,Pt).delete(t),pt(this,Ut).unobserve(t))}}};Pt=new WeakMap,Ut=new WeakMap,mn=new WeakMap,jn=new WeakSet,dr=function(){return pt(this,Ut)??mi(this,Ut,new ResizeObserver(t=>{for(var n of t){ei.entries.set(n.target,n);for(var i of pt(this,Pt).get(n.target)||[])i(n)}}))},xo(ei,"entries",new WeakMap);let Pi=ei;var Is=new Pi({box:"border-box"});function Eo(e,t,n){var i=Is.observe(e,()=>n(e[t]));yt(()=>(T(()=>n(e[t])),i))}function ge(e,t){var a;var n=(a=e.$$events)==null?void 0:a[t.type],i=Ts(n)?n.slice():n==null?[]:[n];for(var o of i)o.call(this,t)}function ze(e){if(typeof e=="string"||typeof e=="number")return""+e;let t="";if(Array.isArray(e))for(let n=0,i;n<e.length;n++)(i=ze(e[n]))!==""&&(t+=(t&&" ")+i);else for(let n in e)e[n]&&(t+=(t&&" ")+n);return t}var Os={value:()=>{}};function oi(){for(var e=0,t=arguments.length,n={},i;e<t;++e){if(!(i=arguments[e]+"")||i in n||/[\s.]/.test(i))throw new Error("illegal type: "+i);n[i]=[]}return new Dn(n)}function Dn(e){this._=e}function Rs(e,t){return e.trim().split(/^|\s+/).map(function(n){var i="",o=n.indexOf(".");if(o>=0&&(i=n.slice(o+1),n=n.slice(0,o)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:i}})}Dn.prototype=oi.prototype={constructor:Dn,on:function(e,t){var n=this._,i=Rs(e+"",n),o,a=-1,r=i.length;if(arguments.length<2){for(;++a<r;)if((o=(e=i[a]).type)&&(o=Vs(n[o],e.name)))return o;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++a<r;)if(o=(e=i[a]).type)n[o]=So(n[o],e.name,t);else if(t==null)for(o in n)n[o]=So(n[o],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new Dn(e)},call:function(e,t){if((o=arguments.length-2)>0)for(var n=new Array(o),i=0,o,a;i<o;++i)n[i]=arguments[i+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(a=this._[e],i=0,o=a.length;i<o;++i)a[i].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var i=this._[e],o=0,a=i.length;o<a;++o)i[o].value.apply(t,n)}};function Vs(e,t){for(var n=0,i=e.length,o;n<i;++n)if((o=e[n]).name===t)return o.value}function So(e,t,n){for(var i=0,o=e.length;i<o;++i)if(e[i].name===t){e[i]=Os,e=e.slice(0,i).concat(e.slice(i+1));break}return n!=null&&e.push({name:t,value:n}),e}var Ni="http://www.w3.org/1999/xhtml";const Co={svg:"http://www.w3.org/2000/svg",xhtml:Ni,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function ri(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),Co.hasOwnProperty(t)?{space:Co[t],local:e}:e}function Xs(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===Ni&&t.documentElement.namespaceURI===Ni?t.createElement(e):t.createElementNS(n,e)}}function Ys(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function fr(e){var t=ri(e);return(t.local?Ys:Xs)(t)}function Ls(){}function $i(e){return e==null?Ls:function(){return this.querySelector(e)}}function Bs(e){typeof e!="function"&&(e=$i(e));for(var t=this._groups,n=t.length,i=new Array(n),o=0;o<n;++o)for(var a=t[o],r=a.length,s=i[o]=new Array(r),c,d,u=0;u<r;++u)(c=a[u])&&(d=e.call(c,c.__data__,u,a))&&("__data__"in c&&(d.__data__=c.__data__),s[u]=d);return new st(i,this._parents)}function Ws(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function Ks(){return[]}function hr(e){return e==null?Ks:function(){return this.querySelectorAll(e)}}function Fs(e){return function(){return Ws(e.apply(this,arguments))}}function qs(e){typeof e=="function"?e=Fs(e):e=hr(e);for(var t=this._groups,n=t.length,i=[],o=[],a=0;a<n;++a)for(var r=t[a],s=r.length,c,d=0;d<s;++d)(c=r[d])&&(i.push(e.call(c,c.__data__,d,r)),o.push(c));return new st(i,o)}function gr(e){return function(){return this.matches(e)}}function mr(e){return function(t){return t.matches(e)}}var Zs=Array.prototype.find;function Gs(e){return function(){return Zs.call(this.children,e)}}function Us(){return this.firstElementChild}function $s(e){return this.select(e==null?Us:Gs(typeof e=="function"?e:mr(e)))}var Js=Array.prototype.filter;function Qs(){return Array.from(this.children)}function js(e){return function(){return Js.call(this.children,e)}}function ea(e){return this.selectAll(e==null?Qs:js(typeof e=="function"?e:mr(e)))}function ta(e){typeof e!="function"&&(e=gr(e));for(var t=this._groups,n=t.length,i=new Array(n),o=0;o<n;++o)for(var a=t[o],r=a.length,s=i[o]=[],c,d=0;d<r;++d)(c=a[d])&&e.call(c,c.__data__,d,a)&&s.push(c);return new st(i,this._parents)}function yr(e){return new Array(e.length)}function na(){return new st(this._enter||this._groups.map(yr),this._parents)}function Ln(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}Ln.prototype={constructor:Ln,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function ia(e){return function(){return e}}function oa(e,t,n,i,o,a){for(var r=0,s,c=t.length,d=a.length;r<d;++r)(s=t[r])?(s.__data__=a[r],i[r]=s):n[r]=new Ln(e,a[r]);for(;r<c;++r)(s=t[r])&&(o[r]=s)}function ra(e,t,n,i,o,a,r){var s,c,d=new Map,u=t.length,m=a.length,f=new Array(u),g;for(s=0;s<u;++s)(c=t[s])&&(f[s]=g=r.call(c,c.__data__,s,t)+"",d.has(g)?o[s]=c:d.set(g,c));for(s=0;s<m;++s)g=r.call(e,a[s],s,a)+"",(c=d.get(g))?(i[s]=c,c.__data__=a[s],d.delete(g)):n[s]=new Ln(e,a[s]);for(s=0;s<u;++s)(c=t[s])&&d.get(f[s])===c&&(o[s]=c)}function sa(e){return e.__data__}function aa(e,t){if(!arguments.length)return Array.from(this,sa);var n=t?ra:oa,i=this._parents,o=this._groups;typeof e!="function"&&(e=ia(e));for(var a=o.length,r=new Array(a),s=new Array(a),c=new Array(a),d=0;d<a;++d){var u=i[d],m=o[d],f=m.length,g=la(e.call(u,u&&u.__data__,d,i)),k=g.length,S=s[d]=new Array(k),E=r[d]=new Array(k),_=c[d]=new Array(f);n(u,m,S,E,_,g,t);for(var w=0,y=0,x,P;w<k;++w)if(x=S[w]){for(w>=y&&(y=w+1);!(P=E[y])&&++y<k;);x._next=P||null}}return r=new st(r,i),r._enter=s,r._exit=c,r}function la(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function ca(){return new st(this._exit||this._groups.map(yr),this._parents)}function ua(e,t,n){var i=this.enter(),o=this,a=this.exit();return typeof e=="function"?(i=e(i),i&&(i=i.selection())):i=i.append(e+""),t!=null&&(o=t(o),o&&(o=o.selection())),n==null?a.remove():n(a),i&&o?i.merge(o).order():o}function da(e){for(var t=e.selection?e.selection():e,n=this._groups,i=t._groups,o=n.length,a=i.length,r=Math.min(o,a),s=new Array(o),c=0;c<r;++c)for(var d=n[c],u=i[c],m=d.length,f=s[c]=new Array(m),g,k=0;k<m;++k)(g=d[k]||u[k])&&(f[k]=g);for(;c<o;++c)s[c]=n[c];return new st(s,this._parents)}function fa(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var i=e[t],o=i.length-1,a=i[o],r;--o>=0;)(r=i[o])&&(a&&r.compareDocumentPosition(a)^4&&a.parentNode.insertBefore(r,a),a=r);return this}function ha(e){e||(e=ga);function t(m,f){return m&&f?e(m.__data__,f.__data__):!m-!f}for(var n=this._groups,i=n.length,o=new Array(i),a=0;a<i;++a){for(var r=n[a],s=r.length,c=o[a]=new Array(s),d,u=0;u<s;++u)(d=r[u])&&(c[u]=d);c.sort(t)}return new st(o,this._parents).order()}function ga(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function ma(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function ya(){return Array.from(this)}function va(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var i=e[t],o=0,a=i.length;o<a;++o){var r=i[o];if(r)return r}return null}function wa(){let e=0;for(const t of this)++e;return e}function xa(){return!this.node()}function pa(e){for(var t=this._groups,n=0,i=t.length;n<i;++n)for(var o=t[n],a=0,r=o.length,s;a<r;++a)(s=o[a])&&e.call(s,s.__data__,a,o);return this}function ba(e){return function(){this.removeAttribute(e)}}function _a(e){return function(){this.removeAttributeNS(e.space,e.local)}}function ka(e,t){return function(){this.setAttribute(e,t)}}function Ea(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function Sa(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function Ca(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function Ma(e,t){var n=ri(e);if(arguments.length<2){var i=this.node();return n.local?i.getAttributeNS(n.space,n.local):i.getAttribute(n)}return this.each((t==null?n.local?_a:ba:typeof t=="function"?n.local?Ca:Sa:n.local?Ea:ka)(n,t))}function vr(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function za(e){return function(){this.style.removeProperty(e)}}function Pa(e,t,n){return function(){this.style.setProperty(e,t,n)}}function Na(e,t,n){return function(){var i=t.apply(this,arguments);i==null?this.style.removeProperty(e):this.style.setProperty(e,i,n)}}function Ta(e,t,n){return arguments.length>1?this.each((t==null?za:typeof t=="function"?Na:Pa)(e,t,n??"")):$t(this.node(),e)}function $t(e,t){return e.style.getPropertyValue(t)||vr(e).getComputedStyle(e,null).getPropertyValue(t)}function Aa(e){return function(){delete this[e]}}function Ha(e,t){return function(){this[e]=t}}function Da(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function Ia(e,t){return arguments.length>1?this.each((t==null?Aa:typeof t=="function"?Da:Ha)(e,t)):this.node()[e]}function wr(e){return e.trim().split(/^|\s+/)}function Ji(e){return e.classList||new xr(e)}function xr(e){this._node=e,this._names=wr(e.getAttribute("class")||"")}xr.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function pr(e,t){for(var n=Ji(e),i=-1,o=t.length;++i<o;)n.add(t[i])}function br(e,t){for(var n=Ji(e),i=-1,o=t.length;++i<o;)n.remove(t[i])}function Oa(e){return function(){pr(this,e)}}function Ra(e){return function(){br(this,e)}}function Va(e,t){return function(){(t.apply(this,arguments)?pr:br)(this,e)}}function Xa(e,t){var n=wr(e+"");if(arguments.length<2){for(var i=Ji(this.node()),o=-1,a=n.length;++o<a;)if(!i.contains(n[o]))return!1;return!0}return this.each((typeof t=="function"?Va:t?Oa:Ra)(n,t))}function Ya(){this.textContent=""}function La(e){return function(){this.textContent=e}}function Ba(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function Wa(e){return arguments.length?this.each(e==null?Ya:(typeof e=="function"?Ba:La)(e)):this.node().textContent}function Ka(){this.innerHTML=""}function Fa(e){return function(){this.innerHTML=e}}function qa(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function Za(e){return arguments.length?this.each(e==null?Ka:(typeof e=="function"?qa:Fa)(e)):this.node().innerHTML}function Ga(){this.nextSibling&&this.parentNode.appendChild(this)}function Ua(){return this.each(Ga)}function $a(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Ja(){return this.each($a)}function Qa(e){var t=typeof e=="function"?e:fr(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function ja(){return null}function el(e,t){var n=typeof e=="function"?e:fr(e),i=t==null?ja:typeof t=="function"?t:$i(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),i.apply(this,arguments)||null)})}function tl(){var e=this.parentNode;e&&e.removeChild(this)}function nl(){return this.each(tl)}function il(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function ol(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function rl(e){return this.select(e?ol:il)}function sl(e){return arguments.length?this.property("__data__",e):this.node().__data__}function al(e){return function(t){e.call(this,t,this.__data__)}}function ll(e){return e.trim().split(/^|\s+/).map(function(t){var n="",i=t.indexOf(".");return i>=0&&(n=t.slice(i+1),t=t.slice(0,i)),{type:t,name:n}})}function cl(e){return function(){var t=this.__on;if(t){for(var n=0,i=-1,o=t.length,a;n<o;++n)a=t[n],(!e.type||a.type===e.type)&&a.name===e.name?this.removeEventListener(a.type,a.listener,a.options):t[++i]=a;++i?t.length=i:delete this.__on}}}function ul(e,t,n){return function(){var i=this.__on,o,a=al(t);if(i){for(var r=0,s=i.length;r<s;++r)if((o=i[r]).type===e.type&&o.name===e.name){this.removeEventListener(o.type,o.listener,o.options),this.addEventListener(o.type,o.listener=a,o.options=n),o.value=t;return}}this.addEventListener(e.type,a,n),o={type:e.type,name:e.name,value:t,listener:a,options:n},i?i.push(o):this.__on=[o]}}function dl(e,t,n){var i=ll(e+""),o,a=i.length,r;if(arguments.length<2){var s=this.node().__on;if(s){for(var c=0,d=s.length,u;c<d;++c)for(o=0,u=s[c];o<a;++o)if((r=i[o]).type===u.type&&r.name===u.name)return u.value}return}for(s=t?ul:cl,o=0;o<a;++o)this.each(s(i[o],t,n));return this}function _r(e,t,n){var i=vr(e),o=i.CustomEvent;typeof o=="function"?o=new o(t,n):(o=i.document.createEvent("Event"),n?(o.initEvent(t,n.bubbles,n.cancelable),o.detail=n.detail):o.initEvent(t,!1,!1)),e.dispatchEvent(o)}function fl(e,t){return function(){return _r(this,e,t)}}function hl(e,t){return function(){return _r(this,e,t.apply(this,arguments))}}function gl(e,t){return this.each((typeof t=="function"?hl:fl)(e,t))}function*ml(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var i=e[t],o=0,a=i.length,r;o<a;++o)(r=i[o])&&(yield r)}var kr=[null];function st(e,t){this._groups=e,this._parents=t}function yn(){return new st([[document.documentElement]],kr)}function yl(){return this}st.prototype=yn.prototype={constructor:st,select:Bs,selectAll:qs,selectChild:$s,selectChildren:ea,filter:ta,data:aa,enter:na,exit:ca,join:ua,merge:da,selection:yl,order:fa,sort:ha,call:ma,nodes:ya,node:va,size:wa,empty:xa,each:pa,attr:Ma,style:Ta,property:Ia,classed:Xa,text:Wa,html:Za,raise:Ua,lower:Ja,append:Qa,insert:el,remove:nl,clone:rl,datum:sl,on:dl,dispatch:gl,[Symbol.iterator]:ml};function lt(e){return typeof e=="string"?new st([[document.querySelector(e)]],[document.documentElement]):new st([[e]],kr)}function vl(e){let t;for(;t=e.sourceEvent;)e=t;return e}function ft(e,t){if(e=vl(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var i=n.createSVGPoint();return i.x=e.clientX,i.y=e.clientY,i=i.matrixTransform(t.getScreenCTM().inverse()),[i.x,i.y]}if(t.getBoundingClientRect){var o=t.getBoundingClientRect();return[e.clientX-o.left-t.clientLeft,e.clientY-o.top-t.clientTop]}}return[e.pageX,e.pageY]}const wl={passive:!1},ln={capture:!0,passive:!1};function yi(e){e.stopImmediatePropagation()}function Kt(e){e.preventDefault(),e.stopImmediatePropagation()}function Er(e){var t=e.document.documentElement,n=lt(e).on("dragstart.drag",Kt,ln);"onselectstart"in t?n.on("selectstart.drag",Kt,ln):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function Sr(e,t){var n=e.document.documentElement,i=lt(e).on("dragstart.drag",null);t&&(i.on("click.drag",Kt,ln),setTimeout(function(){i.on("click.drag",null)},0)),"onselectstart"in n?i.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const Mn=e=>()=>e;function Ti(e,{sourceEvent:t,subject:n,target:i,identifier:o,active:a,x:r,y:s,dx:c,dy:d,dispatch:u}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:i,enumerable:!0,configurable:!0},identifier:{value:o,enumerable:!0,configurable:!0},active:{value:a,enumerable:!0,configurable:!0},x:{value:r,enumerable:!0,configurable:!0},y:{value:s,enumerable:!0,configurable:!0},dx:{value:c,enumerable:!0,configurable:!0},dy:{value:d,enumerable:!0,configurable:!0},_:{value:u}})}Ti.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function xl(e){return!e.ctrlKey&&!e.button}function pl(){return this.parentNode}function bl(e,t){return t??{x:e.x,y:e.y}}function _l(){return navigator.maxTouchPoints||"ontouchstart"in this}function kl(){var e=xl,t=pl,n=bl,i=_l,o={},a=oi("start","drag","end"),r=0,s,c,d,u,m=0;function f(x){x.on("mousedown.drag",g).filter(i).on("touchstart.drag",E).on("touchmove.drag",_,wl).on("touchend.drag touchcancel.drag",w).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function g(x,P){if(!(u||!e.call(this,x,P))){var D=y(this,t.call(this,x,P),x,P,"mouse");D&&(lt(x.view).on("mousemove.drag",k,ln).on("mouseup.drag",S,ln),Er(x.view),yi(x),d=!1,s=x.clientX,c=x.clientY,D("start",x))}}function k(x){if(Kt(x),!d){var P=x.clientX-s,D=x.clientY-c;d=P*P+D*D>m}o.mouse("drag",x)}function S(x){lt(x.view).on("mousemove.drag mouseup.drag",null),Sr(x.view,d),Kt(x),o.mouse("end",x)}function E(x,P){if(e.call(this,x,P)){var D=x.changedTouches,N=t.call(this,x,P),V=D.length,W,R;for(W=0;W<V;++W)(R=y(this,N,x,P,D[W].identifier,D[W]))&&(yi(x),R("start",x,D[W]))}}function _(x){var P=x.changedTouches,D=P.length,N,V;for(N=0;N<D;++N)(V=o[P[N].identifier])&&(Kt(x),V("drag",x,P[N]))}function w(x){var P=x.changedTouches,D=P.length,N,V;for(u&&clearTimeout(u),u=setTimeout(function(){u=null},500),N=0;N<D;++N)(V=o[P[N].identifier])&&(yi(x),V("end",x,P[N]))}function y(x,P,D,N,V,W){var R=a.copy(),Y=ft(W||D,P),H,I,v;if((v=n.call(x,new Ti("beforestart",{sourceEvent:D,target:f,identifier:V,active:r,x:Y[0],y:Y[1],dx:0,dy:0,dispatch:R}),N))!=null)return H=v.x-Y[0]||0,I=v.y-Y[1]||0,function b(p,M,z){var A=Y,O;switch(p){case"start":o[V]=b,O=r++;break;case"end":delete o[V],--r;case"drag":Y=ft(z||M,P),O=r;break}R.call(p,x,new Ti(p,{sourceEvent:M,subject:v,target:f,identifier:V,active:O,x:Y[0]+H,y:Y[1]+I,dx:Y[0]-A[0],dy:Y[1]-A[1],dispatch:R}),N)}}return f.filter=function(x){return arguments.length?(e=typeof x=="function"?x:Mn(!!x),f):e},f.container=function(x){return arguments.length?(t=typeof x=="function"?x:Mn(x),f):t},f.subject=function(x){return arguments.length?(n=typeof x=="function"?x:Mn(x),f):n},f.touchable=function(x){return arguments.length?(i=typeof x=="function"?x:Mn(!!x),f):i},f.on=function(){var x=a.on.apply(a,arguments);return x===a?f:x},f.clickDistance=function(x){return arguments.length?(m=(x=+x)*x,f):Math.sqrt(m)},f}function Qi(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function Cr(e,t){var n=Object.create(e.prototype);for(var i in t)n[i]=t[i];return n}function vn(){}var cn=.7,Bn=1/cn,Ft="\\s*([+-]?\\d+)\\s*",un="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",vt="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",El=/^#([0-9a-f]{3,8})$/,Sl=new RegExp(`^rgb\\(${Ft},${Ft},${Ft}\\)$`),Cl=new RegExp(`^rgb\\(${vt},${vt},${vt}\\)$`),Ml=new RegExp(`^rgba\\(${Ft},${Ft},${Ft},${un}\\)$`),zl=new RegExp(`^rgba\\(${vt},${vt},${vt},${un}\\)$`),Pl=new RegExp(`^hsl\\(${un},${vt},${vt}\\)$`),Nl=new RegExp(`^hsla\\(${un},${vt},${vt},${un}\\)$`),Mo={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Qi(vn,dn,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:zo,formatHex:zo,formatHex8:Tl,formatHsl:Al,formatRgb:Po,toString:Po});function zo(){return this.rgb().formatHex()}function Tl(){return this.rgb().formatHex8()}function Al(){return Mr(this).formatHsl()}function Po(){return this.rgb().formatRgb()}function dn(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=El.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?No(t):n===3?new nt(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?zn(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?zn(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=Sl.exec(e))?new nt(t[1],t[2],t[3],1):(t=Cl.exec(e))?new nt(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=Ml.exec(e))?zn(t[1],t[2],t[3],t[4]):(t=zl.exec(e))?zn(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=Pl.exec(e))?Ho(t[1],t[2]/100,t[3]/100,1):(t=Nl.exec(e))?Ho(t[1],t[2]/100,t[3]/100,t[4]):Mo.hasOwnProperty(e)?No(Mo[e]):e==="transparent"?new nt(NaN,NaN,NaN,0):null}function No(e){return new nt(e>>16&255,e>>8&255,e&255,1)}function zn(e,t,n,i){return i<=0&&(e=t=n=NaN),new nt(e,t,n,i)}function Hl(e){return e instanceof vn||(e=dn(e)),e?(e=e.rgb(),new nt(e.r,e.g,e.b,e.opacity)):new nt}function Ai(e,t,n,i){return arguments.length===1?Hl(e):new nt(e,t,n,i??1)}function nt(e,t,n,i){this.r=+e,this.g=+t,this.b=+n,this.opacity=+i}Qi(nt,Ai,Cr(vn,{brighter(e){return e=e==null?Bn:Math.pow(Bn,e),new nt(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?cn:Math.pow(cn,e),new nt(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new nt(It(this.r),It(this.g),It(this.b),Wn(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:To,formatHex:To,formatHex8:Dl,formatRgb:Ao,toString:Ao}));function To(){return`#${Dt(this.r)}${Dt(this.g)}${Dt(this.b)}`}function Dl(){return`#${Dt(this.r)}${Dt(this.g)}${Dt(this.b)}${Dt((isNaN(this.opacity)?1:this.opacity)*255)}`}function Ao(){const e=Wn(this.opacity);return`${e===1?"rgb(":"rgba("}${It(this.r)}, ${It(this.g)}, ${It(this.b)}${e===1?")":`, ${e})`}`}function Wn(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function It(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Dt(e){return e=It(e),(e<16?"0":"")+e.toString(16)}function Ho(e,t,n,i){return i<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new ht(e,t,n,i)}function Mr(e){if(e instanceof ht)return new ht(e.h,e.s,e.l,e.opacity);if(e instanceof vn||(e=dn(e)),!e)return new ht;if(e instanceof ht)return e;e=e.rgb();var t=e.r/255,n=e.g/255,i=e.b/255,o=Math.min(t,n,i),a=Math.max(t,n,i),r=NaN,s=a-o,c=(a+o)/2;return s?(t===a?r=(n-i)/s+(n<i)*6:n===a?r=(i-t)/s+2:r=(t-n)/s+4,s/=c<.5?a+o:2-a-o,r*=60):s=c>0&&c<1?0:r,new ht(r,s,c,e.opacity)}function Il(e,t,n,i){return arguments.length===1?Mr(e):new ht(e,t,n,i??1)}function ht(e,t,n,i){this.h=+e,this.s=+t,this.l=+n,this.opacity=+i}Qi(ht,Il,Cr(vn,{brighter(e){return e=e==null?Bn:Math.pow(Bn,e),new ht(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?cn:Math.pow(cn,e),new ht(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,i=n+(n<.5?n:1-n)*t,o=2*n-i;return new nt(vi(e>=240?e-240:e+120,o,i),vi(e,o,i),vi(e<120?e+240:e-120,o,i),this.opacity)},clamp(){return new ht(Do(this.h),Pn(this.s),Pn(this.l),Wn(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Wn(this.opacity);return`${e===1?"hsl(":"hsla("}${Do(this.h)}, ${Pn(this.s)*100}%, ${Pn(this.l)*100}%${e===1?")":`, ${e})`}`}}));function Do(e){return e=(e||0)%360,e<0?e+360:e}function Pn(e){return Math.max(0,Math.min(1,e||0))}function vi(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const zr=e=>()=>e;function Ol(e,t){return function(n){return e+n*t}}function Rl(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(i){return Math.pow(e+i*t,n)}}function Vl(e){return(e=+e)==1?Pr:function(t,n){return n-t?Rl(t,n,e):zr(isNaN(t)?n:t)}}function Pr(e,t){var n=t-e;return n?Ol(e,n):zr(isNaN(e)?t:e)}const Io=function e(t){var n=Vl(t);function i(o,a){var r=n((o=Ai(o)).r,(a=Ai(a)).r),s=n(o.g,a.g),c=n(o.b,a.b),d=Pr(o.opacity,a.opacity);return function(u){return o.r=r(u),o.g=s(u),o.b=c(u),o.opacity=d(u),o+""}}return i.gamma=e,i}(1);function zt(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}var Hi=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,wi=new RegExp(Hi.source,"g");function Xl(e){return function(){return e}}function Yl(e){return function(t){return e(t)+""}}function Ll(e,t){var n=Hi.lastIndex=wi.lastIndex=0,i,o,a,r=-1,s=[],c=[];for(e=e+"",t=t+"";(i=Hi.exec(e))&&(o=wi.exec(t));)(a=o.index)>n&&(a=t.slice(n,a),s[r]?s[r]+=a:s[++r]=a),(i=i[0])===(o=o[0])?s[r]?s[r]+=o:s[++r]=o:(s[++r]=null,c.push({i:r,x:zt(i,o)})),n=wi.lastIndex;return n<t.length&&(a=t.slice(n),s[r]?s[r]+=a:s[++r]=a),s.length<2?c[0]?Yl(c[0].x):Xl(t):(t=c.length,function(d){for(var u=0,m;u<t;++u)s[(m=c[u]).i]=m.x(d);return s.join("")})}var Oo=180/Math.PI,Di={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Nr(e,t,n,i,o,a){var r,s,c;return(r=Math.sqrt(e*e+t*t))&&(e/=r,t/=r),(c=e*n+t*i)&&(n-=e*c,i-=t*c),(s=Math.sqrt(n*n+i*i))&&(n/=s,i/=s,c/=s),e*i<t*n&&(e=-e,t=-t,c=-c,r=-r),{translateX:o,translateY:a,rotate:Math.atan2(t,e)*Oo,skewX:Math.atan(c)*Oo,scaleX:r,scaleY:s}}var Nn;function Bl(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?Di:Nr(t.a,t.b,t.c,t.d,t.e,t.f)}function Wl(e){return e==null||(Nn||(Nn=document.createElementNS("http://www.w3.org/2000/svg","g")),Nn.setAttribute("transform",e),!(e=Nn.transform.baseVal.consolidate()))?Di:(e=e.matrix,Nr(e.a,e.b,e.c,e.d,e.e,e.f))}function Tr(e,t,n,i){function o(d){return d.length?d.pop()+" ":""}function a(d,u,m,f,g,k){if(d!==m||u!==f){var S=g.push("translate(",null,t,null,n);k.push({i:S-4,x:zt(d,m)},{i:S-2,x:zt(u,f)})}else(m||f)&&g.push("translate("+m+t+f+n)}function r(d,u,m,f){d!==u?(d-u>180?u+=360:u-d>180&&(d+=360),f.push({i:m.push(o(m)+"rotate(",null,i)-2,x:zt(d,u)})):u&&m.push(o(m)+"rotate("+u+i)}function s(d,u,m,f){d!==u?f.push({i:m.push(o(m)+"skewX(",null,i)-2,x:zt(d,u)}):u&&m.push(o(m)+"skewX("+u+i)}function c(d,u,m,f,g,k){if(d!==m||u!==f){var S=g.push(o(g)+"scale(",null,",",null,")");k.push({i:S-4,x:zt(d,m)},{i:S-2,x:zt(u,f)})}else(m!==1||f!==1)&&g.push(o(g)+"scale("+m+","+f+")")}return function(d,u){var m=[],f=[];return d=e(d),u=e(u),a(d.translateX,d.translateY,u.translateX,u.translateY,m,f),r(d.rotate,u.rotate,m,f),s(d.skewX,u.skewX,m,f),c(d.scaleX,d.scaleY,u.scaleX,u.scaleY,m,f),d=u=null,function(g){for(var k=-1,S=f.length,E;++k<S;)m[(E=f[k]).i]=E.x(g);return m.join("")}}}var Kl=Tr(Bl,"px, ","px)","deg)"),Fl=Tr(Wl,", ",")",")"),ql=1e-12;function Ro(e){return((e=Math.exp(e))+1/e)/2}function Zl(e){return((e=Math.exp(e))-1/e)/2}function Gl(e){return((e=Math.exp(2*e))-1)/(e+1)}const Ul=function e(t,n,i){function o(a,r){var s=a[0],c=a[1],d=a[2],u=r[0],m=r[1],f=r[2],g=u-s,k=m-c,S=g*g+k*k,E,_;if(S<ql)_=Math.log(f/d)/t,E=function(N){return[s+N*g,c+N*k,d*Math.exp(t*N*_)]};else{var w=Math.sqrt(S),y=(f*f-d*d+i*S)/(2*d*n*w),x=(f*f-d*d-i*S)/(2*f*n*w),P=Math.log(Math.sqrt(y*y+1)-y),D=Math.log(Math.sqrt(x*x+1)-x);_=(D-P)/t,E=function(N){var V=N*_,W=Ro(P),R=d/(n*w)*(W*Gl(t*V+P)-Zl(P));return[s+R*g,c+R*k,d*W/Ro(t*V+P)]}}return E.duration=_*1e3*t/Math.SQRT2,E}return o.rho=function(a){var r=Math.max(.001,+a),s=r*r,c=s*s;return e(r,s,c)},o}(Math.SQRT2,2,4);var Jt=0,sn=0,on=0,Ar=1e3,Kn,an,Fn=0,Ot=0,si=0,fn=typeof performance=="object"&&performance.now?performance:Date,Hr=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function ji(){return Ot||(Hr($l),Ot=fn.now()+si)}function $l(){Ot=0}function qn(){this._call=this._time=this._next=null}qn.prototype=Dr.prototype={constructor:qn,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?ji():+n)+(t==null?0:+t),!this._next&&an!==this&&(an?an._next=this:Kn=this,an=this),this._call=e,this._time=n,Ii()},stop:function(){this._call&&(this._call=null,this._time=1/0,Ii())}};function Dr(e,t,n){var i=new qn;return i.restart(e,t,n),i}function Jl(){ji(),++Jt;for(var e=Kn,t;e;)(t=Ot-e._time)>=0&&e._call.call(void 0,t),e=e._next;--Jt}function Vo(){Ot=(Fn=fn.now())+si,Jt=sn=0;try{Jl()}finally{Jt=0,jl(),Ot=0}}function Ql(){var e=fn.now(),t=e-Fn;t>Ar&&(si-=t,Fn=e)}function jl(){for(var e,t=Kn,n,i=1/0;t;)t._call?(i>t._time&&(i=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:Kn=n);an=e,Ii(i)}function Ii(e){if(!Jt){sn&&(sn=clearTimeout(sn));var t=e-Ot;t>24?(e<1/0&&(sn=setTimeout(Vo,e-fn.now()-si)),on&&(on=clearInterval(on))):(on||(Fn=fn.now(),on=setInterval(Ql,Ar)),Jt=1,Hr(Vo))}}function Xo(e,t,n){var i=new qn;return t=t==null?0:+t,i.restart(o=>{i.stop(),e(o+t)},t,n),i}var ec=oi("start","end","cancel","interrupt"),tc=[],Ir=0,Yo=1,Oi=2,In=3,Lo=4,Ri=5,On=6;function ai(e,t,n,i,o,a){var r=e.__transition;if(!r)e.__transition={};else if(n in r)return;nc(e,n,{name:t,index:i,group:o,on:ec,tween:tc,time:a.time,delay:a.delay,duration:a.duration,ease:a.ease,timer:null,state:Ir})}function eo(e,t){var n=gt(e,t);if(n.state>Ir)throw new Error("too late; already scheduled");return n}function xt(e,t){var n=gt(e,t);if(n.state>In)throw new Error("too late; already running");return n}function gt(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function nc(e,t,n){var i=e.__transition,o;i[t]=n,n.timer=Dr(a,0,n.time);function a(d){n.state=Yo,n.timer.restart(r,n.delay,n.time),n.delay<=d&&r(d-n.delay)}function r(d){var u,m,f,g;if(n.state!==Yo)return c();for(u in i)if(g=i[u],g.name===n.name){if(g.state===In)return Xo(r);g.state===Lo?(g.state=On,g.timer.stop(),g.on.call("interrupt",e,e.__data__,g.index,g.group),delete i[u]):+u<t&&(g.state=On,g.timer.stop(),g.on.call("cancel",e,e.__data__,g.index,g.group),delete i[u])}if(Xo(function(){n.state===In&&(n.state=Lo,n.timer.restart(s,n.delay,n.time),s(d))}),n.state=Oi,n.on.call("start",e,e.__data__,n.index,n.group),n.state===Oi){for(n.state=In,o=new Array(f=n.tween.length),u=0,m=-1;u<f;++u)(g=n.tween[u].value.call(e,e.__data__,n.index,n.group))&&(o[++m]=g);o.length=m+1}}function s(d){for(var u=d<n.duration?n.ease.call(null,d/n.duration):(n.timer.restart(c),n.state=Ri,1),m=-1,f=o.length;++m<f;)o[m].call(e,u);n.state===Ri&&(n.on.call("end",e,e.__data__,n.index,n.group),c())}function c(){n.state=On,n.timer.stop(),delete i[t];for(var d in i)return;delete e.__transition}}function Rn(e,t){var n=e.__transition,i,o,a=!0,r;if(n){t=t==null?null:t+"";for(r in n){if((i=n[r]).name!==t){a=!1;continue}o=i.state>Oi&&i.state<Ri,i.state=On,i.timer.stop(),i.on.call(o?"interrupt":"cancel",e,e.__data__,i.index,i.group),delete n[r]}a&&delete e.__transition}}function ic(e){return this.each(function(){Rn(this,e)})}function oc(e,t){var n,i;return function(){var o=xt(this,e),a=o.tween;if(a!==n){i=n=a;for(var r=0,s=i.length;r<s;++r)if(i[r].name===t){i=i.slice(),i.splice(r,1);break}}o.tween=i}}function rc(e,t,n){var i,o;if(typeof n!="function")throw new Error;return function(){var a=xt(this,e),r=a.tween;if(r!==i){o=(i=r).slice();for(var s={name:t,value:n},c=0,d=o.length;c<d;++c)if(o[c].name===t){o[c]=s;break}c===d&&o.push(s)}a.tween=o}}function sc(e,t){var n=this._id;if(e+="",arguments.length<2){for(var i=gt(this.node(),n).tween,o=0,a=i.length,r;o<a;++o)if((r=i[o]).name===e)return r.value;return null}return this.each((t==null?oc:rc)(n,e,t))}function to(e,t,n){var i=e._id;return e.each(function(){var o=xt(this,i);(o.value||(o.value={}))[t]=n.apply(this,arguments)}),function(o){return gt(o,i).value[t]}}function Or(e,t){var n;return(typeof t=="number"?zt:t instanceof dn?Io:(n=dn(t))?(t=n,Io):Ll)(e,t)}function ac(e){return function(){this.removeAttribute(e)}}function lc(e){return function(){this.removeAttributeNS(e.space,e.local)}}function cc(e,t,n){var i,o=n+"",a;return function(){var r=this.getAttribute(e);return r===o?null:r===i?a:a=t(i=r,n)}}function uc(e,t,n){var i,o=n+"",a;return function(){var r=this.getAttributeNS(e.space,e.local);return r===o?null:r===i?a:a=t(i=r,n)}}function dc(e,t,n){var i,o,a;return function(){var r,s=n(this),c;return s==null?void this.removeAttribute(e):(r=this.getAttribute(e),c=s+"",r===c?null:r===i&&c===o?a:(o=c,a=t(i=r,s)))}}function fc(e,t,n){var i,o,a;return function(){var r,s=n(this),c;return s==null?void this.removeAttributeNS(e.space,e.local):(r=this.getAttributeNS(e.space,e.local),c=s+"",r===c?null:r===i&&c===o?a:(o=c,a=t(i=r,s)))}}function hc(e,t){var n=ri(e),i=n==="transform"?Fl:Or;return this.attrTween(e,typeof t=="function"?(n.local?fc:dc)(n,i,to(this,"attr."+e,t)):t==null?(n.local?lc:ac)(n):(n.local?uc:cc)(n,i,t))}function gc(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function mc(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function yc(e,t){var n,i;function o(){var a=t.apply(this,arguments);return a!==i&&(n=(i=a)&&mc(e,a)),n}return o._value=t,o}function vc(e,t){var n,i;function o(){var a=t.apply(this,arguments);return a!==i&&(n=(i=a)&&gc(e,a)),n}return o._value=t,o}function wc(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var i=ri(e);return this.tween(n,(i.local?yc:vc)(i,t))}function xc(e,t){return function(){eo(this,e).delay=+t.apply(this,arguments)}}function pc(e,t){return t=+t,function(){eo(this,e).delay=t}}function bc(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?xc:pc)(t,e)):gt(this.node(),t).delay}function _c(e,t){return function(){xt(this,e).duration=+t.apply(this,arguments)}}function kc(e,t){return t=+t,function(){xt(this,e).duration=t}}function Ec(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?_c:kc)(t,e)):gt(this.node(),t).duration}function Sc(e,t){if(typeof t!="function")throw new Error;return function(){xt(this,e).ease=t}}function Cc(e){var t=this._id;return arguments.length?this.each(Sc(t,e)):gt(this.node(),t).ease}function Mc(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;xt(this,e).ease=n}}function zc(e){if(typeof e!="function")throw new Error;return this.each(Mc(this._id,e))}function Pc(e){typeof e!="function"&&(e=gr(e));for(var t=this._groups,n=t.length,i=new Array(n),o=0;o<n;++o)for(var a=t[o],r=a.length,s=i[o]=[],c,d=0;d<r;++d)(c=a[d])&&e.call(c,c.__data__,d,a)&&s.push(c);return new St(i,this._parents,this._name,this._id)}function Nc(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,i=t.length,o=n.length,a=Math.min(i,o),r=new Array(i),s=0;s<a;++s)for(var c=t[s],d=n[s],u=c.length,m=r[s]=new Array(u),f,g=0;g<u;++g)(f=c[g]||d[g])&&(m[g]=f);for(;s<i;++s)r[s]=t[s];return new St(r,this._parents,this._name,this._id)}function Tc(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function Ac(e,t,n){var i,o,a=Tc(t)?eo:xt;return function(){var r=a(this,e),s=r.on;s!==i&&(o=(i=s).copy()).on(t,n),r.on=o}}function Hc(e,t){var n=this._id;return arguments.length<2?gt(this.node(),n).on.on(e):this.each(Ac(n,e,t))}function Dc(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function Ic(){return this.on("end.remove",Dc(this._id))}function Oc(e){var t=this._name,n=this._id;typeof e!="function"&&(e=$i(e));for(var i=this._groups,o=i.length,a=new Array(o),r=0;r<o;++r)for(var s=i[r],c=s.length,d=a[r]=new Array(c),u,m,f=0;f<c;++f)(u=s[f])&&(m=e.call(u,u.__data__,f,s))&&("__data__"in u&&(m.__data__=u.__data__),d[f]=m,ai(d[f],t,n,f,d,gt(u,n)));return new St(a,this._parents,t,n)}function Rc(e){var t=this._name,n=this._id;typeof e!="function"&&(e=hr(e));for(var i=this._groups,o=i.length,a=[],r=[],s=0;s<o;++s)for(var c=i[s],d=c.length,u,m=0;m<d;++m)if(u=c[m]){for(var f=e.call(u,u.__data__,m,c),g,k=gt(u,n),S=0,E=f.length;S<E;++S)(g=f[S])&&ai(g,t,n,S,f,k);a.push(f),r.push(u)}return new St(a,r,t,n)}var Vc=yn.prototype.constructor;function Xc(){return new Vc(this._groups,this._parents)}function Yc(e,t){var n,i,o;return function(){var a=$t(this,e),r=(this.style.removeProperty(e),$t(this,e));return a===r?null:a===n&&r===i?o:o=t(n=a,i=r)}}function Rr(e){return function(){this.style.removeProperty(e)}}function Lc(e,t,n){var i,o=n+"",a;return function(){var r=$t(this,e);return r===o?null:r===i?a:a=t(i=r,n)}}function Bc(e,t,n){var i,o,a;return function(){var r=$t(this,e),s=n(this),c=s+"";return s==null&&(c=s=(this.style.removeProperty(e),$t(this,e))),r===c?null:r===i&&c===o?a:(o=c,a=t(i=r,s))}}function Wc(e,t){var n,i,o,a="style."+t,r="end."+a,s;return function(){var c=xt(this,e),d=c.on,u=c.value[a]==null?s||(s=Rr(t)):void 0;(d!==n||o!==u)&&(i=(n=d).copy()).on(r,o=u),c.on=i}}function Kc(e,t,n){var i=(e+="")=="transform"?Kl:Or;return t==null?this.styleTween(e,Yc(e,i)).on("end.style."+e,Rr(e)):typeof t=="function"?this.styleTween(e,Bc(e,i,to(this,"style."+e,t))).each(Wc(this._id,e)):this.styleTween(e,Lc(e,i,t),n).on("end.style."+e,null)}function Fc(e,t,n){return function(i){this.style.setProperty(e,t.call(this,i),n)}}function qc(e,t,n){var i,o;function a(){var r=t.apply(this,arguments);return r!==o&&(i=(o=r)&&Fc(e,r,n)),i}return a._value=t,a}function Zc(e,t,n){var i="style."+(e+="");if(arguments.length<2)return(i=this.tween(i))&&i._value;if(t==null)return this.tween(i,null);if(typeof t!="function")throw new Error;return this.tween(i,qc(e,t,n??""))}function Gc(e){return function(){this.textContent=e}}function Uc(e){return function(){var t=e(this);this.textContent=t??""}}function $c(e){return this.tween("text",typeof e=="function"?Uc(to(this,"text",e)):Gc(e==null?"":e+""))}function Jc(e){return function(t){this.textContent=e.call(this,t)}}function Qc(e){var t,n;function i(){var o=e.apply(this,arguments);return o!==n&&(t=(n=o)&&Jc(o)),t}return i._value=e,i}function jc(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,Qc(e))}function eu(){for(var e=this._name,t=this._id,n=Vr(),i=this._groups,o=i.length,a=0;a<o;++a)for(var r=i[a],s=r.length,c,d=0;d<s;++d)if(c=r[d]){var u=gt(c,t);ai(c,e,n,d,r,{time:u.time+u.delay+u.duration,delay:0,duration:u.duration,ease:u.ease})}return new St(i,this._parents,e,n)}function tu(){var e,t,n=this,i=n._id,o=n.size();return new Promise(function(a,r){var s={value:r},c={value:function(){--o===0&&a()}};n.each(function(){var d=xt(this,i),u=d.on;u!==e&&(t=(e=u).copy(),t._.cancel.push(s),t._.interrupt.push(s),t._.end.push(c)),d.on=t}),o===0&&a()})}var nu=0;function St(e,t,n,i){this._groups=e,this._parents=t,this._name=n,this._id=i}function Vr(){return++nu}var bt=yn.prototype;St.prototype={constructor:St,select:Oc,selectAll:Rc,selectChild:bt.selectChild,selectChildren:bt.selectChildren,filter:Pc,merge:Nc,selection:Xc,transition:eu,call:bt.call,nodes:bt.nodes,node:bt.node,size:bt.size,empty:bt.empty,each:bt.each,on:Hc,attr:hc,attrTween:wc,style:Kc,styleTween:Zc,text:$c,textTween:jc,remove:Ic,tween:sc,delay:bc,duration:Ec,ease:Cc,easeVarying:zc,end:tu,[Symbol.iterator]:bt[Symbol.iterator]};function iu(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var ou={time:null,delay:0,duration:250,ease:iu};function ru(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function su(e){var t,n;e instanceof St?(t=e._id,e=e._name):(t=Vr(),(n=ou).time=ji(),e=e==null?null:e+"");for(var i=this._groups,o=i.length,a=0;a<o;++a)for(var r=i[a],s=r.length,c,d=0;d<s;++d)(c=r[d])&&ai(c,e,t,d,r,n||ru(c,t));return new St(i,this._parents,e,t)}yn.prototype.interrupt=ic;yn.prototype.transition=su;const Tn=e=>()=>e;function au(e,{sourceEvent:t,target:n,transform:i,dispatch:o}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:i,enumerable:!0,configurable:!0},_:{value:o}})}function _t(e,t,n){this.k=e,this.x=t,this.y=n}_t.prototype={constructor:_t,scale:function(e){return e===1?this:new _t(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new _t(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var li=new _t(1,0,0);Xr.prototype=_t.prototype;function Xr(e){for(;!e.__zoom;)if(!(e=e.parentNode))return li;return e.__zoom}function xi(e){e.stopImmediatePropagation()}function rn(e){e.preventDefault(),e.stopImmediatePropagation()}function lu(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function cu(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function Bo(){return this.__zoom||li}function uu(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function du(){return navigator.maxTouchPoints||"ontouchstart"in this}function fu(e,t,n){var i=e.invertX(t[0][0])-n[0][0],o=e.invertX(t[1][0])-n[1][0],a=e.invertY(t[0][1])-n[0][1],r=e.invertY(t[1][1])-n[1][1];return e.translate(o>i?(i+o)/2:Math.min(0,i)||Math.max(0,o),r>a?(a+r)/2:Math.min(0,a)||Math.max(0,r))}function Yr(){var e=lu,t=cu,n=fu,i=uu,o=du,a=[0,1/0],r=[[-1/0,-1/0],[1/0,1/0]],s=250,c=Ul,d=oi("start","zoom","end"),u,m,f,g=500,k=150,S=0,E=10;function _(v){v.property("__zoom",Bo).on("wheel.zoom",V,{passive:!1}).on("mousedown.zoom",W).on("dblclick.zoom",R).filter(o).on("touchstart.zoom",Y).on("touchmove.zoom",H).on("touchend.zoom touchcancel.zoom",I).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}_.transform=function(v,b,p,M){var z=v.selection?v.selection():v;z.property("__zoom",Bo),v!==z?P(v,b,p,M):z.interrupt().each(function(){D(this,arguments).event(M).start().zoom(null,typeof b=="function"?b.apply(this,arguments):b).end()})},_.scaleBy=function(v,b,p,M){_.scaleTo(v,function(){var z=this.__zoom.k,A=typeof b=="function"?b.apply(this,arguments):b;return z*A},p,M)},_.scaleTo=function(v,b,p,M){_.transform(v,function(){var z=t.apply(this,arguments),A=this.__zoom,O=p==null?x(z):typeof p=="function"?p.apply(this,arguments):p,L=A.invert(O),K=typeof b=="function"?b.apply(this,arguments):b;return n(y(w(A,K),O,L),z,r)},p,M)},_.translateBy=function(v,b,p,M){_.transform(v,function(){return n(this.__zoom.translate(typeof b=="function"?b.apply(this,arguments):b,typeof p=="function"?p.apply(this,arguments):p),t.apply(this,arguments),r)},null,M)},_.translateTo=function(v,b,p,M,z){_.transform(v,function(){var A=t.apply(this,arguments),O=this.__zoom,L=M==null?x(A):typeof M=="function"?M.apply(this,arguments):M;return n(li.translate(L[0],L[1]).scale(O.k).translate(typeof b=="function"?-b.apply(this,arguments):-b,typeof p=="function"?-p.apply(this,arguments):-p),A,r)},M,z)};function w(v,b){return b=Math.max(a[0],Math.min(a[1],b)),b===v.k?v:new _t(b,v.x,v.y)}function y(v,b,p){var M=b[0]-p[0]*v.k,z=b[1]-p[1]*v.k;return M===v.x&&z===v.y?v:new _t(v.k,M,z)}function x(v){return[(+v[0][0]+ +v[1][0])/2,(+v[0][1]+ +v[1][1])/2]}function P(v,b,p,M){v.on("start.zoom",function(){D(this,arguments).event(M).start()}).on("interrupt.zoom end.zoom",function(){D(this,arguments).event(M).end()}).tween("zoom",function(){var z=this,A=arguments,O=D(z,A).event(M),L=t.apply(z,A),K=p==null?x(L):typeof p=="function"?p.apply(z,A):p,J=Math.max(L[1][0]-L[0][0],L[1][1]-L[0][1]),Z=z.__zoom,Q=typeof b=="function"?b.apply(z,A):b,ie=c(Z.invert(K).concat(J/Z.k),Q.invert(K).concat(J/Q.k));return function(oe){if(oe===1)oe=Q;else{var le=ie(oe),pe=J/le[2];oe=new _t(pe,K[0]-le[0]*pe,K[1]-le[1]*pe)}O.zoom(null,oe)}})}function D(v,b,p){return!p&&v.__zooming||new N(v,b)}function N(v,b){this.that=v,this.args=b,this.active=0,this.sourceEvent=null,this.extent=t.apply(v,b),this.taps=0}N.prototype={event:function(v){return v&&(this.sourceEvent=v),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(v,b){return this.mouse&&v!=="mouse"&&(this.mouse[1]=b.invert(this.mouse[0])),this.touch0&&v!=="touch"&&(this.touch0[1]=b.invert(this.touch0[0])),this.touch1&&v!=="touch"&&(this.touch1[1]=b.invert(this.touch1[0])),this.that.__zoom=b,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(v){var b=lt(this.that).datum();d.call(v,this.that,new au(v,{sourceEvent:this.sourceEvent,target:_,transform:this.that.__zoom,dispatch:d}),b)}};function V(v,...b){if(!e.apply(this,arguments))return;var p=D(this,b).event(v),M=this.__zoom,z=Math.max(a[0],Math.min(a[1],M.k*Math.pow(2,i.apply(this,arguments)))),A=ft(v);if(p.wheel)(p.mouse[0][0]!==A[0]||p.mouse[0][1]!==A[1])&&(p.mouse[1]=M.invert(p.mouse[0]=A)),clearTimeout(p.wheel);else{if(M.k===z)return;p.mouse=[A,M.invert(A)],Rn(this),p.start()}rn(v),p.wheel=setTimeout(O,k),p.zoom("mouse",n(y(w(M,z),p.mouse[0],p.mouse[1]),p.extent,r));function O(){p.wheel=null,p.end()}}function W(v,...b){if(f||!e.apply(this,arguments))return;var p=v.currentTarget,M=D(this,b,!0).event(v),z=lt(v.view).on("mousemove.zoom",K,!0).on("mouseup.zoom",J,!0),A=ft(v,p),O=v.clientX,L=v.clientY;Er(v.view),xi(v),M.mouse=[A,this.__zoom.invert(A)],Rn(this),M.start();function K(Z){if(rn(Z),!M.moved){var Q=Z.clientX-O,ie=Z.clientY-L;M.moved=Q*Q+ie*ie>S}M.event(Z).zoom("mouse",n(y(M.that.__zoom,M.mouse[0]=ft(Z,p),M.mouse[1]),M.extent,r))}function J(Z){z.on("mousemove.zoom mouseup.zoom",null),Sr(Z.view,M.moved),rn(Z),M.event(Z).end()}}function R(v,...b){if(e.apply(this,arguments)){var p=this.__zoom,M=ft(v.changedTouches?v.changedTouches[0]:v,this),z=p.invert(M),A=p.k*(v.shiftKey?.5:2),O=n(y(w(p,A),M,z),t.apply(this,b),r);rn(v),s>0?lt(this).transition().duration(s).call(P,O,M,v):lt(this).call(_.transform,O,M,v)}}function Y(v,...b){if(e.apply(this,arguments)){var p=v.touches,M=p.length,z=D(this,b,v.changedTouches.length===M).event(v),A,O,L,K;for(xi(v),O=0;O<M;++O)L=p[O],K=ft(L,this),K=[K,this.__zoom.invert(K),L.identifier],z.touch0?!z.touch1&&z.touch0[2]!==K[2]&&(z.touch1=K,z.taps=0):(z.touch0=K,A=!0,z.taps=1+!!u);u&&(u=clearTimeout(u)),A&&(z.taps<2&&(m=K[0],u=setTimeout(function(){u=null},g)),Rn(this),z.start())}}function H(v,...b){if(this.__zooming){var p=D(this,b).event(v),M=v.changedTouches,z=M.length,A,O,L,K;for(rn(v),A=0;A<z;++A)O=M[A],L=ft(O,this),p.touch0&&p.touch0[2]===O.identifier?p.touch0[0]=L:p.touch1&&p.touch1[2]===O.identifier&&(p.touch1[0]=L);if(O=p.that.__zoom,p.touch1){var J=p.touch0[0],Z=p.touch0[1],Q=p.touch1[0],ie=p.touch1[1],oe=(oe=Q[0]-J[0])*oe+(oe=Q[1]-J[1])*oe,le=(le=ie[0]-Z[0])*le+(le=ie[1]-Z[1])*le;O=w(O,Math.sqrt(oe/le)),L=[(J[0]+Q[0])/2,(J[1]+Q[1])/2],K=[(Z[0]+ie[0])/2,(Z[1]+ie[1])/2]}else if(p.touch0)L=p.touch0[0],K=p.touch0[1];else return;p.zoom("touch",n(y(O,L,K),p.extent,r))}}function I(v,...b){if(this.__zooming){var p=D(this,b).event(v),M=v.changedTouches,z=M.length,A,O;for(xi(v),f&&clearTimeout(f),f=setTimeout(function(){f=null},g),A=0;A<z;++A)O=M[A],p.touch0&&p.touch0[2]===O.identifier?delete p.touch0:p.touch1&&p.touch1[2]===O.identifier&&delete p.touch1;if(p.touch1&&!p.touch0&&(p.touch0=p.touch1,delete p.touch1),p.touch0)p.touch0[1]=this.__zoom.invert(p.touch0[0]);else if(p.end(),p.taps===2&&(O=ft(O,this),Math.hypot(m[0]-O[0],m[1]-O[1])<E)){var L=lt(this).on("dblclick.zoom");L&&L.apply(this,arguments)}}}return _.wheelDelta=function(v){return arguments.length?(i=typeof v=="function"?v:Tn(+v),_):i},_.filter=function(v){return arguments.length?(e=typeof v=="function"?v:Tn(!!v),_):e},_.touchable=function(v){return arguments.length?(o=typeof v=="function"?v:Tn(!!v),_):o},_.extent=function(v){return arguments.length?(t=typeof v=="function"?v:Tn([[+v[0][0],+v[0][1]],[+v[1][0],+v[1][1]]]),_):t},_.scaleExtent=function(v){return arguments.length?(a[0]=+v[0],a[1]=+v[1],_):[a[0],a[1]]},_.translateExtent=function(v){return arguments.length?(r[0][0]=+v[0][0],r[1][0]=+v[1][0],r[0][1]=+v[0][1],r[1][1]=+v[1][1],_):[[r[0][0],r[0][1]],[r[1][0],r[1][1]]]},_.constrain=function(v){return arguments.length?(n=v,_):n},_.duration=function(v){return arguments.length?(s=+v,_):s},_.interpolate=function(v){return arguments.length?(c=v,_):c},_.on=function(){var v=d.on.apply(d,arguments);return v===d?_:v},_.clickDistance=function(v){return arguments.length?(S=(v=+v)*v,_):Math.sqrt(S)},_.tapDistance=function(v){return arguments.length?(E=+v,_):E},_}const Qt={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:e=>`Node type "${e}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:e=>`The old edge with id=${e} does not exist.`,error009:e=>`Marker type "${e}" doesn't exist.`,error008:(e,{id:t,sourceHandle:n,targetHandle:i})=>`Couldn't create edge for ${e} handle id: "${e==="source"?n:i}", edge id: ${t}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:e=>`Edge type "${e}" not found. Using fallback type "default".`,error012:e=>`Node with id "${e}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`,error013:(e="react")=>`It seems that you haven't loaded the styles. Please import '@xyflow/${e}/dist/style.css' or base.css to make sure everything is working properly.`,error014:()=>"useNodeConnections: No node ID found. Call useNodeConnections inside a custom Node or provide a node ID.",error015:()=>"It seems that you are trying to drag a node that is not initialized. Please use onNodesChange as explained in the docs."},Zn=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]];var Rt;(function(e){e.Strict="strict",e.Loose="loose"})(Rt||(Rt={}));var kt;(function(e){e.Free="free",e.Vertical="vertical",e.Horizontal="horizontal"})(kt||(kt={}));var Gn;(function(e){e.Partial="partial",e.Full="full"})(Gn||(Gn={}));const Vi={inProgress:!1,isValid:null,from:null,fromHandle:null,fromPosition:null,fromNode:null,to:null,toHandle:null,toPosition:null,toNode:null};var qt;(function(e){e.Bezier="default",e.Straight="straight",e.Step="step",e.SmoothStep="smoothstep",e.SimpleBezier="simplebezier"})(qt||(qt={}));var Lt;(function(e){e.Arrow="arrow",e.ArrowClosed="arrowclosed"})(Lt||(Lt={}));var re;(function(e){e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom"})(re||(re={}));const Wo={[re.Left]:re.Right,[re.Right]:re.Left,[re.Top]:re.Bottom,[re.Bottom]:re.Top};function hu(e,t){if(!e&&!t)return!0;if(!e||!t||e.size!==t.size)return!1;if(!e.size&&!t.size)return!0;for(const n of e.keys())if(!t.has(n))return!1;return!0}function Ko(e,t,n){if(!n)return;const i=[];e.forEach((o,a)=>{t!=null&&t.has(a)||i.push(o)}),i.length&&n(i)}function Fo(e){return e===null?null:e?"valid":"invalid"}const gu=e=>"id"in e&&"source"in e&&"target"in e,Lr=e=>"id"in e&&"internals"in e&&!("source"in e)&&!("target"in e),wn=(e,t=[0,0])=>{const{width:n,height:i}=Ct(e),o=e.origin??t,a=n*o[0],r=i*o[1];return{x:e.position.x-a,y:e.position.y-r}},xn=(e,t={})=>{if(e.size===0)return{x:0,y:0,width:0,height:0};let n={x:1/0,y:1/0,x2:-1/0,y2:-1/0};return e.forEach(i=>{if(t.filter===void 0||t.filter(i)){const o=Li(i);n=no(n,o)}}),io(n)},Br=(e,t,[n,i,o]=[0,0,1],a=!1,r=!1)=>{const s={...ui(t,[n,i,o]),width:t.width/o,height:t.height/o},c=[];for(const d of e.values()){const{measured:u,selectable:m=!0,hidden:f=!1}=d;if(r&&!m||f)continue;const g=u.width??d.width??d.initialWidth??null,k=u.height??d.height??d.initialHeight??null,S=oo(s,ci(d)),E=(g??0)*(k??0),_=a&&S>0;(!d.internals.handleBounds||_||S>=E||d.dragging)&&c.push(d)}return c},Xi=(e,t)=>{const n=new Set;return e.forEach(i=>{n.add(i.id)}),t.filter(i=>n.has(i.source)||n.has(i.target))};function mu(e,t){const n=new Map,i=t!=null&&t.nodes?new Set(t.nodes.map(o=>o.id)):null;return e.forEach(o=>{o.measured.width&&o.measured.height&&((t==null?void 0:t.includeHiddenNodes)||!o.hidden)&&(!i||i.has(o.id))&&n.set(o.id,o)}),n}async function yu({nodes:e,width:t,height:n,panZoom:i,minZoom:o,maxZoom:a},r){if(e.size===0)return Promise.resolve(!0);const s=mu(e,r),c=xn(s),d=qr(c,t,n,(r==null?void 0:r.minZoom)??o,(r==null?void 0:r.maxZoom)??a,(r==null?void 0:r.padding)??.1);return await i.setViewport(d,{duration:r==null?void 0:r.duration}),Promise.resolve(!0)}function vu({nodeId:e,nextPosition:t,nodeLookup:n,nodeOrigin:i=[0,0],nodeExtent:o,onError:a}){const r=n.get(e),s=r.parentId?n.get(r.parentId):void 0,{x:c,y:d}=s?s.internals.positionAbsolute:{x:0,y:0},u=r.origin??i;let m=o;if(r.extent==="parent"&&!r.expandParent)if(!s)a==null||a("005",Qt.error005());else{const g=s.measured.width,k=s.measured.height;g&&k&&(m=[[c,d],[c+g,d+k]])}else s&&en(r.extent)&&(m=[[r.extent[0][0]+c,r.extent[0][1]+d],[r.extent[1][0]+c,r.extent[1][1]+d]]);const f=en(m)?Vt(t,m,r.measured):t;return(r.measured.width===void 0||r.measured.height===void 0)&&(a==null||a("015",Qt.error015())),{position:{x:f.x-c+(r.measured.width??0)*u[0],y:f.y-d+(r.measured.height??0)*u[1]},positionAbsolute:f}}async function wu({nodesToRemove:e=[],edgesToRemove:t=[],nodes:n,edges:i,onBeforeDelete:o}){const a=new Set(e.map(f=>f.id)),r=[];for(const f of n){if(f.deletable===!1)continue;const g=a.has(f.id),k=!g&&f.parentId&&r.find(S=>S.id===f.parentId);(g||k)&&r.push(f)}const s=new Set(t.map(f=>f.id)),c=i.filter(f=>f.deletable!==!1),u=Xi(r,c);for(const f of c)s.has(f.id)&&!u.find(k=>k.id===f.id)&&u.push(f);if(!o)return{edges:u,nodes:r};const m=await o({nodes:r,edges:u});return typeof m=="boolean"?m?{edges:u,nodes:r}:{edges:[],nodes:[]}:m}const jt=(e,t=0,n=1)=>Math.min(Math.max(e,t),n),Vt=(e={x:0,y:0},t,n)=>({x:jt(e.x,t[0][0],t[1][0]-((n==null?void 0:n.width)??0)),y:jt(e.y,t[0][1],t[1][1]-((n==null?void 0:n.height)??0))});function Wr(e,t,n){const{width:i,height:o}=Ct(n),{x:a,y:r}=n.internals.positionAbsolute;return Vt(e,[[a,r],[a+i,r+o]],t)}const qo=(e,t,n)=>e<t?jt(Math.abs(e-t),1,t)/t:e>n?-jt(Math.abs(e-n),1,t)/t:0,Kr=(e,t,n=15,i=40)=>{const o=qo(e.x,i,t.width-i)*n,a=qo(e.y,i,t.height-i)*n;return[o,a]},no=(e,t)=>({x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x2,t.x2),y2:Math.max(e.y2,t.y2)}),Yi=({x:e,y:t,width:n,height:i})=>({x:e,y:t,x2:e+n,y2:t+i}),io=({x:e,y:t,x2:n,y2:i})=>({x:e,y:t,width:n-e,height:i-t}),ci=(e,t=[0,0])=>{var o,a;const{x:n,y:i}=Lr(e)?e.internals.positionAbsolute:wn(e,t);return{x:n,y:i,width:((o=e.measured)==null?void 0:o.width)??e.width??e.initialWidth??0,height:((a=e.measured)==null?void 0:a.height)??e.height??e.initialHeight??0}},Li=(e,t=[0,0])=>{var o,a;const{x:n,y:i}=Lr(e)?e.internals.positionAbsolute:wn(e,t);return{x:n,y:i,x2:n+(((o=e.measured)==null?void 0:o.width)??e.width??e.initialWidth??0),y2:i+(((a=e.measured)==null?void 0:a.height)??e.height??e.initialHeight??0)}},Fr=(e,t)=>io(no(Yi(e),Yi(t))),oo=(e,t)=>{const n=Math.max(0,Math.min(e.x+e.width,t.x+t.width)-Math.max(e.x,t.x)),i=Math.max(0,Math.min(e.y+e.height,t.y+t.height)-Math.max(e.y,t.y));return Math.ceil(n*i)},Zt=e=>!isNaN(e)&&isFinite(e),xu=(e,t)=>{},ro=(e,t=[1,1])=>({x:t[0]*Math.round(e.x/t[0]),y:t[1]*Math.round(e.y/t[1])}),ui=({x:e,y:t},[n,i,o],a=!1,r=[1,1])=>{const s={x:(e-n)/o,y:(t-i)/o};return a?ro(s,r):s},Bi=({x:e,y:t},[n,i,o])=>({x:e*o+n,y:t*o+i});function Xt(e,t){if(typeof e=="number")return Math.floor((t-t/(1+e))*.5);if(typeof e=="string"&&e.endsWith("px")){const n=parseFloat(e);if(!Number.isNaN(n))return Math.floor(n)}if(typeof e=="string"&&e.endsWith("%")){const n=parseFloat(e);if(!Number.isNaN(n))return Math.floor(t*n*.01)}return console.error(`[React Flow] The padding value "${e}" is invalid. Please provide a number or a string with a valid unit (px or %).`),0}function pu(e,t,n){if(typeof e=="string"||typeof e=="number"){const i=Xt(e,n),o=Xt(e,t);return{top:i,right:o,bottom:i,left:o,x:o*2,y:i*2}}if(typeof e=="object"){const i=Xt(e.top??e.y??0,n),o=Xt(e.bottom??e.y??0,n),a=Xt(e.left??e.x??0,t),r=Xt(e.right??e.x??0,t);return{top:i,right:r,bottom:o,left:a,x:a+r,y:i+o}}return{top:0,right:0,bottom:0,left:0,x:0,y:0}}function bu(e,t,n,i,o,a){const{x:r,y:s}=Bi(e,[t,n,i]),{x:c,y:d}=Bi({x:e.x+e.width,y:e.y+e.height},[t,n,i]),u=o-c,m=a-d;return{left:Math.floor(r),top:Math.floor(s),right:Math.floor(u),bottom:Math.floor(m)}}const qr=(e,t,n,i,o,a)=>{const r=pu(a,t,n),s=(t-r.x)/e.width,c=(n-r.y)/e.height,d=Math.min(s,c),u=jt(d,i,o),m=e.x+e.width/2,f=e.y+e.height/2,g=t/2-m*u,k=n/2-f*u,S=bu(e,g,k,u,t,n),E={left:Math.min(S.left-r.left,0),top:Math.min(S.top-r.top,0),right:Math.min(S.right-r.right,0),bottom:Math.min(S.bottom-r.bottom,0)};return{x:g-E.left+E.right,y:k-E.top+E.bottom,zoom:u}},Un=()=>{var e;return typeof navigator<"u"&&((e=navigator==null?void 0:navigator.userAgent)==null?void 0:e.indexOf("Mac"))>=0};function en(e){return e!==void 0&&e!=="parent"}function Ct(e){var t,n;return{width:((t=e.measured)==null?void 0:t.width)??e.width??e.initialWidth??0,height:((n=e.measured)==null?void 0:n.height)??e.height??e.initialHeight??0}}function $n(e){var t,n;return(((t=e.measured)==null?void 0:t.width)??e.width??e.initialWidth)!==void 0&&(((n=e.measured)==null?void 0:n.height)??e.height??e.initialHeight)!==void 0}function _u(){let e,t;return{promise:new Promise((i,o)=>{e=i,t=o}),resolve:e,reject:t}}function pi(e,{snapGrid:t=[0,0],snapToGrid:n=!1,transform:i,containerBounds:o}){const{x:a,y:r}=Et(e),s=ui({x:a-((o==null?void 0:o.left)??0),y:r-((o==null?void 0:o.top)??0)},i),{x:c,y:d}=n?ro(s,t):s;return{xSnapped:c,ySnapped:d,...s}}const Zr=e=>({width:e.offsetWidth,height:e.offsetHeight}),ku=e=>{var t;return((t=e==null?void 0:e.getRootNode)==null?void 0:t.call(e))||(window==null?void 0:window.document)},Eu=["INPUT","SELECT","TEXTAREA"];function Su(e){var i,o;const t=((o=(i=e.composedPath)==null?void 0:i.call(e))==null?void 0:o[0])||e.target;return(t==null?void 0:t.nodeType)!==1?!1:Eu.includes(t.nodeName)||t.hasAttribute("contenteditable")||!!t.closest(".nokey")}const Gr=e=>"clientX"in e,Et=(e,t)=>{var a,r;const n=Gr(e),i=n?e.clientX:(a=e.touches)==null?void 0:a[0].clientX,o=n?e.clientY:(r=e.touches)==null?void 0:r[0].clientY;return{x:i-((t==null?void 0:t.left)??0),y:o-((t==null?void 0:t.top)??0)}},Zo=(e,t,n,i,o)=>{const a=t.querySelectorAll(`.${e}`);return!a||!a.length?null:Array.from(a).map(r=>{const s=r.getBoundingClientRect();return{id:r.getAttribute("data-handleid"),type:e,nodeId:o,position:r.getAttribute("data-handlepos"),x:(s.left-n.left)/i,y:(s.top-n.top)/i,...Zr(r)}})};function Cu({sourceX:e,sourceY:t,targetX:n,targetY:i,sourceControlX:o,sourceControlY:a,targetControlX:r,targetControlY:s}){const c=e*.125+o*.375+r*.375+n*.125,d=t*.125+a*.375+s*.375+i*.125,u=Math.abs(c-e),m=Math.abs(d-t);return[c,d,u,m]}function An(e,t){return e>=0?.5*e:t*25*Math.sqrt(-e)}function Go({pos:e,x1:t,y1:n,x2:i,y2:o,c:a}){switch(e){case re.Left:return[t-An(t-i,a),n];case re.Right:return[t+An(i-t,a),n];case re.Top:return[t,n-An(n-o,a)];case re.Bottom:return[t,n+An(o-n,a)]}}function Ur({sourceX:e,sourceY:t,sourcePosition:n=re.Bottom,targetX:i,targetY:o,targetPosition:a=re.Top,curvature:r=.25}){const[s,c]=Go({pos:n,x1:e,y1:t,x2:i,y2:o,c:r}),[d,u]=Go({pos:a,x1:i,y1:o,x2:e,y2:t,c:r}),[m,f,g,k]=Cu({sourceX:e,sourceY:t,targetX:i,targetY:o,sourceControlX:s,sourceControlY:c,targetControlX:d,targetControlY:u});return[`M${e},${t} C${s},${c} ${d},${u} ${i},${o}`,m,f,g,k]}function $r({sourceX:e,sourceY:t,targetX:n,targetY:i}){const o=Math.abs(n-e)/2,a=n<e?n+o:n-o,r=Math.abs(i-t)/2,s=i<t?i+r:i-r;return[a,s,o,r]}function Mu({sourceNode:e,targetNode:t,selected:n=!1,zIndex:i=0,elevateOnSelect:o=!1}){if(!o)return i;const a=n||t.selected||e.selected,r=Math.max(e.internals.z||0,t.internals.z||0,1e3);return i+(a?r:0)}function zu({sourceNode:e,targetNode:t,width:n,height:i,transform:o}){const a=no(Li(e),Li(t));a.x===a.x2&&(a.x2+=1),a.y===a.y2&&(a.y2+=1);const r={x:-o[0]/o[2],y:-o[1]/o[2],width:n/o[2],height:i/o[2]};return oo(r,io(a))>0}const Pu=({source:e,sourceHandle:t,target:n,targetHandle:i})=>`xy-edge__${e}${t||""}-${n}${i||""}`,Nu=(e,t)=>t.some(n=>n.source===e.source&&n.target===e.target&&(n.sourceHandle===e.sourceHandle||!n.sourceHandle&&!e.sourceHandle)&&(n.targetHandle===e.targetHandle||!n.targetHandle&&!e.targetHandle)),Tu=(e,t)=>{if(!e.source||!e.target)return t;let n;return gu(e)?n={...e}:n={...e,id:Pu(e)},Nu(n,t)?t:(n.sourceHandle===null&&delete n.sourceHandle,n.targetHandle===null&&delete n.targetHandle,t.concat(n))};function Wi({sourceX:e,sourceY:t,targetX:n,targetY:i}){const[o,a,r,s]=$r({sourceX:e,sourceY:t,targetX:n,targetY:i});return[`M ${e},${t}L ${n},${i}`,o,a,r,s]}const Uo={[re.Left]:{x:-1,y:0},[re.Right]:{x:1,y:0},[re.Top]:{x:0,y:-1},[re.Bottom]:{x:0,y:1}},Au=({source:e,sourcePosition:t=re.Bottom,target:n})=>t===re.Left||t===re.Right?e.x<n.x?{x:1,y:0}:{x:-1,y:0}:e.y<n.y?{x:0,y:1}:{x:0,y:-1},$o=(e,t)=>Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2));function Hu({source:e,sourcePosition:t=re.Bottom,target:n,targetPosition:i=re.Top,center:o,offset:a}){const r=Uo[t],s=Uo[i],c={x:e.x+r.x*a,y:e.y+r.y*a},d={x:n.x+s.x*a,y:n.y+s.y*a},u=Au({source:c,sourcePosition:t,target:d}),m=u.x!==0?"x":"y",f=u[m];let g=[],k,S;const E={x:0,y:0},_={x:0,y:0},[w,y,x,P]=$r({sourceX:e.x,sourceY:e.y,targetX:n.x,targetY:n.y});if(r[m]*s[m]===-1){k=o.x??w,S=o.y??y;const N=[{x:k,y:c.y},{x:k,y:d.y}],V=[{x:c.x,y:S},{x:d.x,y:S}];r[m]===f?g=m==="x"?N:V:g=m==="x"?V:N}else{const N=[{x:c.x,y:d.y}],V=[{x:d.x,y:c.y}];if(m==="x"?g=r.x===f?V:N:g=r.y===f?N:V,t===i){const I=Math.abs(e[m]-n[m]);if(I<=a){const v=Math.min(a-1,a-I);r[m]===f?E[m]=(c[m]>e[m]?-1:1)*v:_[m]=(d[m]>n[m]?-1:1)*v}}if(t!==i){const I=m==="x"?"y":"x",v=r[m]===s[I],b=c[I]>d[I],p=c[I]<d[I];(r[m]===1&&(!v&&b||v&&p)||r[m]!==1&&(!v&&p||v&&b))&&(g=m==="x"?N:V)}const W={x:c.x+E.x,y:c.y+E.y},R={x:d.x+_.x,y:d.y+_.y},Y=Math.max(Math.abs(W.x-g[0].x),Math.abs(R.x-g[0].x)),H=Math.max(Math.abs(W.y-g[0].y),Math.abs(R.y-g[0].y));Y>=H?(k=(W.x+R.x)/2,S=g[0].y):(k=g[0].x,S=(W.y+R.y)/2)}return[[e,{x:c.x+E.x,y:c.y+E.y},...g,{x:d.x+_.x,y:d.y+_.y},n],k,S,x,P]}function Du(e,t,n,i){const o=Math.min($o(e,t)/2,$o(t,n)/2,i),{x:a,y:r}=t;if(e.x===a&&a===n.x||e.y===r&&r===n.y)return`L${a} ${r}`;if(e.y===r){const d=e.x<n.x?-1:1,u=e.y<n.y?1:-1;return`L ${a+o*d},${r}Q ${a},${r} ${a},${r+o*u}`}const s=e.x<n.x?1:-1,c=e.y<n.y?-1:1;return`L ${a},${r+o*c}Q ${a},${r} ${a+o*s},${r}`}function Jn({sourceX:e,sourceY:t,sourcePosition:n=re.Bottom,targetX:i,targetY:o,targetPosition:a=re.Top,borderRadius:r=5,centerX:s,centerY:c,offset:d=20}){const[u,m,f,g,k]=Hu({source:{x:e,y:t},sourcePosition:n,target:{x:i,y:o},targetPosition:a,center:{x:s,y:c},offset:d});return[u.reduce((E,_,w)=>{let y="";return w>0&&w<u.length-1?y=Du(u[w-1],_,u[w+1],r):y=`${w===0?"M":"L"}${_.x} ${_.y}`,E+=y,E},""),m,f,g,k]}function Jo(e){var t;return e&&!!(e.internals.handleBounds||(t=e.handles)!=null&&t.length)&&!!(e.measured.width||e.width||e.initialWidth)}function Iu(e){var m;const{sourceNode:t,targetNode:n}=e;if(!Jo(t)||!Jo(n))return null;const i=t.internals.handleBounds||Qo(t.handles),o=n.internals.handleBounds||Qo(n.handles),a=jo((i==null?void 0:i.source)??[],e.sourceHandle),r=jo(e.connectionMode===Rt.Strict?(o==null?void 0:o.target)??[]:((o==null?void 0:o.target)??[]).concat((o==null?void 0:o.source)??[]),e.targetHandle);if(!a||!r)return(m=e.onError)==null||m.call(e,"008",Qt.error008(a?"target":"source",{id:e.id,sourceHandle:e.sourceHandle,targetHandle:e.targetHandle})),null;const s=(a==null?void 0:a.position)||re.Bottom,c=(r==null?void 0:r.position)||re.Top,d=hn(t,a,s),u=hn(n,r,c);return{sourceX:d.x,sourceY:d.y,targetX:u.x,targetY:u.y,sourcePosition:s,targetPosition:c}}function Qo(e){if(!e)return null;const t=[],n=[];for(const i of e)i.width=i.width??1,i.height=i.height??1,i.type==="source"?t.push(i):i.type==="target"&&n.push(i);return{source:t,target:n}}function hn(e,t,n=re.Left,i=!1){const o=((t==null?void 0:t.x)??0)+e.internals.positionAbsolute.x,a=((t==null?void 0:t.y)??0)+e.internals.positionAbsolute.y,{width:r,height:s}=t??Ct(e);if(i)return{x:o+r/2,y:a+s/2};switch((t==null?void 0:t.position)??n){case re.Top:return{x:o+r/2,y:a};case re.Right:return{x:o+r,y:a+s/2};case re.Bottom:return{x:o+r/2,y:a+s};case re.Left:return{x:o,y:a+s/2}}}function jo(e,t){return e&&(t?e.find(n=>n.id===t):e[0])||null}function Ki(e,t){return e?typeof e=="string"?e:`${t?`${t}__`:""}${Object.keys(e).sort().map(i=>`${i}=${e[i]}`).join("&")}`:""}function Ou(e,{id:t,defaultColor:n,defaultMarkerStart:i,defaultMarkerEnd:o}){const a=new Set;return e.reduce((r,s)=>([s.markerStart||i,s.markerEnd||o].forEach(c=>{if(c&&typeof c=="object"){const d=Ki(c,t);a.has(d)||(r.push({id:d,color:c.color||n,...c}),a.add(d))}}),r),[]).sort((r,s)=>r.id.localeCompare(s.id))}const so={nodeOrigin:[0,0],nodeExtent:Zn,elevateNodesOnSelect:!0,defaults:{}},Ru={...so,checkEquality:!0};function ao(e,t){const n={...e};for(const i in t)t[i]!==void 0&&(n[i]=t[i]);return n}function Vu(e,t,n){const i=ao(so,n);for(const o of e.values())if(o.parentId)lo(o,e,t,i);else{const a=wn(o,i.nodeOrigin),r=en(o.extent)?o.extent:i.nodeExtent,s=Vt(a,r,Ct(o));o.internals.positionAbsolute=s}}function Jr(e,t,n,i){var c,d;const o=ao(Ru,i);let a=e.length>0;const r=new Map(t),s=o!=null&&o.elevateNodesOnSelect?1e3:0;t.clear(),n.clear();for(const u of e){let m=r.get(u.id);if(o.checkEquality&&u===(m==null?void 0:m.internals.userNode))t.set(u.id,m);else{const f=wn(u,o.nodeOrigin),g=en(u.extent)?u.extent:o.nodeExtent,k=Vt(f,g,Ct(u));m={...o.defaults,...u,measured:{width:(c=u.measured)==null?void 0:c.width,height:(d=u.measured)==null?void 0:d.height},internals:{positionAbsolute:k,handleBounds:u.measured?m==null?void 0:m.internals.handleBounds:void 0,z:Qr(u,s),userNode:u}},t.set(u.id,m)}(m.measured===void 0||m.measured.width===void 0||m.measured.height===void 0)&&!m.hidden&&(a=!1),u.parentId&&lo(m,t,n,i)}return a}function Xu(e,t){if(!e.parentId)return;const n=t.get(e.parentId);n?n.set(e.id,e):t.set(e.parentId,new Map([[e.id,e]]))}function lo(e,t,n,i){const{elevateNodesOnSelect:o,nodeOrigin:a,nodeExtent:r}=ao(so,i),s=e.parentId,c=t.get(s);if(!c){console.warn(`Parent node ${s} not found. Please make sure that parent nodes are in front of their child nodes in the nodes array.`);return}Xu(e,n);const d=o?1e3:0,{x:u,y:m,z:f}=Yu(e,c,a,r,d),{positionAbsolute:g}=e.internals,k=u!==g.x||m!==g.y;(k||f!==e.internals.z)&&t.set(e.id,{...e,internals:{...e.internals,positionAbsolute:k?{x:u,y:m}:g,z:f}})}function Qr(e,t){return(Zt(e.zIndex)?e.zIndex:0)+(e.selected?t:0)}function Yu(e,t,n,i,o){const{x:a,y:r}=t.internals.positionAbsolute,s=Ct(e),c=wn(e,n),d=en(e.extent)?Vt(c,e.extent,s):c;let u=Vt({x:a+d.x,y:r+d.y},i,s);e.extent==="parent"&&(u=Wr(u,s,t));const m=Qr(e,o),f=t.internals.z??0;return{x:u.x,y:u.y,z:f>m?f:m}}function Lu(e,t,n,i=[0,0]){var r;const o=[],a=new Map;for(const s of e){const c=t.get(s.parentId);if(!c)continue;const d=((r=a.get(s.parentId))==null?void 0:r.expandedRect)??ci(c),u=Fr(d,s.rect);a.set(s.parentId,{expandedRect:u,parent:c})}return a.size>0&&a.forEach(({expandedRect:s,parent:c},d)=>{var y;const u=c.internals.positionAbsolute,m=Ct(c),f=c.origin??i,g=s.x<u.x?Math.round(Math.abs(u.x-s.x)):0,k=s.y<u.y?Math.round(Math.abs(u.y-s.y)):0,S=Math.max(m.width,Math.round(s.width)),E=Math.max(m.height,Math.round(s.height)),_=(S-m.width)*f[0],w=(E-m.height)*f[1];(g>0||k>0||_||w)&&(o.push({id:d,type:"position",position:{x:c.position.x-g+_,y:c.position.y-k+w}}),(y=n.get(d))==null||y.forEach(x=>{e.some(P=>P.id===x.id)||o.push({id:x.id,type:"position",position:{x:x.position.x+g,y:x.position.y+k}})})),(m.width<s.width||m.height<s.height||g||k)&&o.push({id:d,type:"dimensions",setAttributes:!0,dimensions:{width:S+(g?f[0]*g-_:0),height:E+(k?f[1]*k-w:0)}})}),o}function Bu(e,t,n,i,o,a){const r=i==null?void 0:i.querySelector(".xyflow__viewport");let s=!1;if(!r)return{changes:[],updatedInternals:s};const c=[],d=window.getComputedStyle(r),{m22:u}=new window.DOMMatrixReadOnly(d.transform),m=[];for(const f of e.values()){const g=t.get(f.id);if(!g)continue;if(g.hidden){t.set(g.id,{...g,internals:{...g.internals,handleBounds:void 0}}),s=!0;continue}const k=Zr(f.nodeElement),S=g.measured.width!==k.width||g.measured.height!==k.height;if(!!(k.width&&k.height&&(S||!g.internals.handleBounds||f.force))){const _=f.nodeElement.getBoundingClientRect(),w=en(g.extent)?g.extent:a;let{positionAbsolute:y}=g.internals;g.parentId&&g.extent==="parent"?y=Wr(y,k,t.get(g.parentId)):w&&(y=Vt(y,w,k));const x={...g,measured:k,internals:{...g.internals,positionAbsolute:y,handleBounds:{source:Zo("source",f.nodeElement,_,u,g.id),target:Zo("target",f.nodeElement,_,u,g.id)}}};t.set(g.id,x),g.parentId&&lo(x,t,n,{nodeOrigin:o}),s=!0,S&&(c.push({id:g.id,type:"dimensions",dimensions:k}),g.expandParent&&g.parentId&&m.push({id:g.id,parentId:g.parentId,rect:ci(x,o)}))}}if(m.length>0){const f=Lu(m,t,n,o);c.push(...f)}return{changes:c,updatedInternals:s}}async function Wu({delta:e,panZoom:t,transform:n,translateExtent:i,width:o,height:a}){if(!t||!e.x&&!e.y)return Promise.resolve(!1);const r=await t.setViewportConstrained({x:n[0]+e.x,y:n[1]+e.y,zoom:n[2]},[[0,0],[o,a]],i),s=!!r&&(r.x!==n[0]||r.y!==n[1]||r.k!==n[2]);return Promise.resolve(s)}function er(e,t,n,i,o,a){let r=o;const s=i.get(r)||new Map;i.set(r,s.set(n,t)),r=`${o}-${e}`;const c=i.get(r)||new Map;if(i.set(r,c.set(n,t)),a){r=`${o}-${e}-${a}`;const d=i.get(r)||new Map;i.set(r,d.set(n,t))}}function jr(e,t,n){e.clear(),t.clear();for(const i of n){const{source:o,target:a,sourceHandle:r=null,targetHandle:s=null}=i,c={edgeId:i.id,source:o,target:a,sourceHandle:r,targetHandle:s},d=`${o}-${r}--${a}-${s}`,u=`${a}-${s}--${o}-${r}`;er("source",c,u,e,o,r),er("target",c,d,e,a,s),t.set(i.id,i)}}function es(e,t){if(!e.parentId)return!1;const n=t.get(e.parentId);return n?n.selected?!0:es(n,t):!1}function tr(e,t,n){var o;let i=e;do{if((o=i==null?void 0:i.matches)!=null&&o.call(i,t))return!0;if(i===n)return!1;i=i==null?void 0:i.parentElement}while(i);return!1}function Ku(e,t,n,i){const o=new Map;for(const[a,r]of e)if((r.selected||r.id===i)&&(!r.parentId||!es(r,e))&&(r.draggable||t&&typeof r.draggable>"u")){const s=e.get(a);s&&o.set(a,{id:a,position:s.position||{x:0,y:0},distance:{x:n.x-s.internals.positionAbsolute.x,y:n.y-s.internals.positionAbsolute.y},extent:s.extent,parentId:s.parentId,origin:s.origin,expandParent:s.expandParent,internals:{positionAbsolute:s.internals.positionAbsolute||{x:0,y:0}},measured:{width:s.measured.width??0,height:s.measured.height??0}})}return o}function bi({nodeId:e,dragItems:t,nodeLookup:n,dragging:i=!0}){var r,s,c;const o=[];for(const[d,u]of t){const m=(r=n.get(d))==null?void 0:r.internals.userNode;m&&o.push({...m,position:u.position,dragging:i})}if(!e)return[o[0],o];const a=(s=n.get(e))==null?void 0:s.internals.userNode;return[a?{...a,position:((c=t.get(e))==null?void 0:c.position)||a.position,dragging:i}:o[0],o]}function Fu({onNodeMouseDown:e,getStoreItems:t,onDragStart:n,onDrag:i,onDragStop:o}){let a={x:null,y:null},r=0,s=new Map,c=!1,d={x:0,y:0},u=null,m=!1,f=null,g=!1;function k({noDragClassName:E,handleSelector:_,domNode:w,isSelectable:y,nodeId:x,nodeClickDistance:P=0}){f=lt(w);function D({x:R,y:Y},H){const{nodeLookup:I,nodeExtent:v,snapGrid:b,snapToGrid:p,nodeOrigin:M,onNodeDrag:z,onSelectionDrag:A,onError:O,updateNodePositions:L}=t();a={x:R,y:Y};let K=!1,J={x:0,y:0,x2:0,y2:0};if(s.size>1&&v){const Z=xn(s);J=Yi(Z)}for(const[Z,Q]of s){if(!I.has(Z))continue;let ie={x:R-Q.distance.x,y:Y-Q.distance.y};p&&(ie=ro(ie,b));let oe=[[v[0][0],v[0][1]],[v[1][0],v[1][1]]];if(s.size>1&&v&&!Q.extent){const{positionAbsolute:ke}=Q.internals,xe=ke.x-J.x+v[0][0],G=ke.x+Q.measured.width-J.x2+v[1][0],te=ke.y-J.y+v[0][1],ye=ke.y+Q.measured.height-J.y2+v[1][1];oe=[[xe,te],[G,ye]]}const{position:le,positionAbsolute:pe}=vu({nodeId:Z,nextPosition:ie,nodeLookup:I,nodeExtent:oe,nodeOrigin:M,onError:O});K=K||Q.position.x!==le.x||Q.position.y!==le.y,Q.position=le,Q.internals.positionAbsolute=pe}if(K&&(L(s,!0),H&&(i||z||!x&&A))){const[Z,Q]=bi({nodeId:x,dragItems:s,nodeLookup:I});i==null||i(H,s,Z,Q),z==null||z(H,Z,Q),x||A==null||A(H,Q)}}async function N(){if(!u)return;const{transform:R,panBy:Y,autoPanSpeed:H,autoPanOnNodeDrag:I}=t();if(!I){c=!1,cancelAnimationFrame(r);return}const[v,b]=Kr(d,u,H);(v!==0||b!==0)&&(a.x=(a.x??0)-v/R[2],a.y=(a.y??0)-b/R[2],await Y({x:v,y:b})&&D(a,null)),r=requestAnimationFrame(N)}function V(R){var K;const{nodeLookup:Y,multiSelectionActive:H,nodesDraggable:I,transform:v,snapGrid:b,snapToGrid:p,selectNodesOnDrag:M,onNodeDragStart:z,onSelectionDragStart:A,unselectNodesAndEdges:O}=t();m=!0,(!M||!y)&&!H&&x&&((K=Y.get(x))!=null&&K.selected||O()),y&&M&&x&&(e==null||e(x));const L=pi(R.sourceEvent,{transform:v,snapGrid:b,snapToGrid:p,containerBounds:u});if(a=L,s=Ku(Y,I,L,x),s.size>0&&(n||z||!x&&A)){const[J,Z]=bi({nodeId:x,dragItems:s,nodeLookup:Y});n==null||n(R.sourceEvent,s,J,Z),z==null||z(R.sourceEvent,J,Z),x||A==null||A(R.sourceEvent,Z)}}const W=kl().clickDistance(P).on("start",R=>{const{domNode:Y,nodeDragThreshold:H,transform:I,snapGrid:v,snapToGrid:b}=t();u=(Y==null?void 0:Y.getBoundingClientRect())||null,g=!1,H===0&&V(R),a=pi(R.sourceEvent,{transform:I,snapGrid:v,snapToGrid:b,containerBounds:u}),d=Et(R.sourceEvent,u)}).on("drag",R=>{const{autoPanOnNodeDrag:Y,transform:H,snapGrid:I,snapToGrid:v,nodeDragThreshold:b,nodeLookup:p}=t(),M=pi(R.sourceEvent,{transform:H,snapGrid:I,snapToGrid:v,containerBounds:u});if((R.sourceEvent.type==="touchmove"&&R.sourceEvent.touches.length>1||x&&!p.has(x))&&(g=!0),!g){if(!c&&Y&&m&&(c=!0,N()),!m){const z=M.xSnapped-(a.x??0),A=M.ySnapped-(a.y??0);Math.sqrt(z*z+A*A)>b&&V(R)}(a.x!==M.xSnapped||a.y!==M.ySnapped)&&s&&m&&(d=Et(R.sourceEvent,u),D(M,R.sourceEvent))}}).on("end",R=>{if(!(!m||g)&&(c=!1,m=!1,cancelAnimationFrame(r),s.size>0)){const{nodeLookup:Y,updateNodePositions:H,onNodeDragStop:I,onSelectionDragStop:v}=t();if(H(s,!1),o||I||!x&&v){const[b,p]=bi({nodeId:x,dragItems:s,nodeLookup:Y,dragging:!1});o==null||o(R.sourceEvent,s,b,p),I==null||I(R.sourceEvent,b,p),x||v==null||v(R.sourceEvent,p)}}}).filter(R=>{const Y=R.target;return!R.button&&(!E||!tr(Y,`.${E}`,w))&&(!_||tr(Y,_,w))});f.call(W)}function S(){f==null||f.on(".drag",null)}return{update:k,destroy:S}}function qu(e,t,n){const i=[],o={x:e.x-n,y:e.y-n,width:n*2,height:n*2};for(const a of t.values())oo(o,ci(a))>0&&i.push(a);return i}const Zu=250;function Gu(e,t,n,i){var s,c;let o=[],a=1/0;const r=qu(e,n,t+Zu);for(const d of r){const u=[...((s=d.internals.handleBounds)==null?void 0:s.source)??[],...((c=d.internals.handleBounds)==null?void 0:c.target)??[]];for(const m of u){if(i.nodeId===m.nodeId&&i.type===m.type&&i.id===m.id)continue;const{x:f,y:g}=hn(d,m,m.position,!0),k=Math.sqrt(Math.pow(f-e.x,2)+Math.pow(g-e.y,2));k>t||(k<a?(o=[{...m,x:f,y:g}],a=k):k===a&&o.push({...m,x:f,y:g}))}}if(!o.length)return null;if(o.length>1){const d=i.type==="source"?"target":"source";return o.find(u=>u.type===d)??o[0]}return o[0]}function ts(e,t,n,i,o,a=!1){var d,u,m;const r=i.get(e);if(!r)return null;const s=o==="strict"?(d=r.internals.handleBounds)==null?void 0:d[t]:[...((u=r.internals.handleBounds)==null?void 0:u.source)??[],...((m=r.internals.handleBounds)==null?void 0:m.target)??[]],c=(n?s==null?void 0:s.find(f=>f.id===n):s==null?void 0:s[0])??null;return c&&a?{...c,...hn(r,c,c.position,!0)}:c}function ns(e,t){return e||(t!=null&&t.classList.contains("target")?"target":t!=null&&t.classList.contains("source")?"source":null)}function Uu(e,t){let n=null;return t?n=!0:e&&!t&&(n=!1),n}const is=()=>!0;function $u(e,{connectionMode:t,connectionRadius:n,handleId:i,nodeId:o,edgeUpdaterType:a,isTarget:r,domNode:s,nodeLookup:c,lib:d,autoPanOnConnect:u,flowId:m,panBy:f,cancelConnection:g,onConnectStart:k,onConnect:S,onConnectEnd:E,isValidConnection:_=is,onReconnectEnd:w,updateConnection:y,getTransform:x,getFromHandle:P,autoPanSpeed:D}){const N=ku(e.target);let V=0,W;const{x:R,y:Y}=Et(e),H=N==null?void 0:N.elementFromPoint(R,Y),I=ns(a,H),v=s==null?void 0:s.getBoundingClientRect();if(!v||!I)return;const b=ts(o,I,i,c,t);if(!b)return;let p=Et(e,v),M=!1,z=null,A=!1,O=null;function L(){if(!u||!v)return;const[pe,ke]=Kr(p,v,D);f({x:pe,y:ke}),V=requestAnimationFrame(L)}const K={...b,nodeId:o,type:I,position:b.position},J=c.get(o),Q={inProgress:!0,isValid:null,from:hn(J,K,re.Left,!0),fromHandle:K,fromPosition:K.position,fromNode:J,to:p,toHandle:null,toPosition:Wo[K.position],toNode:null};y(Q);let ie=Q;k==null||k(e,{nodeId:o,handleId:i,handleType:I});function oe(pe){if(!P()||!K){le(pe);return}const ke=x();p=Et(pe,v),W=Gu(ui(p,ke,!1,[1,1]),n,c,K),M||(L(),M=!0);const xe=os(pe,{handle:W,connectionMode:t,fromNodeId:o,fromHandleId:i,fromType:r?"target":"source",isValidConnection:_,doc:N,lib:d,flowId:m,nodeLookup:c});O=xe.handleDomNode,z=xe.connection,A=Uu(!!W,xe.isValid);const G={...ie,isValid:A,to:W&&A?Bi({x:W.x,y:W.y},ke):p,toHandle:xe.toHandle,toPosition:A&&xe.toHandle?xe.toHandle.position:Wo[K.position],toNode:xe.toHandle?c.get(xe.toHandle.nodeId):null};A&&W&&ie.toHandle&&G.toHandle&&ie.toHandle.type===G.toHandle.type&&ie.toHandle.nodeId===G.toHandle.nodeId&&ie.toHandle.id===G.toHandle.id&&ie.to.x===G.to.x&&ie.to.y===G.to.y||(y(G),ie=G)}function le(pe){(W||O)&&z&&A&&(S==null||S(z));const{inProgress:ke,...xe}=ie,G={...xe,toPosition:ie.toHandle?ie.toPosition:null};E==null||E(pe,G),a&&(w==null||w(pe,G)),g(),cancelAnimationFrame(V),M=!1,A=!1,z=null,O=null,N.removeEventListener("mousemove",oe),N.removeEventListener("mouseup",le),N.removeEventListener("touchmove",oe),N.removeEventListener("touchend",le)}N.addEventListener("mousemove",oe),N.addEventListener("mouseup",le),N.addEventListener("touchmove",oe),N.addEventListener("touchend",le)}function os(e,{handle:t,connectionMode:n,fromNodeId:i,fromHandleId:o,fromType:a,doc:r,lib:s,flowId:c,isValidConnection:d=is,nodeLookup:u}){const m=a==="target",f=t?r.querySelector(`.${s}-flow__handle[data-id="${c}-${t==null?void 0:t.nodeId}-${t==null?void 0:t.id}-${t==null?void 0:t.type}"]`):null,{x:g,y:k}=Et(e),S=r.elementFromPoint(g,k),E=S!=null&&S.classList.contains(`${s}-flow__handle`)?S:f,_={handleDomNode:E,isValid:!1,connection:null,toHandle:null};if(E){const w=ns(void 0,E),y=E.getAttribute("data-nodeid"),x=E.getAttribute("data-handleid"),P=E.classList.contains("connectable"),D=E.classList.contains("connectableend");if(!y||!w)return _;const N={source:m?y:i,sourceHandle:m?x:o,target:m?i:y,targetHandle:m?o:x};_.connection=N;const W=P&&D&&(n===Rt.Strict?m&&w==="source"||!m&&w==="target":y!==i||x!==o);_.isValid=W&&d(N),_.toHandle=ts(y,w,x,u,n,!1)}return _}const Ju={onPointerDown:$u,isValid:os};function Qu({domNode:e,panZoom:t,getTransform:n,getViewScale:i}){const o=lt(e);function a({translateExtent:s,width:c,height:d,zoomStep:u=10,pannable:m=!0,zoomable:f=!0,inversePan:g=!1}){const k=y=>{const x=n();if(y.sourceEvent.type!=="wheel"||!t)return;const P=-y.sourceEvent.deltaY*(y.sourceEvent.deltaMode===1?.05:y.sourceEvent.deltaMode?1:.002)*u,D=x[2]*Math.pow(2,P);t.scaleTo(D)};let S=[0,0];const E=y=>{(y.sourceEvent.type==="mousedown"||y.sourceEvent.type==="touchstart")&&(S=[y.sourceEvent.clientX??y.sourceEvent.touches[0].clientX,y.sourceEvent.clientY??y.sourceEvent.touches[0].clientY])},_=y=>{const x=n();if(y.sourceEvent.type!=="mousemove"&&y.sourceEvent.type!=="touchmove"||!t)return;const P=[y.sourceEvent.clientX??y.sourceEvent.touches[0].clientX,y.sourceEvent.clientY??y.sourceEvent.touches[0].clientY],D=[P[0]-S[0],P[1]-S[1]];S=P;const N=i()*Math.max(x[2],Math.log(x[2]))*(g?-1:1),V={x:x[0]-D[0]*N,y:x[1]-D[1]*N},W=[[0,0],[c,d]];t.setViewportConstrained({x:V.x,y:V.y,zoom:x[2]},W,s)},w=Yr().on("start",E).on("zoom",m?_:null).on("zoom.wheel",f?k:null);o.call(w,{})}function r(){o.on("zoom",null)}return{update:a,destroy:r,pointer:ft}}const ju=(e,t)=>e.x!==t.x||e.y!==t.y||e.zoom!==t.k,di=e=>({x:e.x,y:e.y,zoom:e.k}),_i=({x:e,y:t,zoom:n})=>li.translate(e,t).scale(n),Bt=(e,t)=>e.target.closest(`.${t}`),rs=(e,t)=>t===2&&Array.isArray(e)&&e.includes(2),ki=(e,t=0,n=()=>{})=>{const i=typeof t=="number"&&t>0;return i||n(),i?e.transition().duration(t).on("end",n):e},ss=e=>{const t=e.ctrlKey&&Un()?10:1;return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*t};function ed({zoomPanValues:e,noWheelClassName:t,d3Selection:n,d3Zoom:i,panOnScrollMode:o,panOnScrollSpeed:a,zoomOnPinch:r,onPanZoomStart:s,onPanZoom:c,onPanZoomEnd:d}){return u=>{if(Bt(u,t))return!1;u.preventDefault(),u.stopImmediatePropagation();const m=n.property("__zoom").k||1;if(u.ctrlKey&&r){const E=ft(u),_=ss(u),w=m*Math.pow(2,_);i.scaleTo(n,w,E,u);return}const f=u.deltaMode===1?20:1;let g=o===kt.Vertical?0:u.deltaX*f,k=o===kt.Horizontal?0:u.deltaY*f;!Un()&&u.shiftKey&&o!==kt.Vertical&&(g=u.deltaY*f,k=0),i.translateBy(n,-(g/m)*a,-(k/m)*a,{internal:!0});const S=di(n.property("__zoom"));clearTimeout(e.panScrollTimeout),e.isPanScrolling||(e.isPanScrolling=!0,s==null||s(u,S)),e.isPanScrolling&&(c==null||c(u,S),e.panScrollTimeout=setTimeout(()=>{d==null||d(u,S),e.isPanScrolling=!1},150))}}function td({noWheelClassName:e,preventScrolling:t,d3ZoomHandler:n}){return function(i,o){const a=i.type==="wheel",r=!t&&a&&!i.ctrlKey,s=Bt(i,e);if(i.ctrlKey&&a&&s&&i.preventDefault(),r||s)return null;i.preventDefault(),n.call(this,i,o)}}function nd({zoomPanValues:e,onDraggingChange:t,onPanZoomStart:n}){return i=>{var a,r,s;if((a=i.sourceEvent)!=null&&a.internal)return;const o=di(i.transform);e.mouseButton=((r=i.sourceEvent)==null?void 0:r.button)||0,e.isZoomingOrPanning=!0,e.prevViewport=o,((s=i.sourceEvent)==null?void 0:s.type)==="mousedown"&&t(!0),n&&(n==null||n(i.sourceEvent,o))}}function id({zoomPanValues:e,panOnDrag:t,onPaneContextMenu:n,onTransformChange:i,onPanZoom:o}){return a=>{var r,s;e.usedRightMouseButton=!!(n&&rs(t,e.mouseButton??0)),(r=a.sourceEvent)!=null&&r.sync||i([a.transform.x,a.transform.y,a.transform.k]),o&&!((s=a.sourceEvent)!=null&&s.internal)&&(o==null||o(a.sourceEvent,di(a.transform)))}}function od({zoomPanValues:e,panOnDrag:t,panOnScroll:n,onDraggingChange:i,onPanZoomEnd:o,onPaneContextMenu:a}){return r=>{var s;if(!((s=r.sourceEvent)!=null&&s.internal)&&(e.isZoomingOrPanning=!1,a&&rs(t,e.mouseButton??0)&&!e.usedRightMouseButton&&r.sourceEvent&&a(r.sourceEvent),e.usedRightMouseButton=!1,i(!1),o&&ju(e.prevViewport,r.transform))){const c=di(r.transform);e.prevViewport=c,clearTimeout(e.timerId),e.timerId=setTimeout(()=>{o==null||o(r.sourceEvent,c)},n?150:0)}}}function rd({zoomActivationKeyPressed:e,zoomOnScroll:t,zoomOnPinch:n,panOnDrag:i,panOnScroll:o,zoomOnDoubleClick:a,userSelectionActive:r,noWheelClassName:s,noPanClassName:c,lib:d}){return u=>{var k;const m=e||t,f=n&&u.ctrlKey;if(u.button===1&&u.type==="mousedown"&&(Bt(u,`${d}-flow__node`)||Bt(u,`${d}-flow__edge`)))return!0;if(!i&&!m&&!o&&!a&&!n||r||Bt(u,s)&&u.type==="wheel"||Bt(u,c)&&(u.type!=="wheel"||o&&u.type==="wheel"&&!e)||!n&&u.ctrlKey&&u.type==="wheel")return!1;if(!n&&u.type==="touchstart"&&((k=u.touches)==null?void 0:k.length)>1)return u.preventDefault(),!1;if(!m&&!o&&!f&&u.type==="wheel"||!i&&(u.type==="mousedown"||u.type==="touchstart")||Array.isArray(i)&&!i.includes(u.button)&&u.type==="mousedown")return!1;const g=Array.isArray(i)&&i.includes(u.button)||!u.button||u.button<=1;return(!u.ctrlKey||u.type==="wheel")&&g}}function sd({domNode:e,minZoom:t,maxZoom:n,paneClickDistance:i,translateExtent:o,viewport:a,onPanZoom:r,onPanZoomStart:s,onPanZoomEnd:c,onDraggingChange:d}){const u={isZoomingOrPanning:!1,usedRightMouseButton:!1,prevViewport:{x:0,y:0,zoom:0},mouseButton:0,timerId:void 0,panScrollTimeout:void 0,isPanScrolling:!1},m=e.getBoundingClientRect(),f=Yr().clickDistance(!Zt(i)||i<0?0:i).scaleExtent([t,n]).translateExtent(o),g=lt(e).call(f);y({x:a.x,y:a.y,zoom:jt(a.zoom,t,n)},[[0,0],[m.width,m.height]],o);const k=g.on("wheel.zoom"),S=g.on("dblclick.zoom");f.wheelDelta(ss);function E(H,I){return g?new Promise(v=>{f==null||f.transform(ki(g,I==null?void 0:I.duration,()=>v(!0)),H)}):Promise.resolve(!1)}function _({noWheelClassName:H,noPanClassName:I,onPaneContextMenu:v,userSelectionActive:b,panOnScroll:p,panOnDrag:M,panOnScrollMode:z,panOnScrollSpeed:A,preventScrolling:O,zoomOnPinch:L,zoomOnScroll:K,zoomOnDoubleClick:J,zoomActivationKeyPressed:Z,lib:Q,onTransformChange:ie}){b&&!u.isZoomingOrPanning&&w();const le=p&&!Z&&!b?ed({zoomPanValues:u,noWheelClassName:H,d3Selection:g,d3Zoom:f,panOnScrollMode:z,panOnScrollSpeed:A,zoomOnPinch:L,onPanZoomStart:s,onPanZoom:r,onPanZoomEnd:c}):td({noWheelClassName:H,preventScrolling:O,d3ZoomHandler:k});if(g.on("wheel.zoom",le,{passive:!1}),!b){const ke=nd({zoomPanValues:u,onDraggingChange:d,onPanZoomStart:s});f.on("start",ke);const xe=id({zoomPanValues:u,panOnDrag:M,onPaneContextMenu:!!v,onPanZoom:r,onTransformChange:ie});f.on("zoom",xe);const G=od({zoomPanValues:u,panOnDrag:M,panOnScroll:p,onPaneContextMenu:v,onPanZoomEnd:c,onDraggingChange:d});f.on("end",G)}const pe=rd({zoomActivationKeyPressed:Z,panOnDrag:M,zoomOnScroll:K,panOnScroll:p,zoomOnDoubleClick:J,zoomOnPinch:L,userSelectionActive:b,noPanClassName:I,noWheelClassName:H,lib:Q});f.filter(pe),J?g.on("dblclick.zoom",S):g.on("dblclick.zoom",null)}function w(){f.on("zoom",null)}async function y(H,I,v){const b=_i(H),p=f==null?void 0:f.constrain()(b,I,v);return p&&await E(p),new Promise(M=>M(p))}async function x(H,I){const v=_i(H);return await E(v,I),new Promise(b=>b(v))}function P(H){if(g){const I=_i(H),v=g.property("__zoom");(v.k!==H.zoom||v.x!==H.x||v.y!==H.y)&&(f==null||f.transform(g,I,null,{sync:!0}))}}function D(){const H=g?Xr(g.node()):{x:0,y:0,k:1};return{x:H.x,y:H.y,zoom:H.k}}function N(H,I){return g?new Promise(v=>{f==null||f.scaleTo(ki(g,I==null?void 0:I.duration,()=>v(!0)),H)}):Promise.resolve(!1)}function V(H,I){return g?new Promise(v=>{f==null||f.scaleBy(ki(g,I==null?void 0:I.duration,()=>v(!0)),H)}):Promise.resolve(!1)}function W(H){f==null||f.scaleExtent(H)}function R(H){f==null||f.translateExtent(H)}function Y(H){const I=!Zt(H)||H<0?0:H;f==null||f.clickDistance(I)}return{update:_,destroy:w,setViewport:x,setViewportConstrained:y,getViewport:D,scaleTo:N,scaleBy:V,setScaleExtent:W,setTranslateExtent:R,syncViewport:P,setClickDistance:Y}}var nr;(function(e){e.Line="line",e.Handle="handle"})(nr||(nr={}));var ad=Te('<div role="button" tabindex="-1"><!></div>');function Qn(e,t){ce(t,!1);const n=()=>B(J,"$connectable",y),i=()=>B(le,"$connectionRadius",y),o=()=>B(ie,"$domNode",y),a=()=>B(oe,"$nodeLookup",y),r=()=>B(Q,"$connectionMode",y),s=()=>B(xe,"$lib",y),c=()=>B(Ye,"$autoPanOnConnect",y),d=()=>B(Ae,"$flowId",y),u=()=>B(ke,"$isValidConnectionStore",y),m=()=>B(te,"$onedgecreate",y),f=()=>B(Me,"$onConnectAction",y),g=()=>B(se,"$onConnectStartAction",y),k=()=>B(qe,"$onConnectEndAction",y),S=()=>B(pe,"$viewport",y),E=()=>B(ot,"$connection",y),_=()=>B(Ce,"$edges",y),w=()=>B(Le,"$connectionLookup",y),[y,x]=Ue(),P=F(),D=F(),N=F(),V=F(),W=F(),R=F(),Y=F(),H=F();let I=h(t,"id",8,void 0),v=h(t,"type",8,"source"),b=h(t,"position",24,()=>re.Top),p=h(t,"style",8,void 0),M=h(t,"isValidConnection",8,void 0),z=h(t,"onconnect",8,void 0),A=h(t,"ondisconnect",8,void 0),O=h(t,"isConnectable",8,void 0),L=h(t,"class",8,void 0);const K=Vn("svelteflow__node_id"),J=Vn("svelteflow__node_connectable"),Z=Ke(),{connectionMode:Q,domNode:ie,nodeLookup:oe,connectionRadius:le,viewport:pe,isValidConnection:ke,lib:xe,addEdge:G,onedgecreate:te,panBy:ye,cancelConnection:de,updateConnection:ve,autoPanOnConnect:Ye,edges:Ce,connectionLookup:Le,onconnect:Me,onconnectstart:se,onconnectend:qe,flowId:Ae,connection:ot}=Z;function Oe(be){const Ee=Gr(be);(Ee&&be.button===0||!Ee)&&Ju.onPointerDown(be,{handleId:l(N),nodeId:K,isTarget:l(P),connectionRadius:i(),domNode:o(),nodeLookup:a(),connectionMode:r(),lib:s(),autoPanOnConnect:c(),flowId:d(),isValidConnection:M()??u(),updateConnection:ve,cancelConnection:de,panBy:ye,onConnect:ae=>{var Qe;const Fe=m()?m()(ae):ae;Fe&&(G(Fe),(Qe=f())==null||Qe(ae))},onConnectStart:(ae,Fe)=>{var Qe;(Qe=g())==null||Qe(ae,{nodeId:Fe.nodeId,handleId:Fe.handleId,handleType:Fe.handleType})},onConnectEnd:(ae,Fe)=>{var Qe;(Qe=k())==null||Qe(ae,Fe)},getTransform:()=>[S().x,S().y,S().zoom],getFromHandle:()=>E().fromHandle})}let He=F(null),Be=F();U(()=>C(v()),()=>{X(P,v()==="target")}),U(()=>(C(O()),n()),()=>{X(D,O()!==void 0?O():n())}),U(()=>C(I()),()=>{X(N,I()||null)}),U(()=>(C(z()),C(A()),_(),w(),C(v()),C(I())),()=>{(z()||A())&&(_(),X(Be,w().get(`${K}-${v()}${I()?`-${I()}`:""}`)))}),U(()=>(l(He),l(Be),C(A()),C(z())),()=>{if(l(He)&&!hu(l(Be),l(He))){const be=l(Be)??new Map;Ko(l(He),be,A()),Ko(be,l(He),z())}X(He,l(Be)??new Map)}),U(()=>E(),()=>{X(V,!!E().fromHandle)}),U(()=>(E(),C(v()),l(N)),()=>{var be,Ee,ae;X(W,((be=E().fromHandle)==null?void 0:be.nodeId)===K&&((Ee=E().fromHandle)==null?void 0:Ee.type)===v()&&((ae=E().fromHandle)==null?void 0:ae.id)===l(N))}),U(()=>(E(),C(v()),l(N)),()=>{var be,Ee,ae;X(R,((be=E().toHandle)==null?void 0:be.nodeId)===K&&((Ee=E().toHandle)==null?void 0:Ee.type)===v()&&((ae=E().toHandle)==null?void 0:ae.id)===l(N))}),U(()=>(r(),E(),C(v()),l(N)),()=>{var be,Ee,ae;X(Y,r()===Rt.Strict?((be=E().fromHandle)==null?void 0:be.type)!==v():K!==((Ee=E().fromHandle)==null?void 0:Ee.nodeId)||l(N)!==((ae=E().fromHandle)==null?void 0:ae.id))}),U(()=>(l(R),E()),()=>{X(H,l(R)&&E().isValid)}),Je(),he();var Ze=ad();let mt;var Pe=_e(Ze);it(Pe,t,"default",{}),we(Ze),Ne((be,Ee)=>{ee(Ze,"data-handleid",l(N)),ee(Ze,"data-nodeid",K),ee(Ze,"data-handlepos",b()),ee(Ze,"data-id",`${d()??""}-${K??""}-${(I()||"")??""}-${v()??""}`),mt=wt(Ze,1,be,null,mt,Ee),rt(Ze,p())},[()=>Mt((C(ze),C(b()),C(L()),T(()=>ze(["svelte-flow__handle",`svelte-flow__handle-${b()}`,"nodrag","nopan",b(),L()])))),()=>({valid:l(H),connectingto:l(R),connectingfrom:l(W),source:!l(P),target:l(P),connectablestart:l(D),connectableend:l(D),connectable:l(D),connectionindicator:l(D)&&(!l(V)||l(Y))})]),De("mousedown",Ze,Oe),De("touchstart",Ze,Oe),$(e,Ze),ue(),x()}var ld=Te("<!> <!>",1);function Fi(e,t){const n=Xe(t,["children","$$slots","$$events","$$legacy"]);Xe(n,["data","targetPosition","sourcePosition"]),ce(t,!1);let i=h(t,"data",24,()=>({label:"Node"})),o=h(t,"targetPosition",8,void 0),a=h(t,"sourcePosition",8,void 0);he();var r=ld(),s=Ve(r);{let u=ne(()=>(C(o()),C(re),T(()=>o()??re.Top)));Qn(s,{type:"target",get position(){return l(u)}})}var c=me(s),d=me(c);{let u=ne(()=>(C(a()),C(re),T(()=>a()??re.Bottom)));Qn(d,{type:"source",get position(){return l(u)}})}Ne(()=>Tt(c,` ${C(i()),T(()=>{var u;return(u=i())==null?void 0:u.label})??""} `)),$(e,r),ue()}var cd=Te(" <!>",1);function ud(e,t){const n=Xe(t,["children","$$slots","$$events","$$legacy"]);Xe(n,["data","sourcePosition"]),ce(t,!1);let i=h(t,"data",24,()=>({label:"Node"})),o=h(t,"sourcePosition",8,void 0);he(),Zi();var a=cd(),r=Ve(a),s=me(r);{let c=ne(()=>(C(o()),C(re),T(()=>o()??re.Bottom)));Qn(s,{type:"source",get position(){return l(c)}})}Ne(()=>Tt(r,`${C(i()),T(()=>{var c;return(c=i())==null?void 0:c.label})??""} `)),$(e,a),ue()}var dd=Te(" <!>",1);function fd(e,t){const n=Xe(t,["children","$$slots","$$events","$$legacy"]);Xe(n,["data","targetPosition"]),ce(t,!1);let i=h(t,"data",24,()=>({label:"Node"})),o=h(t,"targetPosition",8,void 0);he(),Zi();var a=dd(),r=Ve(a),s=me(r);{let c=ne(()=>(C(o()),C(re),T(()=>o()??re.Top)));Qn(s,{type:"target",get position(){return l(c)}})}Ne(()=>Tt(r,`${C(i()),T(()=>{var c;return(c=i())==null?void 0:c.label})??""} `)),$(e,a),ue()}function hd(e,t){const n=Xe(t,["children","$$slots","$$events","$$legacy"]);Xe(n,[])}function ir(e,t,n){if(!t)return;const i=n?t.querySelector(n):t;i&&i.appendChild(e)}function Ei(e,{target:t,domNode:n}){return ir(e,n,t),{async update({target:i,domNode:o}){ir(e,o,i)},destroy(){e.parentNode&&e.parentNode.removeChild(e)}}}var gd=Te("<div><!></div>");function md(e,t){ce(t,!1);const n=()=>B(a,"$domNode",i),[i,o]=Ue(),{domNode:a}=Ke();he();var r=gd(),s=_e(r);it(s,t,"default",{}),we(r),tt(r,(c,d)=>Ei==null?void 0:Ei(c,d),()=>({target:".svelte-flow__edgelabel-renderer",domNode:n()})),$(e,r),ue(),o()}function as(){const{edgeLookup:e,selectionRect:t,selectionRectMode:n,multiselectionKeyPressed:i,addSelectedEdges:o,unselectNodesAndEdges:a,elementsSelectable:r}=Ke();return s=>{const c=q(e).get(s);if(!c){console.warn("012",Qt.error012(s));return}(c.selectable||q(r)&&typeof c.selectable>"u")&&(t.set(null),n.set(null),c.selected?c.selected&&q(i)&&a({nodes:[],edges:[c]}):o([s]))}}var yd=Te('<div class="svelte-flow__edge-label" role="button" tabindex="-1"><!></div>');function vd(e,t){ce(t,!1);let n=h(t,"style",8,void 0),i=h(t,"x",8,void 0),o=h(t,"y",8,void 0);const a=as(),r=Vn("svelteflow__edge_id");he(),md(e,{children:(s,c)=>{var d=yd();let u;var m=_e(d);it(m,t,"default",{}),we(d),Ne(f=>u=rt(d,"pointer-events: all;"+n(),u,f),[()=>({transform:`translate(-50%, -50%) translate(${i()??""}px,${o()??""}px)`})]),De("keyup",d,()=>{}),De("click",d,()=>{r&&a(r)}),$(s,d)},$$slots:{default:!0}}),ue()}var wd=We('<path fill="none" class="svelte-flow__edge-interaction"></path>'),xd=We('<path fill="none"></path><!><!>',1);function fi(e,t){ce(t,!1);let n=h(t,"id",8,void 0),i=h(t,"path",8),o=h(t,"label",8,void 0),a=h(t,"labelX",8,void 0),r=h(t,"labelY",8,void 0),s=h(t,"labelStyle",8,void 0),c=h(t,"markerStart",8,void 0),d=h(t,"markerEnd",8,void 0),u=h(t,"style",8,void 0),m=h(t,"interactionWidth",8,20),f=h(t,"class",8,void 0),g=m()===void 0?20:m();he();var k=xd(),S=Ve(k),E=me(S);{var _=x=>{var P=wd();ee(P,"stroke-opacity",0),Ne(()=>{ee(P,"d",i()),ee(P,"stroke-width",g)}),$(x,P)};Re(E,x=>{g&&x(_)})}var w=me(E);{var y=x=>{vd(x,{get x(){return a()},get y(){return r()},get style(){return s()},children:(P,D)=>{Zi();var N=zi();Ne(()=>Tt(N,o())),$(P,N)},$$slots:{default:!0}})};Re(w,x=>{o()&&x(y)})}Ne(x=>{ee(S,"id",n()),ee(S,"d",i()),wt(S,0,x),ee(S,"marker-start",c()),ee(S,"marker-end",d()),rt(S,u())},[()=>Mt((C(ze),C(f()),T(()=>ze(["svelte-flow__edge-path",f()]))))]),$(e,k),ue()}function qi(e,t){const n=Xe(t,["children","$$slots","$$events","$$legacy"]);Xe(n,["label","labelStyle","style","markerStart","markerEnd","interactionWidth","sourceX","sourceY","sourcePosition","targetX","targetY","targetPosition"]),ce(t,!1);const i=F(),o=F(),a=F();let r=h(t,"label",8,void 0),s=h(t,"labelStyle",8,void 0),c=h(t,"style",8,void 0),d=h(t,"markerStart",8,void 0),u=h(t,"markerEnd",8,void 0),m=h(t,"interactionWidth",8,void 0),f=h(t,"sourceX",8),g=h(t,"sourceY",8),k=h(t,"sourcePosition",8),S=h(t,"targetX",8),E=h(t,"targetY",8),_=h(t,"targetPosition",8);U(()=>(l(i),l(o),l(a),C(f()),C(g()),C(S()),C(E()),C(k()),C(_())),()=>{(w=>{var y=Nt(w,3);X(i,y[0]),X(o,y[1]),X(a,y[2])})(Ur({sourceX:f(),sourceY:g(),targetX:S(),targetY:E(),sourcePosition:k(),targetPosition:_()}))}),Je(),he(),fi(e,{get path(){return l(i)},get labelX(){return l(o)},get labelY(){return l(a)},get label(){return r()},get labelStyle(){return s()},get markerStart(){return d()},get markerEnd(){return u()},get interactionWidth(){return m()},get style(){return c()}}),ue()}function pd(e,t){const n=Xe(t,["children","$$slots","$$events","$$legacy"]);Xe(n,["label","labelStyle","style","markerStart","markerEnd","interactionWidth","sourceX","sourceY","sourcePosition","targetX","targetY","targetPosition"]),ce(t,!1);const i=F(),o=F(),a=F();let r=h(t,"label",8,void 0),s=h(t,"labelStyle",8,void 0),c=h(t,"style",8,void 0),d=h(t,"markerStart",8,void 0),u=h(t,"markerEnd",8,void 0),m=h(t,"interactionWidth",8,void 0),f=h(t,"sourceX",8),g=h(t,"sourceY",8),k=h(t,"sourcePosition",8),S=h(t,"targetX",8),E=h(t,"targetY",8),_=h(t,"targetPosition",8);U(()=>(l(i),l(o),l(a),C(f()),C(g()),C(S()),C(E()),C(k()),C(_())),()=>{(w=>{var y=Nt(w,3);X(i,y[0]),X(o,y[1]),X(a,y[2])})(Jn({sourceX:f(),sourceY:g(),targetX:S(),targetY:E(),sourcePosition:k(),targetPosition:_()}))}),Je(),he(),fi(e,{get path(){return l(i)},get labelX(){return l(o)},get labelY(){return l(a)},get label(){return r()},get labelStyle(){return s()},get markerStart(){return d()},get markerEnd(){return u()},get interactionWidth(){return m()},get style(){return c()}}),ue()}function bd(e,t){const n=Xe(t,["children","$$slots","$$events","$$legacy"]);Xe(n,["label","labelStyle","style","markerStart","markerEnd","interactionWidth","sourceX","sourceY","targetX","targetY"]),ce(t,!1);const i=F(),o=F(),a=F();let r=h(t,"label",8,void 0),s=h(t,"labelStyle",8,void 0),c=h(t,"style",8,void 0),d=h(t,"markerStart",8,void 0),u=h(t,"markerEnd",8,void 0),m=h(t,"interactionWidth",8,void 0),f=h(t,"sourceX",8),g=h(t,"sourceY",8),k=h(t,"targetX",8),S=h(t,"targetY",8);U(()=>(l(i),l(o),l(a),C(f()),C(g()),C(k()),C(S())),()=>{(E=>{var _=Nt(E,3);X(i,_[0]),X(o,_[1]),X(a,_[2])})(Wi({sourceX:f(),sourceY:g(),targetX:k(),targetY:S()}))}),Je(),he(),fi(e,{get path(){return l(i)},get labelX(){return l(o)},get labelY(){return l(a)},get label(){return r()},get labelStyle(){return s()},get markerStart(){return d()},get markerEnd(){return u()},get interactionWidth(){return m()},get style(){return c()}}),ue()}function _d(e,t){const n=Xe(t,["children","$$slots","$$events","$$legacy"]);Xe(n,["label","labelStyle","style","markerStart","markerEnd","interactionWidth","sourceX","sourceY","sourcePosition","targetX","targetY","targetPosition"]),ce(t,!1);const i=F(),o=F(),a=F();let r=h(t,"label",8,void 0),s=h(t,"labelStyle",8,void 0),c=h(t,"style",8,void 0),d=h(t,"markerStart",8,void 0),u=h(t,"markerEnd",8,void 0),m=h(t,"interactionWidth",8,void 0),f=h(t,"sourceX",8),g=h(t,"sourceY",8),k=h(t,"sourcePosition",8),S=h(t,"targetX",8),E=h(t,"targetY",8),_=h(t,"targetPosition",8);U(()=>(l(i),l(o),l(a),C(f()),C(g()),C(S()),C(E()),C(k()),C(_())),()=>{(w=>{var y=Nt(w,3);X(i,y[0]),X(o,y[1]),X(a,y[2])})(Jn({sourceX:f(),sourceY:g(),targetX:S(),targetY:E(),sourcePosition:k(),targetPosition:_(),borderRadius:0}))}),Je(),he(),fi(e,{get path(){return l(i)},get labelX(){return l(o)},get labelY(){return l(a)},get label(){return r()},get labelStyle(){return s()},get markerStart(){return d()},get markerEnd(){return u()},get interactionWidth(){return m()},get style(){return c()}}),ue()}function kd(e,t){const n=e.set,i=t.set,o=q(e),a=q(t);let s=o.length===0&&a.length>0?a:o;e.set(s);const c=d=>{const u=n(d);return s=u,i(s),u};e.set=t.set=c,e.update=t.update=d=>c(d(s))}function Ed(e,t){const n=e.set,i=t.set;let o=q(t);e.set(o);const a=r=>{n(r),i(r),o=r};e.set=t.set=a,e.update=t.update=r=>a(r(o))}const Sd=(e,t,n)=>{if(!n)return;const i=q(e),o=t.set,a=n.set;let r=n?q(n):{x:0,y:0,zoom:1};t.set(r),t.set=s=>(o(s),a(s),r=s,s),n.set=s=>(i==null||i.syncViewport(s),o(s),a(s),r=s,s),t.update=s=>{t.set(s(r))},n.update=s=>{n.set(s(r))}},Cd=(e,t,n,i=[0,0],o=Zn,a,r,s,c,d,u,m,f)=>{const{subscribe:g,set:k,update:S}=j([]);let E=e,_={},w=!0;const y=N=>{const V=Jr(N,t,n,{elevateNodesOnSelect:w,nodeOrigin:i,nodeExtent:o,defaults:_,checkEquality:!1});return q(a)&&V&&q(c)&&(yu({nodes:t,width:q(d),height:q(u),panZoom:q(c),minZoom:q(m),maxZoom:q(f)},q(r)).then(R=>{var Y;(Y=q(s))==null||Y.resolve(R),s.set(null)}),a.set(!1),r.set(void 0)),E=N,k(E),E},x=N=>y(N(E)),P=N=>{_=N},D=N=>{w=N.elevateNodesOnSelect??w};return y(E),{subscribe:g,set:y,update:x,setDefaultOptions:P,setOptions:D}},Md=(e,t,n,i)=>{const{subscribe:o,set:a,update:r}=j([]);let s=e,c={};const d=f=>{const g=c?f.map(k=>({...c,...k})):f;jr(t,n,g),s=g,a(s)},u=f=>d(f(s)),m=f=>{c=f};return d(s),{subscribe:o,set:d,update:u,setDefaultOptions:m}},ls={input:ud,output:fd,default:Fi,group:hd},cs={straight:bd,smoothstep:pd,default:qi,step:_d},zd=({nodes:e=[],edges:t=[],width:n,height:i,fitView:o,nodeOrigin:a,nodeExtent:r})=>{const s=new Map,c=new Map,d=new Map,u=new Map,m=a??[0,0],f=r??Zn;Jr(e,s,c,{nodeExtent:f,nodeOrigin:m,elevateNodesOnSelect:!1,checkEquality:!1}),jr(d,u,t);let g={x:0,y:0,zoom:1};if(o&&n&&i){const D=xn(s,{filter:N=>!!((N.width||N.initialWidth)&&(N.height||N.initialHeight))});g=qr(D,n,i,.5,2,.1)}const k=j(!1),S=j(void 0),E=j(null),_=j(null),w=j(500),y=j(500),x=j(.5),P=j(2);return{flowId:j(null),nodes:Cd(e,s,c,m,f,k,S,E,_,w,y,x,P),nodeLookup:dt(s),parentLookup:dt(c),edgeLookup:dt(u),visibleNodes:dt([]),edges:Md(t,d,u),visibleEdges:dt([]),connectionLookup:dt(d),width:w,height:y,minZoom:x,maxZoom:P,nodeOrigin:j(m),nodeDragThreshold:j(1),nodeExtent:j(f),translateExtent:j(Zn),autoPanOnNodeDrag:j(!0),autoPanOnConnect:j(!0),fitViewQueued:k,fitViewOptions:S,fitViewResolver:E,panZoom:_,snapGrid:j(null),dragging:j(!1),selectionRect:j(null),selectionKeyPressed:j(!1),multiselectionKeyPressed:j(!1),deleteKeyPressed:j(!1),panActivationKeyPressed:j(!1),zoomActivationKeyPressed:j(!1),selectionRectMode:j(null),selectionMode:j(Gn.Partial),nodeTypes:j(ls),edgeTypes:j(cs),viewport:j(g),connectionMode:j(Rt.Strict),domNode:j(null),connection:dt(Vi),connectionLineType:j(qt.Bezier),connectionRadius:j(20),isValidConnection:j(()=>!0),nodesDraggable:j(!0),nodesConnectable:j(!0),elementsSelectable:j(!0),selectNodesOnDrag:j(!0),markers:dt([]),defaultMarkerColor:j("#b1b1b7"),lib:dt("svelte"),onlyRenderVisibleElements:j(!1),onerror:j(xu),ondelete:j(void 0),onedgecreate:j(void 0),onconnect:j(void 0),onconnectstart:j(void 0),onconnectend:j(void 0),onbeforedelete:j(void 0),nodesInitialized:j(!1),edgesInitialized:j(!1),viewportInitialized:j(!1),initialized:dt(!1)}};function Pd(e){const t=Wt([e.edges,e.nodes,e.nodeLookup,e.onlyRenderVisibleElements,e.viewport,e.width,e.height],([n,,i,o,a,r,s])=>o&&r&&s?n.filter(d=>{const u=i.get(d.source),m=i.get(d.target);return u&&m&&zu({sourceNode:u,targetNode:m,width:r,height:s,transform:[a.x,a.y,a.zoom]})}):n);return Wt([t,e.nodes,e.nodeLookup,e.connectionMode,e.onerror],([n,,i,o,a])=>n.reduce((s,c)=>{const d=i.get(c.source),u=i.get(c.target);if(!d||!u)return s;const m=Iu({id:c.id,sourceNode:d,targetNode:u,sourceHandle:c.sourceHandle||null,targetHandle:c.targetHandle||null,connectionMode:o,onError:a});return m&&s.push({...c,zIndex:Mu({selected:c.selected,zIndex:c.zIndex,sourceNode:d,targetNode:u,elevateOnSelect:!1}),...m}),s},[]))}function Nd(e){return Wt([e.nodeLookup,e.onlyRenderVisibleElements,e.width,e.height,e.viewport,e.nodes],([t,n,i,o,a])=>{const r=[a.x,a.y,a.zoom];return n?Br(t,{x:0,y:0,width:i,height:o},r,!0):Array.from(t.values())})}const co=Symbol();function Td({nodes:e,edges:t,width:n,height:i,fitView:o,nodeOrigin:a,nodeExtent:r}){const s=zd({nodes:e,edges:t,width:n,height:i,fitView:o,nodeOrigin:a,nodeExtent:r});function c(b){s.nodeTypes.set({...ls,...b})}function d(b){s.edgeTypes.set({...cs,...b})}function u(b){const p=q(s.edges);s.edges.set(Tu(b,p))}const m=(b,p=!1)=>{var z;const M=q(s.nodeLookup);for(const[A,O]of b){const L=(z=M.get(A))==null?void 0:z.internals.userNode;L&&(L.position=O.position,L.dragging=p)}s.nodes.update(A=>A)};function f(b){var O,L,K;const p=q(s.nodeLookup),M=q(s.parentLookup),{changes:z,updatedInternals:A}=Bu(b,p,q(s.parentLookup),q(s.domNode),q(s.nodeOrigin));if(A){Vu(p,M,{nodeOrigin:a,nodeExtent:r});for(const J of z){const Z=(O=p.get(J.id))==null?void 0:O.internals.userNode;if(Z)switch(J.type){case"dimensions":{const Q={...Z.measured,...J.dimensions};J.setAttributes&&(Z.width=((L=J.dimensions)==null?void 0:L.width)??Z.width,Z.height=((K=J.dimensions)==null?void 0:K.height)??Z.height),Z.measured=Q;break}case"position":Z.position=J.position??Z.position;break}}s.nodes.update(J=>J),q(s.nodesInitialized)||s.nodesInitialized.set(!0)}}function g(b){const p=q(s.fitViewResolver)??_u();return s.fitViewQueued.set(!0),s.fitViewOptions.set(b),s.fitViewResolver.set(p),s.nodes.set(q(s.nodes)),p.promise}function k(b,p){const M=q(s.panZoom);return M?M.scaleBy(b,p):Promise.resolve(!1)}function S(b){return k(1.2,b)}function E(b){return k(1/1.2,b)}function _(b){const p=q(s.panZoom);p&&(p.setScaleExtent([b,q(s.maxZoom)]),s.minZoom.set(b))}function w(b){const p=q(s.panZoom);p&&(p.setScaleExtent([q(s.minZoom),b]),s.maxZoom.set(b))}function y(b){const p=q(s.panZoom);p&&(p.setTranslateExtent(b),s.translateExtent.set(b))}function x(b){let p=!1;return b.forEach(M=>{M.selected&&(M.selected=!1,p=!0)}),p}function P(b){var p;(p=q(s.panZoom))==null||p.setClickDistance(b)}function D(b){x((b==null?void 0:b.nodes)||q(s.nodes))&&s.nodes.set(q(s.nodes)),x((b==null?void 0:b.edges)||q(s.edges))&&s.edges.set(q(s.edges))}s.deleteKeyPressed.subscribe(async b=>{var p;if(b){const M=q(s.nodes),z=q(s.edges),A=M.filter(J=>J.selected),O=z.filter(J=>J.selected),{nodes:L,edges:K}=await wu({nodesToRemove:A,edgesToRemove:O,nodes:M,edges:z,onBeforeDelete:q(s.onbeforedelete)});(L.length||K.length)&&(s.nodes.update(J=>J.filter(Z=>!L.some(Q=>Q.id===Z.id))),s.edges.update(J=>J.filter(Z=>!K.some(Q=>Q.id===Z.id))),(p=q(s.ondelete))==null||p({nodes:L,edges:K}))}});function N(b){const p=q(s.multiselectionKeyPressed);s.nodes.update(M=>M.map(z=>{const A=b.includes(z.id),O=p&&z.selected||A;return z.selected=O,z})),p||s.edges.update(M=>M.map(z=>(z.selected=!1,z)))}function V(b){const p=q(s.multiselectionKeyPressed);s.edges.update(M=>M.map(z=>{const A=b.includes(z.id),O=p&&z.selected||A;return z.selected=O,z})),p||s.nodes.update(M=>M.map(z=>(z.selected=!1,z)))}function W(b){var M;const p=(M=q(s.nodes))==null?void 0:M.find(z=>z.id===b);if(!p){console.warn("012",Qt.error012(b));return}s.selectionRect.set(null),s.selectionRectMode.set(null),p.selected?p.selected&&q(s.multiselectionKeyPressed)&&D({nodes:[p],edges:[]}):N([b])}function R(b){const p=q(s.viewport);return Wu({delta:b,panZoom:q(s.panZoom),transform:[p.x,p.y,p.zoom],translateExtent:q(s.translateExtent),width:q(s.width),height:q(s.height)})}const Y=j(Vi),H=b=>{Y.set({...b})};function I(){Y.set(Vi)}function v(){s.selectionRect.set(null),s.selectionRectMode.set(null),s.snapGrid.set(null),s.isValidConnection.set(()=>!0),D(),I()}return{...s,visibleEdges:Pd(s),visibleNodes:Nd(s),connection:Wt([Y,s.viewport],([b,p])=>b.inProgress?{...b,to:ui(b.to,[p.x,p.y,p.zoom])}:{...b}),markers:Wt([s.edges,s.defaultMarkerColor,s.flowId],([b,p,M])=>Ou(b,{defaultColor:p,id:M})),initialized:(()=>{let b=!1;const p=q(s.nodes).length,M=q(s.edges).length;return Wt([s.nodesInitialized,s.edgesInitialized,s.viewportInitialized],([z,A,O])=>b||(p===0?b=O:M===0?b=O&&z:b=O&&z&&A,b))})(),syncNodeStores:b=>kd(s.nodes,b),syncEdgeStores:b=>Ed(s.edges,b),syncViewport:b=>Sd(s.panZoom,s.viewport,b),setNodeTypes:c,setEdgeTypes:d,addEdge:u,updateNodePositions:m,updateNodeInternals:f,zoomIn:S,zoomOut:E,fitView:b=>g(b),setMinZoom:_,setMaxZoom:w,setTranslateExtent:y,setPaneClickDistance:P,unselectNodesAndEdges:D,addSelectedNodes:N,addSelectedEdges:V,handleNodeSelection:W,panBy:R,updateConnection:H,cancelConnection:I,reset:v}}function Ke(){const e=Vn(co);if(!e)throw new Error("In order to use useStore you need to wrap your component in a <SvelteFlowProvider />");return e.getStore()}function Ad({nodes:e,edges:t,width:n,height:i,fitView:o,nodeOrigin:a,nodeExtent:r}){const s=Td({nodes:e,edges:t,width:n,height:i,fitView:o,nodeOrigin:a,nodeExtent:r});return Xn(co,{getStore:()=>s}),s}function Si(e,t){const{panZoom:n,minZoom:i,maxZoom:o,initialViewport:a,viewport:r,dragging:s,translateExtent:c,paneClickDistance:d}=t,u=sd({domNode:e,minZoom:i,maxZoom:o,translateExtent:c,viewport:a,paneClickDistance:d,onDraggingChange:s.set}),m=u.getViewport();return r.set(m),n.set(u),u.update(t),{update(f){u.update(f)}}}var Hd=Te('<div class="svelte-flow__zoom svelte-8vnmu8"><!></div>');function Dd(e,t){ce(t,!1);const n=()=>B(z,"$panActivationKeyPressed",d),i=()=>B(I,"$minZoom",d),o=()=>B(v,"$maxZoom",d),a=()=>B(A,"$zoomActivationKeyPressed",d),r=()=>B(H,"$selectionRect",d),s=()=>B(p,"$translateExtent",d),c=()=>B(M,"$lib",d),[d,u]=Ue(),m=F(),f=F(),g=F();let k=h(t,"initialViewport",8,void 0),S=h(t,"onMoveStart",8,void 0),E=h(t,"onMove",8,void 0),_=h(t,"onMoveEnd",8,void 0),w=h(t,"panOnScrollMode",8),y=h(t,"preventScrolling",8),x=h(t,"zoomOnScroll",8),P=h(t,"zoomOnDoubleClick",8),D=h(t,"zoomOnPinch",8),N=h(t,"panOnDrag",8),V=h(t,"panOnScroll",8),W=h(t,"paneClickDistance",8);const{viewport:R,panZoom:Y,selectionRect:H,minZoom:I,maxZoom:v,dragging:b,translateExtent:p,lib:M,panActivationKeyPressed:z,zoomActivationKeyPressed:A,viewportInitialized:O}=Ke(),L=Z=>R.set({x:Z[0],y:Z[1],zoom:Z[2]});ti(()=>{Yn(O,!0)}),U(()=>C(k()),()=>{X(m,k()||{x:0,y:0,zoom:1})}),U(()=>(n(),C(N())),()=>{X(f,n()||N())}),U(()=>(n(),C(V())),()=>{X(g,n()||V())}),Je(),he();var K=Hd(),J=_e(K);it(J,t,"default",{}),we(K),tt(K,(Z,Q)=>Si==null?void 0:Si(Z,Q),()=>({viewport:R,minZoom:i(),maxZoom:o(),initialViewport:l(m),dragging:b,panZoom:Y,onPanZoomStart:S(),onPanZoom:E(),onPanZoomEnd:_(),zoomOnScroll:x(),zoomOnDoubleClick:P(),zoomOnPinch:D(),panOnScroll:l(g),panOnDrag:l(f),panOnScrollSpeed:.5,panOnScrollMode:w()||kt.Free,zoomActivationKeyPressed:a(),preventScrolling:typeof y()=="boolean"?y():!0,noPanClassName:"nopan",noWheelClassName:"nowheel",userSelectionActive:!!r(),translateExtent:s(),lib:c(),paneClickDistance:W(),onTransformChange:L})),$(e,K),ue(),u()}function or(e,t){return n=>{n.target===t&&(e==null||e(n))}}function rr(e){return t=>{const n=e.includes(t.id);return t.selected!==n&&(t.selected=n),t}}var Id=Te("<div><!></div>");function Od(e,t){ce(t,!1);const n=()=>B(b,"$panActivationKeyPressed",g),i=()=>B(I,"$selectionKeyPressed",g),o=()=>B(Y,"$selectionRect",g),a=()=>B(R,"$elementsSelectable",g),r=()=>B(H,"$selectionRectMode",g),s=()=>B(M,"$connection",g),c=()=>B(N,"$edges",g),d=()=>B(D,"$nodeLookup",g),u=()=>B(V,"$viewport",g),m=()=>B(v,"$selectionMode",g),f=()=>B(W,"$dragging",g),[g,k]=Ue(),S=F(),E=F(),_=F();let w=h(t,"panOnDrag",8,void 0),y=h(t,"selectionOnDrag",8,void 0);const x=ni(),{nodes:P,nodeLookup:D,edges:N,viewport:V,dragging:W,elementsSelectable:R,selectionRect:Y,selectionRectMode:H,selectionKeyPressed:I,selectionMode:v,panActivationKeyPressed:b,unselectNodesAndEdges:p,connection:M}=Ke();let z=F(),A=null,O=[],L=!1;function K(G){if(L||s().inProgress){L=!1;return}x("paneclick",{event:G}),p(),H.set(null)}function J(G){var de,ve;if(A=l(z).getBoundingClientRect(),!R||!l(E)||G.button!==0||G.target!==l(z)||!A)return;(ve=(de=G.target)==null?void 0:de.setPointerCapture)==null||ve.call(de,G.pointerId);const{x:te,y:ye}=Et(G,A);p(),Y.set({width:0,height:0,startX:te,startY:ye,x:te,y:ye})}function Z(G){if(!l(E)||!A||!o())return;L=!0;const te=Et(G,A),ye=o().startX??0,de=o().startY??0,ve={...o(),x:te.x<ye?te.x:ye,y:te.y<de?te.y:de,width:Math.abs(te.x-ye),height:Math.abs(te.y-de)},Ye=O.map(se=>se.id),Ce=Xi(O,c()).map(se=>se.id);O=Br(d(),ve,[u().x,u().y,u().zoom],m()===Gn.Partial,!0);const Le=Xi(O,c()).map(se=>se.id),Me=O.map(se=>se.id);(Ye.length!==Me.length||Me.some(se=>!Ye.includes(se)))&&P.update(se=>se.map(rr(Me))),(Ce.length!==Le.length||Le.some(se=>!Ce.includes(se)))&&N.update(se=>se.map(rr(Le))),H.set("user"),Y.set(ve)}function Q(G){var te,ye;G.button===0&&((ye=(te=G.target)==null?void 0:te.releasePointerCapture)==null||ye.call(te,G.pointerId),!l(E)&&r()==="user"&&G.target===l(z)&&(K==null||K(G)),Y.set(null),O.length>0&&Yn(H,"nodes"),i()&&(L=!1))}const ie=G=>{var te;if(Array.isArray(l(S))&&((te=l(S))!=null&&te.includes(2))){G.preventDefault();return}x("panecontextmenu",{event:G})};U(()=>(n(),C(w())),()=>{X(S,n()||w())}),U(()=>(i(),o(),C(y()),l(S)),()=>{X(E,i()||o()||y()&&l(S)!==!0)}),U(()=>(a(),l(E),r()),()=>{X(_,a()&&(l(E)||r()==="user"))}),Je(),he();var oe=Id(),le=bo(()=>l(_)?void 0:or(K,l(z))),pe=bo(()=>or(ie,l(z)));let ke;var xe=_e(oe);it(xe,t,"default",{}),we(oe),Ui(oe,G=>X(z,G),()=>l(z)),Ne(G=>ke=wt(oe,1,"svelte-flow__pane svelte-3z4tl6",null,ke,G),[()=>({draggable:w()===!0||Array.isArray(w())&&w().includes(0),dragging:f(),selection:l(E)})]),De("click",oe,function(...G){var te;(te=l(le))==null||te.apply(this,G)}),De("pointerdown",oe,function(...G){var te;(te=l(_)?J:void 0)==null||te.apply(this,G)}),De("pointermove",oe,function(...G){var te;(te=l(_)?Z:void 0)==null||te.apply(this,G)}),De("pointerup",oe,function(...G){var te;(te=l(_)?Q:void 0)==null||te.apply(this,G)}),De("contextmenu",oe,function(...G){var te;(te=l(pe))==null||te.apply(this,G)}),$(e,oe),ue(),k()}var Rd=Te('<div class="svelte-flow__viewport xyflow__viewport svelte-xslwae"><!></div>');function Vd(e,t){ce(t,!1);const n=()=>B(a,"$viewport",i),[i,o]=Ue(),{viewport:a}=Ke();he();var r=Rd(),s=_e(r);it(s,t,"default",{}),we(r),Ne(()=>rt(r,`transform: translate(${n().x??""}px, ${n().y??""}px) scale(${n().zoom??""})`)),$(e,r),ue(),o()}function Gt(e,t){const{store:n,onDrag:i,onDragStart:o,onDragStop:a,onNodeMouseDown:r}=t,s=Fu({onDrag:i,onDragStart:o,onDragStop:a,onNodeMouseDown:r,getStoreItems:()=>{const d=q(n.snapGrid),u=q(n.viewport);return{nodes:q(n.nodes),nodeLookup:q(n.nodeLookup),edges:q(n.edges),nodeExtent:q(n.nodeExtent),snapGrid:d||[0,0],snapToGrid:!!d,nodeOrigin:q(n.nodeOrigin),multiSelectionActive:q(n.multiselectionKeyPressed),domNode:q(n.domNode),transform:[u.x,u.y,u.zoom],autoPanOnNodeDrag:q(n.autoPanOnNodeDrag),nodesDraggable:q(n.nodesDraggable),selectNodesOnDrag:q(n.selectNodesOnDrag),nodeDragThreshold:q(n.nodeDragThreshold),unselectNodesAndEdges:n.unselectNodesAndEdges,updateNodePositions:n.updateNodePositions,panBy:n.panBy}}});function c(d,u){if(u.disabled){s.destroy();return}s.update({domNode:d,noDragClassName:u.noDragClass,handleSelector:u.handleSelector,nodeId:u.nodeId,isSelectable:u.isSelectable,nodeClickDistance:u.nodeClickDistance})}return c(e,t),{update(d){c(e,d)},destroy(){s.destroy()}}}function Xd({width:e,height:t,initialWidth:n,initialHeight:i,measuredWidth:o,measuredHeight:a}){if(o===void 0&&a===void 0){const r=e??n,s=t??i;return{width:r?`width:${r}px;`:"",height:s?`height:${s}px;`:""}}return{width:e?`width:${e}px;`:"",height:t?`height:${t}px;`:""}}var Yd=Te("<div><!></div>");function Ld(e,t){ce(t,!1);const n=()=>B(oe,"$nodeTypes",r),i=()=>B(G,"$elementsSelectable",r),o=()=>B(te,"$nodesDraggable",r),a=()=>B(Ye,"$connectableStore",r),[r,s]=Ue(),c=F(void 0,!0),d=F(void 0,!0),u=F(void 0,!0),m=F(void 0,!0);let f=h(t,"node",9),g=h(t,"id",9),k=h(t,"data",25,()=>({})),S=h(t,"selected",9,!1),E=h(t,"draggable",9,void 0),_=h(t,"selectable",9,void 0),w=h(t,"connectable",9,!0),y=h(t,"deletable",9,!0),x=h(t,"hidden",9,!1),P=h(t,"dragging",9,!1),D=h(t,"resizeObserver",9,null),N=h(t,"style",9,void 0),V=h(t,"type",9,"default"),W=h(t,"isParent",9,!1),R=h(t,"positionX",9),Y=h(t,"positionY",9),H=h(t,"sourcePosition",9,void 0),I=h(t,"targetPosition",9,void 0),v=h(t,"zIndex",9),b=h(t,"measuredWidth",9,void 0),p=h(t,"measuredHeight",9,void 0),M=h(t,"initialWidth",9,void 0),z=h(t,"initialHeight",9,void 0),A=h(t,"width",9,void 0),O=h(t,"height",9,void 0),L=h(t,"dragHandle",9,void 0),K=h(t,"initialized",9,!1),J=h(t,"parentId",9,void 0),Z=h(t,"nodeClickDistance",9,void 0),Q=h(t,"class",9,"");const ie=Ke(),{nodeTypes:oe,nodeDragThreshold:le,selectNodesOnDrag:pe,handleNodeSelection:ke,updateNodeInternals:xe,elementsSelectable:G,nodesDraggable:te}=ie;let ye=F(void 0,!0),de=F(null,!0);const ve=ni(),Ye=j(w());let Ce=F(void 0,!0),Le=F(void 0,!0),Me=F(void 0,!0);Xn("svelteflow__node_id",g()),Xn("svelteflow__node_connectable",Ye),lr(()=>{var Oe;l(de)&&((Oe=D())==null||Oe.unobserve(l(de)))});function se(Oe){_()&&(!q(pe)||!E()||q(le)>0)&&ke(g()),ve("nodeclick",{node:f().internals.userNode,event:Oe})}U(()=>C(V()),()=>{X(c,V()||"default")}),U(()=>(n(),l(c)),()=>{X(d,!!n()[l(c)])}),U(()=>(n(),l(c),Fi),()=>{X(u,n()[l(c)]||Fi)}),U(()=>(l(d),C(V())),()=>{l(d)||console.warn("003",Qt.error003(V()))}),U(()=>(C(A()),C(O()),C(M()),C(z()),C(b()),C(p())),()=>{X(m,Xd({width:A(),height:O(),initialWidth:M(),initialHeight:z(),measuredWidth:b(),measuredHeight:p()}))}),U(()=>C(w()),()=>{Ye.set(!!w())}),U(()=>(l(Ce),l(c),l(Le),C(H()),l(Me),C(I()),C(g()),l(ye)),()=>{(l(Ce)&&l(c)!==l(Ce)||l(Le)&&H()!==l(Le)||l(Me)&&I()!==l(Me))&&requestAnimationFrame(()=>xe(new Map([[g(),{id:g(),nodeElement:l(ye),force:!0}]]))),X(Ce,l(c)),X(Le,H()),X(Me,I())}),U(()=>(C(D()),l(ye),l(de),C(K())),()=>{D()&&(l(ye)!==l(de)||!K())&&(l(de)&&D().unobserve(l(de)),l(ye)&&D().observe(l(ye)),X(de,l(ye)))}),Je(),he(!0);var qe=ct(),Ae=Ve(qe);{var ot=Oe=>{var He=Yd();let Be,Ze;var mt=_e(He);{let Pe=ne(()=>S()??!1),be=ne(()=>_()??i()??!0),Ee=ne(()=>y()??!0),ae=ne(()=>E()??o()??!0);ur(mt,()=>l(u),(Fe,Qe)=>{Qe(Fe,{get data(){return k()},get id(){return g()},get selected(){return l(Pe)},get selectable(){return l(be)},get deletable(){return l(Ee)},get sourcePosition(){return H()},get targetPosition(){return I()},get zIndex(){return v()},get dragging(){return P()},get draggable(){return l(ae)},get dragHandle(){return L()},get parentId(){return J()},get type(){return l(c)},get isConnectable(){return a()},get positionAbsoluteX(){return R()},get positionAbsoluteY(){return Y()},get width(){return A()},get height(){return O()}})})}we(He),tt(He,(Pe,be)=>Gt==null?void 0:Gt(Pe,be),()=>({nodeId:g(),isSelectable:_(),disabled:!1,handleSelector:L(),noDragClass:"nodrag",nodeClickDistance:Z(),onNodeMouseDown:ke,onDrag:(Pe,be,Ee,ae)=>{ve("nodedrag",{event:Pe,targetNode:Ee,nodes:ae})},onDragStart:(Pe,be,Ee,ae)=>{ve("nodedragstart",{event:Pe,targetNode:Ee,nodes:ae})},onDragStop:(Pe,be,Ee,ae)=>{ve("nodedragstop",{event:Pe,targetNode:Ee,nodes:ae})},store:ie})),Ui(He,Pe=>X(ye,Pe),()=>l(ye)),yt(()=>De("click",He,se)),yt(()=>De("mouseenter",He,Pe=>ve("nodemouseenter",{node:f(),event:Pe}))),yt(()=>De("mouseleave",He,Pe=>ve("nodemouseleave",{node:f(),event:Pe}))),yt(()=>De("mousemove",He,Pe=>ve("nodemousemove",{node:f(),event:Pe}))),yt(()=>De("contextmenu",He,Pe=>ve("nodecontextmenu",{node:f(),event:Pe}))),Ne((Pe,be,Ee)=>{ee(He,"data-id",g()),Be=wt(He,1,Pe,null,Be,be),Ze=rt(He,`${N()??""??""};${l(m),T(()=>l(m).width)??""}${l(m),T(()=>l(m).height)??""}`,Ze,Ee)},[()=>Mt((C(ze),l(c),C(Q()),T(()=>ze(["svelte-flow__node",`svelte-flow__node-${l(c)}`,Q()])))),()=>({dragging:P(),selected:S(),draggable:E(),connectable:w(),selectable:_(),nopan:E(),parent:W()}),()=>({"z-index":v(),transform:`translate(${R()??""}px, ${Y()??""}px)`,visibility:K()?"visible":"hidden"})]),$(Oe,He)};Re(Ae,Oe=>{x()||Oe(ot)})}$(e,qe),ue(),s()}var Bd=Te('<div class="svelte-flow__nodes svelte-1fzfwss"></div>');function Wd(e,t){ce(t,!1);const n=()=>B(u,"$visibleNodes",s),i=()=>B(m,"$nodesDraggable",s),o=()=>B(g,"$elementsSelectable",s),a=()=>B(f,"$nodesConnectable",s),r=()=>B(S,"$parentLookup",s),[s,c]=Ue();let d=h(t,"nodeClickDistance",8,0);const{visibleNodes:u,nodesDraggable:m,nodesConnectable:f,elementsSelectable:g,updateNodeInternals:k,parentLookup:S}=Ke(),E=typeof ResizeObserver>"u"?null:new ResizeObserver(w=>{const y=new Map;w.forEach(x=>{const P=x.target.getAttribute("data-id");y.set(P,{id:P,nodeElement:x.target,force:!0})}),k(y)});lr(()=>{E==null||E.disconnect()}),he();var _=Bd();ii(_,5,n,w=>w.id,(w,y)=>{{let x=ne(()=>(l(y),T(()=>!!l(y).selected))),P=ne(()=>(l(y),T(()=>!!l(y).hidden))),D=ne(()=>(l(y),i(),T(()=>!!(l(y).draggable||i()&&typeof l(y).draggable>"u")))),N=ne(()=>(l(y),o(),T(()=>!!(l(y).selectable||o()&&typeof l(y).selectable>"u")))),V=ne(()=>(l(y),a(),T(()=>!!(l(y).connectable||a()&&typeof l(y).connectable>"u")))),W=ne(()=>(l(y),T(()=>l(y).deletable??!0))),R=ne(()=>(r(),l(y),T(()=>r().has(l(y).id)))),Y=ne(()=>(l(y),T(()=>l(y).type??"default"))),H=ne(()=>(l(y),T(()=>l(y).internals.z??0))),I=ne(()=>(C($n),l(y),T(()=>$n(l(y)))));Ld(w,{get node(){return l(y)},get id(){return l(y),T(()=>l(y).id)},get data(){return l(y),T(()=>l(y).data)},get selected(){return l(x)},get hidden(){return l(P)},get draggable(){return l(D)},get selectable(){return l(N)},get connectable(){return l(V)},get deletable(){return l(W)},get positionX(){return l(y),T(()=>l(y).internals.positionAbsolute.x)},get positionY(){return l(y),T(()=>l(y).internals.positionAbsolute.y)},get isParent(){return l(R)},get style(){return l(y),T(()=>l(y).style)},get class(){return l(y),T(()=>l(y).class)},get type(){return l(Y)},get sourcePosition(){return l(y),T(()=>l(y).sourcePosition)},get targetPosition(){return l(y),T(()=>l(y).targetPosition)},get dragging(){return l(y),T(()=>l(y).dragging)},get zIndex(){return l(H)},get dragHandle(){return l(y),T(()=>l(y).dragHandle)},get initialized(){return l(I)},get width(){return l(y),T(()=>l(y).width)},get height(){return l(y),T(()=>l(y).height)},get initialWidth(){return l(y),T(()=>l(y).initialWidth)},get initialHeight(){return l(y),T(()=>l(y).initialHeight)},get measuredWidth(){return l(y),T(()=>l(y).measured.width)},get measuredHeight(){return l(y),T(()=>l(y).measured.height)},get parentId(){return l(y),T(()=>l(y).parentId)},get resizeObserver(){return E},get nodeClickDistance(){return d()},$$events:{nodeclick(v){ge.call(this,t,v)},nodemouseenter(v){ge.call(this,t,v)},nodemousemove(v){ge.call(this,t,v)},nodemouseleave(v){ge.call(this,t,v)},nodedrag(v){ge.call(this,t,v)},nodedragstart(v){ge.call(this,t,v)},nodedragstop(v){ge.call(this,t,v)},nodecontextmenu(v){ge.call(this,t,v)}}})}}),we(_),$(e,_),ue(),c()}var Kd=We('<svg><g role="img"><!></g></svg>');function Fd(e,t){ce(t,!1);const n=()=>B(Q,"$edgeTypes",r),i=()=>B(ie,"$flowId",r),o=()=>B(oe,"$elementsSelectable",r),a=()=>B(Z,"$edgeLookup",r),[r,s]=Ue(),c=F(void 0,!0),d=F(void 0,!0),u=F(void 0,!0),m=F(void 0,!0),f=F(void 0,!0);let g=h(t,"id",9),k=h(t,"type",9,"default"),S=h(t,"source",9,""),E=h(t,"target",9,""),_=h(t,"data",25,()=>({})),w=h(t,"style",9,void 0),y=h(t,"zIndex",9,void 0),x=h(t,"animated",9,!1),P=h(t,"selected",9,!1),D=h(t,"selectable",9,void 0),N=h(t,"deletable",9,void 0),V=h(t,"hidden",9,!1),W=h(t,"label",9,void 0),R=h(t,"labelStyle",9,void 0),Y=h(t,"markerStart",9,void 0),H=h(t,"markerEnd",9,void 0),I=h(t,"sourceHandle",9,void 0),v=h(t,"targetHandle",9,void 0),b=h(t,"sourceX",9),p=h(t,"sourceY",9),M=h(t,"targetX",9),z=h(t,"targetY",9),A=h(t,"sourcePosition",9),O=h(t,"targetPosition",9),L=h(t,"ariaLabel",9,void 0),K=h(t,"interactionWidth",9,void 0),J=h(t,"class",9,"");Xn("svelteflow__edge_id",g());const{edgeLookup:Z,edgeTypes:Q,flowId:ie,elementsSelectable:oe}=Ke(),le=ni(),pe=as();function ke(de){const ve=a().get(g());ve&&(pe(g()),le("edgeclick",{event:de,edge:ve}))}function xe(de,ve){const Ye=a().get(g());Ye&&le(ve,{event:de,edge:Ye})}U(()=>C(k()),()=>{X(c,k()||"default")}),U(()=>(n(),l(c),qi),()=>{X(d,n()[l(c)]||qi)}),U(()=>(C(Y()),i()),()=>{X(u,Y()?`url('#${Ki(Y(),i())}')`:void 0)}),U(()=>(C(H()),i()),()=>{X(m,H()?`url('#${Ki(H(),i())}')`:void 0)}),U(()=>(C(D()),o()),()=>{X(f,D()??o())}),Je(),he(!0);var G=ct(),te=Ve(G);{var ye=de=>{var ve=Kd();let Ye;var Ce=_e(ve);let Le;var Me=_e(Ce);{let se=ne(()=>N()??!0);ur(Me,()=>l(d),(qe,Ae)=>{Ae(qe,{get id(){return g()},get source(){return S()},get target(){return E()},get sourceX(){return b()},get sourceY(){return p()},get targetX(){return M()},get targetY(){return z()},get sourcePosition(){return A()},get targetPosition(){return O()},get animated(){return x()},get selected(){return P()},get label(){return W()},get labelStyle(){return R()},get data(){return _()},get style(){return w()},get interactionWidth(){return K()},get selectable(){return l(f)},get deletable(){return l(se)},get type(){return l(c)},get sourceHandleId(){return I()},get targetHandleId(){return v()},get markerStart(){return l(u)},get markerEnd(){return l(m)}})})}we(Ce),we(ve),Ne((se,qe,Ae)=>{Ye=rt(ve,"",Ye,se),Le=wt(Ce,0,qe,null,Le,Ae),ee(Ce,"data-id",g()),ee(Ce,"aria-label",L()===null?void 0:L()?L():`Edge from ${S()} to ${E()}`)},[()=>({"z-index":y()}),()=>Mt((C(ze),C(J()),T(()=>ze(["svelte-flow__edge",J()])))),()=>({animated:x(),selected:P(),selectable:l(f)})]),De("click",Ce,ke),De("contextmenu",Ce,se=>{xe(se,"edgecontextmenu")}),De("mouseenter",Ce,se=>{xe(se,"edgemouseenter")}),De("mouseleave",Ce,se=>{xe(se,"edgemouseleave")}),$(de,ve)};Re(te,de=>{V()||de(ye)})}$(e,G),ue(),s()}function qd(e,t){ce(t,!1);let n=h(t,"onMount",8,void 0),i=h(t,"onDestroy",8,void 0);ti(()=>{var o;return(o=n())==null||o(),i()}),he(),ue()}var Zd=We("<defs></defs>");function Gd(e,t){ce(t,!1);const n=()=>B(a,"$markers",i),[i,o]=Ue(),{markers:a}=Ke();he();var r=Zd();ii(r,5,n,s=>s.id,(s,c)=>{Qd(s,Yt(()=>l(c)))}),we(r),$(e,r),ue(),o()}var Ud=We('<polyline stroke-linecap="round" stroke-linejoin="round" fill="none" points="-5,-4 0,0 -5,4"></polyline>'),$d=We('<polyline stroke-linecap="round" stroke-linejoin="round" points="-5,-4 0,0 -5,4 -5,-4"></polyline>'),Jd=We('<marker class="svelte-flow__arrowhead" viewBox="-10 -10 20 20" refX="0" refY="0"><!></marker>');function Qd(e,t){ce(t,!1);let n=h(t,"id",8),i=h(t,"type",8),o=h(t,"width",8,12.5),a=h(t,"height",8,12.5),r=h(t,"markerUnits",8,"strokeWidth"),s=h(t,"orient",8,"auto-start-reverse"),c=h(t,"color",8,void 0),d=h(t,"strokeWidth",8,void 0);he();var u=Jd(),m=_e(u);{var f=k=>{var S=Ud();Ne(()=>{ee(S,"stroke",c()),ee(S,"stroke-width",d())}),$(k,S)},g=k=>{var S=ct(),E=Ve(S);{var _=w=>{var y=$d();Ne(()=>{ee(y,"stroke",c()),ee(y,"stroke-width",d()),ee(y,"fill",c())}),$(w,y)};Re(E,w=>{C(i()),C(Lt),T(()=>i()===Lt.ArrowClosed)&&w(_)},!0)}$(k,S)};Re(m,k=>{C(i()),C(Lt),T(()=>i()===Lt.Arrow)?k(f):k(g,!1)})}we(u),Ne(()=>{ee(u,"id",n()),ee(u,"markerWidth",`${o()}`),ee(u,"markerHeight",`${a()}`),ee(u,"markerUnits",r()),ee(u,"orient",s())}),$(e,u),ue()}var jd=Te('<div class="svelte-flow__edges"><svg class="svelte-flow__marker"><!></svg> <!> <!></div>');function ef(e,t){ce(t,!1);const n=()=>B(s,"$visibleEdges",o),i=()=>B(u,"$elementsSelectable",o),[o,a]=Ue();let r=h(t,"defaultEdgeOptions",8);const{visibleEdges:s,edgesInitialized:c,edges:{setDefaultOptions:d},elementsSelectable:u}=Ke();ti(()=>{r()&&d(r())}),he();var m=jd(),f=_e(m),g=_e(f);Gd(g,{}),we(f);var k=me(f,2);ii(k,1,n,_=>_.id,(_,w)=>{{let y=ne(()=>(l(w),i(),T(()=>l(w).selectable??i()))),x=ne(()=>(l(w),T(()=>l(w).type||"default")));Fd(_,{get id(){return l(w),T(()=>l(w).id)},get source(){return l(w),T(()=>l(w).source)},get target(){return l(w),T(()=>l(w).target)},get data(){return l(w),T(()=>l(w).data)},get style(){return l(w),T(()=>l(w).style)},get animated(){return l(w),T(()=>l(w).animated)},get selected(){return l(w),T(()=>l(w).selected)},get selectable(){return l(y)},get deletable(){return l(w),T(()=>l(w).deletable)},get hidden(){return l(w),T(()=>l(w).hidden)},get label(){return l(w),T(()=>l(w).label)},get labelStyle(){return l(w),T(()=>l(w).labelStyle)},get markerStart(){return l(w),T(()=>l(w).markerStart)},get markerEnd(){return l(w),T(()=>l(w).markerEnd)},get sourceHandle(){return l(w),T(()=>l(w).sourceHandle)},get targetHandle(){return l(w),T(()=>l(w).targetHandle)},get sourceX(){return l(w),T(()=>l(w).sourceX)},get sourceY(){return l(w),T(()=>l(w).sourceY)},get targetX(){return l(w),T(()=>l(w).targetX)},get targetY(){return l(w),T(()=>l(w).targetY)},get sourcePosition(){return l(w),T(()=>l(w).sourcePosition)},get targetPosition(){return l(w),T(()=>l(w).targetPosition)},get ariaLabel(){return l(w),T(()=>l(w).ariaLabel)},get interactionWidth(){return l(w),T(()=>l(w).interactionWidth)},get class(){return l(w),T(()=>l(w).class)},get type(){return l(x)},get zIndex(){return l(w),T(()=>l(w).zIndex)},$$events:{edgeclick(P){ge.call(this,t,P)},edgecontextmenu(P){ge.call(this,t,P)},edgemouseenter(P){ge.call(this,t,P)},edgemouseleave(P){ge.call(this,t,P)}}})}});var S=me(k,2);{var E=_=>{qd(_,{onMount:()=>{Yn(c,!0)},onDestroy:()=>{Yn(c,!1)}})};Re(S,_=>{n(),T(()=>n().length>0)&&_(E)})}we(m),$(e,m),ue(),a()}var tf=Te('<div class="svelte-flow__selection svelte-tgeejd"></div>');function us(e,t){let n=h(t,"x",8,0),i=h(t,"y",8,0),o=h(t,"width",8,0),a=h(t,"height",8,0),r=h(t,"isVisible",8,!0);var s=ct(),c=Ve(s);{var d=u=>{var m=tf();let f;Ne(g=>f=rt(m,"",f,g),[()=>({width:typeof o()=="string"?o():`${o()}px`,height:typeof a()=="string"?a():`${a()}px`,transform:`translate(${n()}px, ${i()}px)`})]),$(u,m)};Re(c,u=>{r()&&u(d)})}$(e,s)}function nf(e,t){ce(t,!1);const n=()=>B(r,"$selectionRect",o),i=()=>B(s,"$selectionRectMode",o),[o,a]=Ue(),{selectionRect:r,selectionRectMode:s}=Ke();he();{let c=ne(()=>!!(n()&&i()==="user")),d=ne(()=>{var g;return(g=n())==null?void 0:g.width}),u=ne(()=>{var g;return(g=n())==null?void 0:g.height}),m=ne(()=>{var g;return(g=n())==null?void 0:g.x}),f=ne(()=>{var g;return(g=n())==null?void 0:g.y});us(e,{get isVisible(){return l(c)},get width(){return l(d)},get height(){return l(u)},get x(){return l(m)},get y(){return l(f)}})}ue(),a()}var of=Te('<div class="selection-wrapper nopan svelte-mro1il" role="button" tabindex="-1"><!></div>');function rf(e,t){ce(t,!1);const n=()=>B(c,"$selectionRectMode",a),i=()=>B(u,"$nodeLookup",a),o=()=>B(d,"$nodes",a),[a,r]=Ue(),s=Ke(),{selectionRectMode:c,nodes:d,nodeLookup:u}=s,m=ni();let f=F(null);function g(w){const y=o().filter(x=>x.selected);m("selectioncontextmenu",{nodes:y,event:w})}function k(w){const y=o().filter(x=>x.selected);m("selectionclick",{nodes:y,event:w})}U(()=>(n(),i(),o()),()=>{n()==="nodes"&&(X(f,xn(i(),{filter:w=>!!w.selected})),o())}),Je(),he();var S=ct(),E=Ve(S);{var _=w=>{var y=of(),x=_e(y);us(x,{width:"100%",height:"100%",x:0,y:0}),we(y),tt(y,(P,D)=>Gt==null?void 0:Gt(P,D),()=>({disabled:!1,store:s,onDrag:(P,D,N,V)=>{m("nodedrag",{event:P,targetNode:null,nodes:V})},onDragStart:(P,D,N,V)=>{m("nodedragstart",{event:P,targetNode:null,nodes:V})},onDragStop:(P,D,N,V)=>{m("nodedragstop",{event:P,targetNode:null,nodes:V})}})),yt(()=>De("contextmenu",y,g)),yt(()=>De("click",y,k)),yt(()=>De("keyup",y,()=>{})),Ne(()=>rt(y,`width: ${l(f),T(()=>l(f).width)??""}px; height: ${l(f),T(()=>l(f).height)??""}px; transform: translate(${l(f),T(()=>l(f).x)??""}px, ${l(f),T(()=>l(f).y)??""}px)`)),$(w,y)};Re(E,w=>{n(),l(f),C(Zt),T(()=>n()==="nodes"&&l(f)&&Zt(l(f).x)&&Zt(l(f).y))&&w(_)})}$(e,S),ue(),r()}function Se(e,t){let{enabled:n=!0,trigger:i,type:o="keydown"}=t;function a(r){const s=Array.isArray(i)?i:[i],c={alt:r.altKey,ctrl:r.ctrlKey,shift:r.shiftKey,meta:r.metaKey};for(const d of s){const u={modifier:[],preventDefault:!1,enabled:!0,...d},{modifier:m,key:f,callback:g,preventDefault:k,enabled:S}=u;if(S){if(m.length&&!(Array.isArray(m)?m:[m]).map(w=>typeof w=="string"?[w]:w).some(w=>w.every(y=>c[y])))continue;if(r.key===f){k&&r.preventDefault();const E={node:e,trigger:u,originalEvent:r};e.dispatchEvent(new CustomEvent("shortcut",{detail:E})),g==null||g(E)}}}}return n&&e.addEventListener(o,a),{update:r=>{const{enabled:s=!0,type:c="keydown"}=r;n&&(!s||o!==c)?e.removeEventListener(o,a):!n&&s&&e.addEventListener(c,a),n=s,o=c,i=r.trigger},destroy:()=>{e.removeEventListener(o,a)}}}function sf(e,t){ce(t,!1);let n=h(t,"selectionKey",8,"Shift"),i=h(t,"multiSelectionKey",24,()=>Un()?"Meta":"Control"),o=h(t,"deleteKey",8,"Backspace"),a=h(t,"panActivationKey",8," "),r=h(t,"zoomActivationKey",24,()=>Un()?"Meta":"Control");const{selectionKeyPressed:s,multiselectionKeyPressed:c,deleteKeyPressed:d,panActivationKeyPressed:u,zoomActivationKeyPressed:m,selectionRect:f}=Ke();function g(w){return w!==null&&typeof w=="object"}function k(w){return g(w)?w.modifier||[]:[]}function S(w){return w==null?"":g(w)?w.key:w}function E(w,y){return(Array.isArray(w)?w:[w]).map(P=>{const D=S(P);return{key:D,modifier:k(P),enabled:D!==null,callback:y}})}function _(){f.set(null),s.set(!1),c.set(!1),d.set(!1),u.set(!1),m.set(!1)}he(),De("blur",at,_),De("contextmenu",at,_),tt(at,(w,y)=>Se==null?void 0:Se(w,y),()=>({trigger:E(n(),()=>s.set(!0)),type:"keydown"})),tt(at,(w,y)=>Se==null?void 0:Se(w,y),()=>({trigger:E(n(),()=>s.set(!1)),type:"keyup"})),tt(at,(w,y)=>Se==null?void 0:Se(w,y),()=>({trigger:E(i(),()=>c.set(!0)),type:"keydown"})),tt(at,(w,y)=>Se==null?void 0:Se(w,y),()=>({trigger:E(i(),()=>c.set(!1)),type:"keyup"})),tt(at,(w,y)=>Se==null?void 0:Se(w,y),()=>({trigger:E(o(),w=>{!(w.originalEvent.ctrlKey||w.originalEvent.metaKey||w.originalEvent.shiftKey)&&!Su(w.originalEvent)&&d.set(!0)}),type:"keydown"})),tt(at,(w,y)=>Se==null?void 0:Se(w,y),()=>({trigger:E(o(),()=>d.set(!1)),type:"keyup"})),tt(at,(w,y)=>Se==null?void 0:Se(w,y),()=>({trigger:E(a(),()=>u.set(!0)),type:"keydown"})),tt(at,(w,y)=>Se==null?void 0:Se(w,y),()=>({trigger:E(a(),()=>u.set(!1)),type:"keyup"})),tt(at,(w,y)=>Se==null?void 0:Se(w,y),()=>({trigger:E(r(),()=>m.set(!0)),type:"keydown"})),tt(at,(w,y)=>Se==null?void 0:Se(w,y),()=>({trigger:E(r(),()=>m.set(!1)),type:"keyup"})),ue()}var af=We('<path fill="none" class="svelte-flow__connection-path"></path>'),lf=We('<svg class="svelte-flow__connectionline"><g><!><!></g></svg>');function cf(e,t){ce(t,!1);const n=()=>B(g,"$connection",r),i=()=>B(k,"$connectionLineType",r),o=()=>B(m,"$width",r),a=()=>B(f,"$height",r),[r,s]=Ue();let c=h(t,"containerStyle",8,""),d=h(t,"style",8,""),u=h(t,"isCustomComponent",8,!1);const{width:m,height:f,connection:g,connectionLineType:k}=Ke();let S=F(null);U(()=>(n(),C(u()),i(),l(S),Wi),()=>{if(n().inProgress&&!u()){const{from:y,to:x,fromPosition:P,toPosition:D}=n(),N={sourceX:y.x,sourceY:y.y,sourcePosition:P,targetX:x.x,targetY:x.y,targetPosition:D};switch(i()){case qt.Bezier:(V=>{var W=Nt(V,1);X(S,W[0])})(Ur(N));break;case qt.Step:(V=>{var W=Nt(V,1);X(S,W[0])})(Jn({...N,borderRadius:0}));break;case qt.SmoothStep:(V=>{var W=Nt(V,1);X(S,W[0])})(Jn(N));break;default:(V=>{var W=Nt(V,1);X(S,W[0])})(Wi(N))}}}),Je(),he();var E=ct(),_=Ve(E);{var w=y=>{var x=lf(),P=_e(x),D=_e(P);it(D,t,"connectionLine",{});var N=me(D);{var V=W=>{var R=af();Ne(()=>{ee(R,"d",l(S)),rt(R,d())}),$(W,R)};Re(N,W=>{u()||W(V)})}we(P),we(x),Ne(W=>{ee(x,"width",o()),ee(x,"height",a()),rt(x,c()),wt(P,0,W)},[()=>Mt((C(ze),C(Fo),n(),T(()=>ze(["svelte-flow__connection",Fo(n().isValid)]))))]),$(y,x)};Re(_,y=>{n(),T(()=>n().inProgress)&&y(w)})}$(e,E),ue(),s()}var uf=Te("<div><!></div>");function gn(e,t){const n=Xe(t,["children","$$slots","$$events","$$legacy"]),i=Xe(n,["position","style","class"]);ce(t,!1);const o=()=>B(m,"$selectionRectMode",a),[a,r]=Ue(),s=F();let c=h(t,"position",8,"top-right"),d=h(t,"style",8,void 0),u=h(t,"class",8,void 0);const{selectionRectMode:m}=Ke();U(()=>C(c()),()=>{X(s,`${c()}`.split("-"))}),Je(),he();var f=uf();Gi(f,(k,S)=>({class:k,style:d(),...i,[cr]:S}),[()=>(C(ze),C(u()),l(s),T(()=>ze(["svelte-flow__panel",u(),...l(s)]))),()=>({"pointer-events":o()?"none":""})]);var g=_e(f);it(g,t,"default",{}),we(f),$(e,f),ue(),r()}var df=Te('<a href="https://svelteflow.dev" target="_blank" rel="noopener noreferrer" aria-label="Svelte Flow attribution">Svelte Flow</a>');function ff(e,t){ce(t,!1);let n=h(t,"proOptions",8,void 0),i=h(t,"position",8,"bottom-right");he();var o=ct(),a=Ve(o);{var r=s=>{gn(s,{get position(){return i()},class:"svelte-flow__attribution","data-message":"Feel free to remove the attribution or check out how you could support us: https://svelteflow.dev/support-us",children:(c,d)=>{var u=df();$(c,u)},$$slots:{default:!0}})};Re(a,s=>{C(n()),T(()=>{var c;return!((c=n())!=null&&c.hideAttribution)})&&s(r)})}$(e,o),ue()}function sr(e,{nodeTypes:t,edgeTypes:n,minZoom:i,maxZoom:o,translateExtent:a,paneClickDistance:r}){t!==void 0&&e.setNodeTypes(t),n!==void 0&&e.setEdgeTypes(n),i!==void 0&&e.setMinZoom(i),o!==void 0&&e.setMaxZoom(o),a!==void 0&&e.setTranslateExtent(a),r!==void 0&&e.setPaneClickDistance(r)}const hf=e=>Object.keys(e);function ar(e,t){hf(t).forEach(n=>{const i=t[n];i!==void 0&&e[n].set(i)})}function gf(){return typeof window>"u"||!window.matchMedia?null:window.matchMedia("(prefers-color-scheme: dark)")}function mf(e="light"){return dt("light",n=>{if(e!=="system"){n(e);return}const i=gf(),o=()=>n(i!=null&&i.matches?"dark":"light");return n(i!=null&&i.matches?"dark":"light"),i==null||i.addEventListener("change",o),()=>{i==null||i.removeEventListener("change",o)}})}var yf=Te('<!> <!> <div class="svelte-flow__edgelabel-renderer"></div> <div class="svelte-flow__viewport-portal"></div> <!> <!>',1),vf=Te("<!> <!>",1),wf=Te("<div><!> <!> <!> <!></div>");function xf(e,t){const n=Ds(t),i=Xe(t,["children","$$slots","$$events","$$legacy"]),o=Xe(i,["id","nodes","edges","fitView","fitViewOptions","minZoom","maxZoom","initialViewport","viewport","nodeTypes","edgeTypes","selectionKey","selectionMode","panActivationKey","multiSelectionKey","zoomActivationKey","nodesDraggable","nodesConnectable","nodeDragThreshold","elementsSelectable","snapGrid","deleteKey","connectionRadius","connectionLineType","connectionMode","connectionLineStyle","connectionLineContainerStyle","onMoveStart","onMove","onMoveEnd","isValidConnection","translateExtent","nodeExtent","onlyRenderVisibleElements","panOnScrollMode","preventScrolling","zoomOnScroll","zoomOnDoubleClick","zoomOnPinch","panOnScroll","panOnDrag","selectionOnDrag","autoPanOnConnect","autoPanOnNodeDrag","onerror","ondelete","onedgecreate","attributionPosition","proOptions","defaultEdgeOptions","width","height","colorMode","onconnect","onconnectstart","onconnectend","onbeforedelete","oninit","nodeOrigin","paneClickDistance","nodeClickDistance","defaultMarkerColor","style","class"]);ce(t,!1);const a=()=>B(y(),"$viewport",c),r=()=>B(hi,"$initialized",c),s=()=>B(l(u),"$colorModeClass",c),[c,d]=Ue(),u=F();let m=h(t,"id",8,"1"),f=h(t,"nodes",8),g=h(t,"edges",8),k=h(t,"fitView",8,void 0),S=h(t,"fitViewOptions",8,void 0),E=h(t,"minZoom",8,void 0),_=h(t,"maxZoom",8,void 0),w=h(t,"initialViewport",8,void 0),y=h(t,"viewport",8,void 0),x=h(t,"nodeTypes",8,void 0),P=h(t,"edgeTypes",8,void 0),D=h(t,"selectionKey",8,void 0),N=h(t,"selectionMode",8,void 0),V=h(t,"panActivationKey",8,void 0),W=h(t,"multiSelectionKey",8,void 0),R=h(t,"zoomActivationKey",8,void 0),Y=h(t,"nodesDraggable",8,void 0),H=h(t,"nodesConnectable",8,void 0),I=h(t,"nodeDragThreshold",8,void 0),v=h(t,"elementsSelectable",8,void 0),b=h(t,"snapGrid",8,void 0),p=h(t,"deleteKey",8,void 0),M=h(t,"connectionRadius",8,void 0),z=h(t,"connectionLineType",8,void 0),A=h(t,"connectionMode",24,()=>Rt.Strict),O=h(t,"connectionLineStyle",8,""),L=h(t,"connectionLineContainerStyle",8,""),K=h(t,"onMoveStart",8,void 0),J=h(t,"onMove",8,void 0),Z=h(t,"onMoveEnd",8,void 0),Q=h(t,"isValidConnection",8,void 0),ie=h(t,"translateExtent",8,void 0),oe=h(t,"nodeExtent",8,void 0),le=h(t,"onlyRenderVisibleElements",8,void 0),pe=h(t,"panOnScrollMode",24,()=>kt.Free),ke=h(t,"preventScrolling",8,!0),xe=h(t,"zoomOnScroll",8,!0),G=h(t,"zoomOnDoubleClick",8,!0),te=h(t,"zoomOnPinch",8,!0),ye=h(t,"panOnScroll",8,!1),de=h(t,"panOnDrag",8,!0),ve=h(t,"selectionOnDrag",8,void 0),Ye=h(t,"autoPanOnConnect",8,!0),Ce=h(t,"autoPanOnNodeDrag",8,!0),Le=h(t,"onerror",8,void 0),Me=h(t,"ondelete",8,void 0),se=h(t,"onedgecreate",8,void 0),qe=h(t,"attributionPosition",8,void 0),Ae=h(t,"proOptions",8,void 0),ot=h(t,"defaultEdgeOptions",8,void 0),Oe=h(t,"width",8,void 0),He=h(t,"height",8,void 0),Be=h(t,"colorMode",8,"light"),Ze=h(t,"onconnect",8,void 0),mt=h(t,"onconnectstart",8,void 0),Pe=h(t,"onconnectend",8,void 0),be=h(t,"onbeforedelete",8,void 0),Ee=h(t,"oninit",8,void 0),ae=h(t,"nodeOrigin",8,void 0),Fe=h(t,"paneClickDistance",8,0),Qe=h(t,"nodeClickDistance",8,0),pn=h(t,"defaultMarkerColor",8,"#b1b1b7"),bn=h(t,"style",8,void 0),_n=h(t,"class",8,void 0),je=F(),et=F(),Ie=F();const kn=a()||w(),$e=As(co)?Ke():Ad({nodes:q(f()),edges:q(g()),width:Oe(),height:He(),fitView:k(),nodeOrigin:ae(),nodeExtent:oe()});ti(()=>($e.width.set(l(et)),$e.height.set(l(Ie)),$e.domNode.set(l(je)),$e.syncNodeStores(f()),$e.syncEdgeStores(g()),$e.syncViewport(y()),k()!==void 0&&$e.fitViewQueued.set(k()),S()&&$e.fitViewOptions.set(S()),sr($e,{nodeTypes:x(),edgeTypes:P(),minZoom:E(),maxZoom:_(),translateExtent:ie(),paneClickDistance:Fe()}),()=>{$e.reset()}));const{initialized:hi}=$e;let Ht=F(!1);U(()=>(l(et),l(Ie)),()=>{l(et)!==void 0&&l(Ie)!==void 0&&($e.width.set(l(et)),$e.height.set(l(Ie)))}),U(()=>(l(Ht),r(),C(Ee())),()=>{var Ge;!l(Ht)&&r()&&((Ge=Ee())==null||Ge(),X(Ht,!0))}),U(()=>(C(m()),C(z()),C(M()),C(N()),C(b()),C(pn()),C(Y()),C(H()),C(v()),C(le()),C(Q()),C(Ye()),C(Ce()),C(Le()),C(Me()),C(se()),C(A()),C(I()),C(Ze()),C(mt()),C(Pe()),C(be()),C(ae()),ar),()=>{const Ge={flowId:m(),connectionLineType:z(),connectionRadius:M(),selectionMode:N(),snapGrid:b(),defaultMarkerColor:pn(),nodesDraggable:Y(),nodesConnectable:H(),elementsSelectable:v(),onlyRenderVisibleElements:le(),isValidConnection:Q(),autoPanOnConnect:Ye(),autoPanOnNodeDrag:Ce(),onerror:Le(),ondelete:Me(),onedgecreate:se(),connectionMode:A(),nodeDragThreshold:I(),onconnect:Ze(),onconnectstart:mt(),onconnectend:Pe(),onbeforedelete:be(),nodeOrigin:ae()};ar($e,Ge)}),U(()=>(C(x()),C(P()),C(E()),C(_()),C(ie()),C(Fe())),()=>{sr($e,{nodeTypes:x(),edgeTypes:P(),minZoom:E(),maxZoom:_(),translateExtent:ie(),paneClickDistance:Fe()})}),U(()=>C(Be()),()=>{Hs(X(u,mf(Be())),"$colorModeClass",c)}),Je(),he();var ut=wf();Gi(ut,Ge=>({style:bn(),class:Ge,"data-testid":"svelte-flow__wrapper",...o,role:"application"}),[()=>(C(ze),C(_n()),s(),T(()=>ze(["svelte-flow",_n(),s()])))],void 0,"svelte-6v6nc");var En=_e(ut);sf(En,{get selectionKey(){return D()},get deleteKey(){return p()},get panActivationKey(){return V()},get multiSelectionKey(){return W()},get zoomActivationKey(){return R()}});var Sn=me(En,2);{let Ge=ne(()=>(C(pe()),C(kt),T(()=>pe()===void 0?kt.Free:pe()))),fs=ne(()=>ke()===void 0?!0:ke()),hs=ne(()=>xe()===void 0?!0:xe()),gs=ne(()=>G()===void 0?!0:G()),ms=ne(()=>te()===void 0?!0:te()),ys=ne(()=>ye()===void 0?!1:ye()),vs=ne(()=>de()===void 0?!0:de()),ws=ne(()=>Fe()===void 0?0:Fe());Dd(Sn,{get initialViewport(){return kn},get onMoveStart(){return K()},get onMove(){return J()},get onMoveEnd(){return Z()},get panOnScrollMode(){return l(Ge)},get preventScrolling(){return l(fs)},get zoomOnScroll(){return l(hs)},get zoomOnDoubleClick(){return l(gs)},get zoomOnPinch(){return l(ms)},get panOnScroll(){return l(ys)},get panOnDrag(){return l(vs)},get paneClickDistance(){return l(ws)},children:(xs,Jf)=>{{let ps=ne(()=>de()===void 0?!0:de());Od(xs,{get panOnDrag(){return l(ps)},get selectionOnDrag(){return ve()},$$events:{paneclick(tn){ge.call(this,t,tn)},panecontextmenu(tn){ge.call(this,t,tn)}},children:(tn,Qf)=>{var uo=vf(),fo=Ve(uo);Vd(fo,{children:(_s,jf)=>{var ho=yf(),go=Ve(ho);ef(go,{get defaultEdgeOptions(){return ot()},$$events:{edgeclick(fe){ge.call(this,t,fe)},edgecontextmenu(fe){ge.call(this,t,fe)},edgemouseenter(fe){ge.call(this,t,fe)},edgemouseleave(fe){ge.call(this,t,fe)}}});var mo=me(go,2);cf(mo,{get containerStyle(){return L()},get style(){return O()},isCustomComponent:T(()=>n.connectionLine),$$slots:{connectionLine:(fe,eh)=>{var vo=ct(),Es=Ve(vo);it(Es,t,"connectionLine",{}),$(fe,vo)}}});var yo=me(mo,6);Wd(yo,{get nodeClickDistance(){return Qe()},$$events:{nodeclick(fe){ge.call(this,t,fe)},nodemouseenter(fe){ge.call(this,t,fe)},nodemousemove(fe){ge.call(this,t,fe)},nodemouseleave(fe){ge.call(this,t,fe)},nodedragstart(fe){ge.call(this,t,fe)},nodedrag(fe){ge.call(this,t,fe)},nodedragstop(fe){ge.call(this,t,fe)},nodecontextmenu(fe){ge.call(this,t,fe)}}});var ks=me(yo,2);rf(ks,{$$events:{selectionclick(fe){ge.call(this,t,fe)},selectioncontextmenu(fe){ge.call(this,t,fe)},nodedragstart(fe){ge.call(this,t,fe)},nodedrag(fe){ge.call(this,t,fe)},nodedragstop(fe){ge.call(this,t,fe)}}}),$(_s,ho)},$$slots:{default:!0}});var bs=me(fo,2);nf(bs,{}),$(tn,uo)},$$slots:{default:!0}})}},$$slots:{default:!0}})}var Cn=me(Sn,2);ff(Cn,{get proOptions(){return Ae()},get position(){return qe()}});var ds=me(Cn,2);it(ds,t,"default",{}),we(ut),Ui(ut,Ge=>X(je,Ge),()=>l(je)),Eo(ut,"clientWidth",Ge=>X(et,Ge)),Eo(ut,"clientHeight",Ge=>X(Ie,Ge)),De("dragover",ut,function(Ge){ge.call(this,t,Ge)}),De("drop",ut,function(Ge){ge.call(this,t,Ge)}),$(e,ut),ue(),d()}var pf=Te("<button><!></button>");function Hn(e,t){const n=Xe(t,["children","$$slots","$$events","$$legacy"]),i=Xe(n,["class","bgColor","bgColorHover","color","colorHover","borderColor"]);ce(t,!1);let o=h(t,"class",8,void 0),a=h(t,"bgColor",8,void 0),r=h(t,"bgColorHover",8,void 0),s=h(t,"color",8,void 0),c=h(t,"colorHover",8,void 0),d=h(t,"borderColor",8,void 0);he();var u=pf();Gi(u,(f,g)=>({type:"button",class:f,...i,[cr]:g}),[()=>(C(ze),C(o()),T(()=>ze(["svelte-flow__controls-button",o()]))),()=>({"--xy-controls-button-background-color-props":a(),"--xy-controls-button-background-color-hover-props":r(),"--xy-controls-button-color-props":s(),"--xy-controls-button-color-hover-props":c(),"--xy-controls-button-border-color-props":d()})]);var m=_e(u);it(m,t,"default",{class:"button-svg"}),we(u),De("click",u,function(f){ge.call(this,t,f)}),$(e,u),ue()}var bf=We('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32"><path d="M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"></path></svg>');function _f(e){var t=bf();$(e,t)}var kf=We('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 5"><path d="M0 0h32v4.2H0z"></path></svg>');function Ef(e){var t=kf();$(e,t)}var Sf=We('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 30"><path d="M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"></path></svg>');function Cf(e){var t=Sf();$(e,t)}var Mf=We('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 25 32"><path d="M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"></path></svg>');function zf(e){var t=Mf();$(e,t)}var Pf=We('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 25 32"><path d="M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"></path></svg>');function Nf(e){var t=Pf();$(e,t)}var Tf=Te("<!> <!>",1),Af=Te("<!> <!> <!> <!> <!> <!>",1);function Hf(e,t){ce(t,!1);const n=()=>B(z,"$nodesDraggable",c),i=()=>B(A,"$nodesConnectable",c),o=()=>B(O,"$elementsSelectable",c),a=()=>B(b,"$viewport",c),r=()=>B(p,"$minZoom",c),s=()=>B(M,"$maxZoom",c),[c,d]=Ue(),u=F(),m=F(),f=F(),g=F();let k=h(t,"position",8,"bottom-left"),S=h(t,"showZoom",8,!0),E=h(t,"showFitView",8,!0),_=h(t,"showLock",8,!0),w=h(t,"buttonBgColor",8,void 0),y=h(t,"buttonBgColorHover",8,void 0),x=h(t,"buttonColor",8,void 0),P=h(t,"buttonColorHover",8,void 0),D=h(t,"buttonBorderColor",8,void 0),N=h(t,"ariaLabel",8,void 0),V=h(t,"style",8,void 0),W=h(t,"orientation",8,"vertical"),R=h(t,"fitViewOptions",8,void 0),Y=h(t,"class",8,"");const{zoomIn:H,zoomOut:I,fitView:v,viewport:b,minZoom:p,maxZoom:M,nodesDraggable:z,nodesConnectable:A,elementsSelectable:O}=Ke(),L={bgColor:w(),bgColorHover:y(),color:x(),colorHover:P(),borderColor:D()},K=()=>{H()},J=()=>{I()},Z=()=>{v(R())},Q=()=>{X(u,!l(u)),z.set(l(u)),A.set(l(u)),O.set(l(u))};U(()=>(n(),i(),o()),()=>{X(u,n()||i()||o())}),U(()=>(a(),r()),()=>{X(m,a().zoom<=r())}),U(()=>(a(),s()),()=>{X(f,a().zoom>=s())}),U(()=>C(W()),()=>{X(g,W()==="horizontal"?"horizontal":"vertical")}),Je(),he();{let ie=ne(()=>(C(ze),l(g),C(Y()),T(()=>ze(["svelte-flow__controls",l(g),Y()])))),oe=ne(()=>N()??"Svelte Flow controls");gn(e,{get class(){return l(ie)},get position(){return k()},"data-testid":"svelte-flow__controls",get"aria-label"(){return l(oe)},get style(){return V()},children:(le,pe)=>{var ke=Af(),xe=Ve(ke);it(xe,t,"before",{});var G=me(xe,2);{var te=Me=>{var se=Tf(),qe=Ve(se);Hn(qe,Yt({class:"svelte-flow__controls-zoomin",title:"zoom in","aria-label":"zoom in",get disabled(){return l(f)}},()=>L,{$$events:{click:K},children:(ot,Oe)=>{_f(ot)},$$slots:{default:!0}}));var Ae=me(qe,2);Hn(Ae,Yt({class:"svelte-flow__controls-zoomout",title:"zoom out","aria-label":"zoom out",get disabled(){return l(m)}},()=>L,{$$events:{click:J},children:(ot,Oe)=>{Ef(ot)},$$slots:{default:!0}})),$(Me,se)};Re(G,Me=>{S()&&Me(te)})}var ye=me(G,2);{var de=Me=>{Hn(Me,Yt({class:"svelte-flow__controls-fitview",title:"fit view","aria-label":"fit view"},()=>L,{$$events:{click:Z},children:(se,qe)=>{Cf(se)},$$slots:{default:!0}}))};Re(ye,Me=>{E()&&Me(de)})}var ve=me(ye,2);{var Ye=Me=>{Hn(Me,Yt({class:"svelte-flow__controls-interactive",title:"toggle interactivity","aria-label":"toggle interactivity"},()=>L,{$$events:{click:Q},children:(se,qe)=>{var Ae=ct(),ot=Ve(Ae);{var Oe=Be=>{Nf(Be)},He=Be=>{zf(Be)};Re(ot,Be=>{l(u)?Be(Oe):Be(He,!1)})}$(se,Ae)},$$slots:{default:!0}}))};Re(ve,Me=>{_()&&Me(Ye)})}var Ce=me(ve,2);it(Ce,t,"default",{});var Le=me(Ce,2);it(Le,t,"after",{}),$(le,ke)},$$slots:{default:!0}})}ue(),d()}var At;(function(e){e.Lines="lines",e.Dots="dots",e.Cross="cross"})(At||(At={}));var Df=We("<circle></circle>");function If(e,t){ce(t,!1);let n=h(t,"radius",8,5),i=h(t,"class",8,"");he();var o=Df();Ne(a=>{ee(o,"cx",n()),ee(o,"cy",n()),ee(o,"r",n()),wt(o,0,a)},[()=>Mt((C(ze),C(i()),T(()=>ze(["svelte-flow__background-pattern","dots",i()]))))]),$(e,o),ue()}var Of=We("<path></path>");function Rf(e,t){ce(t,!1);let n=h(t,"lineWidth",8,1),i=h(t,"dimensions",8),o=h(t,"variant",8,void 0),a=h(t,"class",8,"");he();var r=Of();Ne(s=>{ee(r,"stroke-width",n()),ee(r,"d",(C(i()),T(()=>`M${i()[0]/2} 0 V${i()[1]} M0 ${i()[1]/2} H${i()[0]}`))),wt(r,0,s)},[()=>Mt((C(ze),C(o()),C(a()),T(()=>ze(["svelte-flow__background-pattern",o(),a()]))))]),$(e,r),ue()}const Vf={[At.Dots]:1,[At.Lines]:1,[At.Cross]:6};var Xf=We('<svg data-testid="svelte-flow__background"><pattern patternUnits="userSpaceOnUse"><!></pattern><rect x="0" y="0" width="100%" height="100%"></rect></svg>');function Yf(e,t){ce(t,!1);const n=()=>B(P,"$flowId",o),i=()=>B(x,"$viewport",o),[o,a]=Ue(),r=F(),s=F(),c=F(),d=F(),u=F();let m=h(t,"id",8,void 0),f=h(t,"variant",24,()=>At.Dots),g=h(t,"gap",8,20),k=h(t,"size",8,1),S=h(t,"lineWidth",8,1),E=h(t,"bgColor",8,void 0),_=h(t,"patternColor",8,void 0),w=h(t,"patternClass",8,void 0),y=h(t,"class",8,"");const{viewport:x,flowId:P}=Ke(),D=k()||Vf[f()],N=f()===At.Dots,V=f()===At.Cross,W=Array.isArray(g())?g():[g(),g()];U(()=>(n(),C(m())),()=>{X(r,`background-pattern-${n()}-${m()?m():""}`)}),U(()=>i(),()=>{X(s,[W[0]*i().zoom||1,W[1]*i().zoom||1])}),U(()=>i(),()=>{X(c,D*i().zoom)}),U(()=>(l(c),l(s)),()=>{X(d,V?[l(c),l(c)]:l(s))}),U(()=>(l(c),l(d)),()=>{X(u,N?[l(c)/2,l(c)/2]:[l(d)[0]/2,l(d)[1]/2])}),Je(),he();var R=Xf();let Y;var H=_e(R),I=_e(H);{var v=M=>{{let z=ne(()=>l(c)/2);If(M,{get radius(){return l(z)},get class(){return w()}})}},b=M=>{Rf(M,{get dimensions(){return l(d)},get variant(){return f()},get lineWidth(){return S()},get class(){return w()}})};Re(I,M=>{N?M(v):M(b,!1)})}we(H);var p=me(H);we(R),Ne((M,z)=>{wt(R,0,M,"svelte-2izb27"),Y=rt(R,"",Y,z),ee(H,"id",l(r)),ee(H,"x",(i(),l(s),T(()=>i().x%l(s)[0]))),ee(H,"y",(i(),l(s),T(()=>i().y%l(s)[1]))),ee(H,"width",(l(s),T(()=>l(s)[0]))),ee(H,"height",(l(s),T(()=>l(s)[1]))),ee(H,"patternTransform",(l(u),T(()=>`translate(-${l(u)[0]},-${l(u)[1]})`))),ee(p,"fill",`url(#${l(r)})`)},[()=>Mt((C(ze),C(y()),T(()=>ze(["svelte-flow__background",y()])))),()=>({"--xy-background-color-props":E(),"--xy-background-pattern-color-props":_()})]),$(e,R),ue(),a()}var Lf=We("<rect></rect>");function Bf(e,t){ce(t,!1);let n=h(t,"x",8),i=h(t,"y",8),o=h(t,"width",8,0),a=h(t,"height",8,0),r=h(t,"borderRadius",8,5),s=h(t,"color",8,void 0),c=h(t,"shapeRendering",8),d=h(t,"strokeColor",8,void 0),u=h(t,"strokeWidth",8,2),m=h(t,"selected",8,!1),f=h(t,"class",8,"");he();var g=Lf();let k;Ne((S,E)=>{k=wt(g,0,S,null,k,E),ee(g,"x",n()),ee(g,"y",i()),ee(g,"rx",r()),ee(g,"ry",r()),ee(g,"width",o()),ee(g,"height",a()),rt(g,`${s()?`fill: ${s()};`:""}${d()?`stroke: ${d()};`:""}${u()?`stroke-width: ${u()};`:""}`),ee(g,"shape-rendering",c())},[()=>Mt((C(ze),C(f()),T(()=>ze(["svelte-flow__minimap-node",f()])))),()=>({selected:m()})]),$(e,g),ue()}function Ci(e,t){const n=Qu({domNode:e,panZoom:t.panZoom,getTransform:()=>{const o=q(t.viewport);return[o.x,o.y,o.zoom]},getViewScale:t.getViewScale});function i(o){n.update({translateExtent:o.translateExtent,width:o.width,height:o.height,inversePan:o.inversePan,zoomStep:o.zoomStep,pannable:o.pannable,zoomable:o.zoomable})}return{update:i,destroy(){n.destroy()}}}const Mi=e=>e instanceof Function?e:()=>e;var Wf=We("<title> </title>"),Kf=We('<svg class="svelte-flow__minimap-svg" role="img"><!><!><path class="svelte-flow__minimap-mask" fill-rule="evenodd" pointer-events="none"></path></svg>');function Ff(e,t){ce(t,!1);const n=()=>B(de,"$flowId",u),i=()=>B(G,"$viewport",u),o=()=>B(te,"$containerWidth",u),a=()=>B(ye,"$containerHeight",u),r=()=>B(xe,"$nodeLookup",u),s=()=>B(ke,"$nodes",u),c=()=>B(ve,"$panZoom",u),d=()=>B(Ye,"$translateExtent",u),[u,m]=Ue(),f=F(),g=F(),k=F(),S=F(),E=F(),_=F(),w=F(),y=F(),x=F(),P=F(),D=F(),N=F(),V=F();let W=h(t,"position",8,"bottom-right"),R=h(t,"ariaLabel",8,"Mini map"),Y=h(t,"nodeStrokeColor",8,"transparent"),H=h(t,"nodeColor",8,void 0),I=h(t,"nodeClass",8,""),v=h(t,"nodeBorderRadius",8,5),b=h(t,"nodeStrokeWidth",8,2),p=h(t,"bgColor",8,void 0),M=h(t,"maskColor",8,void 0),z=h(t,"maskStrokeColor",8,void 0),A=h(t,"maskStrokeWidth",8,void 0),O=h(t,"width",8,void 0),L=h(t,"height",8,void 0),K=h(t,"pannable",8,!0),J=h(t,"zoomable",8,!0),Z=h(t,"inversePan",8,void 0),Q=h(t,"zoomStep",8,void 0),ie=h(t,"style",8,""),oe=h(t,"class",8,"");const le=200,pe=150,{nodes:ke,nodeLookup:xe,viewport:G,width:te,height:ye,flowId:de,panZoom:ve,translateExtent:Ye}=Ke(),Ce=H()===void 0?void 0:Mi(H()),Le=Mi(Y()),Me=Mi(I()),se=typeof window>"u"||window.chrome?"crispEdges":"geometricPrecision",qe=`svelte-flow__minimap-desc-${n()}`;let Ae=F(l(f));const ot=()=>l(_);U(()=>(i(),o(),a()),()=>{X(f,{x:-i().x/i().zoom,y:-i().y/i().zoom,width:o()/i().zoom,height:a()/i().zoom})}),U(()=>(r(),l(f),s()),()=>{X(Ae,r().size>0?Fr(xn(r(),{filter:Oe=>!Oe.hidden}),l(f)):l(f)),s()}),U(()=>C(O()),()=>{X(g,O()??le)}),U(()=>C(L()),()=>{X(k,L()??pe)}),U(()=>(l(Ae),l(g)),()=>{X(S,l(Ae).width/l(g))}),U(()=>(l(Ae),l(k)),()=>{X(E,l(Ae).height/l(k))}),U(()=>(l(S),l(E)),()=>{X(_,Math.max(l(S),l(E)))}),U(()=>(l(_),l(g)),()=>{X(w,l(_)*l(g))}),U(()=>(l(_),l(k)),()=>{X(y,l(_)*l(k))}),U(()=>l(_),()=>{X(x,5*l(_))}),U(()=>(l(Ae),l(w),l(x)),()=>{X(P,l(Ae).x-(l(w)-l(Ae).width)/2-l(x))}),U(()=>(l(Ae),l(y),l(x)),()=>{X(D,l(Ae).y-(l(y)-l(Ae).height)/2-l(x))}),U(()=>(l(w),l(x)),()=>{X(N,l(w)+l(x)*2)}),U(()=>(l(y),l(x)),()=>{X(V,l(y)+l(x)*2)}),Je(),he();{let Oe=ne(()=>ie()+(p()?`;--xy-minimap-background-color-props:${p()}`:"")),He=ne(()=>(C(ze),C(oe()),T(()=>ze(["svelte-flow__minimap",oe()]))));gn(e,{get position(){return W()},get style(){return l(Oe)},get class(){return l(He)},"data-testid":"svelte-flow__minimap",children:(Be,Ze)=>{var mt=ct(),Pe=Ve(mt);{var be=Ee=>{var ae=Kf();let Fe;var Qe=_e(ae);{var pn=je=>{var et=Wf(),Ie=_e(et,!0);we(et),Ne(()=>{ee(et,"id",qe),Tt(Ie,R())}),$(je,et)};Re(Qe,je=>{R()&&je(pn)})}var bn=me(Qe);ii(bn,1,s,je=>je.id,(je,et)=>{const Ie=ne(()=>(r(),l(et),T(()=>r().get(l(et).id))));var kn=ct(),$e=Ve(kn);{var hi=Ht=>{const ut=ne(()=>(C(Ct),C(l(Ie)),T(()=>Ct(l(Ie)))));{let En=ne(()=>(C(l(Ie)),T(()=>Ce==null?void 0:Ce(l(Ie))))),Sn=ne(()=>(C(l(Ie)),T(()=>Le(l(Ie))))),Cn=ne(()=>(C(l(Ie)),T(()=>Me(l(Ie)))));Bf(Ht,Yt({get x(){return C(l(Ie)),T(()=>l(Ie).internals.positionAbsolute.x)},get y(){return C(l(Ie)),T(()=>l(Ie).internals.positionAbsolute.y)}},()=>l(ut),{get selected(){return C(l(Ie)),T(()=>l(Ie).selected)},get color(){return l(En)},get borderRadius(){return v()},get strokeColor(){return l(Sn)},get strokeWidth(){return b()},get shapeRendering(){return se},get class(){return l(Cn)}}))}};Re($e,Ht=>{C(l(Ie)),C($n),T(()=>l(Ie)&&$n(l(Ie)))&&Ht(hi)})}$(je,kn)});var _n=me(bn);we(ae),tt(ae,(je,et)=>Ci==null?void 0:Ci(je,et),()=>({panZoom:c(),viewport:G,getViewScale:ot,translateExtent:d(),width:o(),height:a(),inversePan:Z(),zoomStep:Q(),pannable:K(),zoomable:J()})),Ne(je=>{ee(ae,"width",l(g)),ee(ae,"height",l(k)),ee(ae,"viewBox",`${l(P)??""} ${l(D)??""} ${l(N)??""} ${l(V)??""}`),ee(ae,"aria-labelledby",qe),Fe=rt(ae,"",Fe,je),ee(_n,"d",`M${l(P)-l(x)},${l(D)-l(x)}h${l(N)+l(x)*2}v${l(V)+l(x)*2}h${-l(N)-l(x)*2}z
      M${l(f),T(()=>l(f).x)??""},${l(f),T(()=>l(f).y)??""}h${l(f),T(()=>l(f).width)??""}v${l(f),T(()=>l(f).height)??""}h${l(f),T(()=>-l(f).width)??""}z`)},[()=>({"--xy-minimap-mask-background-color-props":M(),"--xy-minimap-mask-stroke-color-props":z(),"--xy-minimap-mask-stroke-width-props":A()?A()*l(_):void 0})]),$(Ee,ae)};Re(Pe,Ee=>{c()&&Ee(be)})}$(Be,mt)},$$slots:{default:!0}})}ue(),m()}var qf=Te("Selected: <strong> </strong>",1),Zf=Te('<div class="info-panel svelte-1oj5zx8"><h3 class="svelte-1oj5zx8">Workflow Editor</h3> <p class="hint svelte-1oj5zx8"><!></p></div>'),Gf=Te('<div class="stats-panel svelte-1oj5zx8"><div class="stat svelte-1oj5zx8"><span class="label svelte-1oj5zx8">Nodes:</span> <span class="value svelte-1oj5zx8"> </span></div> <div class="stat svelte-1oj5zx8"><span class="label svelte-1oj5zx8">Connections:</span> <span class="value svelte-1oj5zx8"> </span></div></div>'),Uf=Te("<!> <!> <!> <!> <!>",1),$f=Te('<div class="workflow-editor svelte-1oj5zx8"><!></div>');function gh(e,t){ce(t,!0);let n=h(t,"nodes",31,()=>_o([])),i=h(t,"edges",31,()=>_o([])),o=ko(null),a=ko(null);const r={httpCall:"default",transform:"default",delay:"default",terminate:"default",conditional:"default"},s={default:"smoothstep"};function c(_){X(o,_.detail.node,!0),X(a,null)}function d(_){X(a,_.detail.edge,!0),X(o,null)}function u(){X(o,null),X(a,null)}function m(_){const{source:w,target:y,sourceHandle:x,targetHandle:P}=_.detail,D={id:`e${w}-${y}`,source:w,target:y,sourceHandle:x,targetHandle:P,type:"smoothstep",animated:!0};i([...i(),D]),t.onEdgesChange&&t.onEdgesChange(i())}function f(_){t.onNodesChange&&t.onNodesChange(n())}function g(_){const w=_.detail.nodes,y=new Set(w.map(x=>x.id));n(n().filter(x=>!y.has(x.id))),i(i().filter(x=>!y.has(x.source)&&!y.has(x.target))),t.onNodesChange&&t.onNodesChange(n()),t.onEdgesChange&&t.onEdgesChange(i())}function k(_){const w=_.detail.edges,y=new Set(w.map(x=>x.id));i(i().filter(x=>!y.has(x.id))),t.onEdgesChange&&t.onEdgesChange(i())}var S=$f(),E=_e(S);xf(E,{get nodes(){return n()},get edges(){return i()},get nodeTypes(){return r},get edgeTypes(){return s},fitView:!0,snapToGrid:!0,snapGrid:[15,15],defaultEdgeOptions:{type:"smoothstep",animated:!0},onNodeClick:c,onEdgeClick:d,onPaneClick:u,onConnect:m,onNodeDragStop:f,onNodesDelete:g,onEdgesDelete:k,children:(_,w)=>{var y=Uf(),x=Ve(y);Yf(x,{variant:"dots",gap:12,size:1});var P=me(x,2);Hf(P,{});var D=me(P,2);Ff(D,{nodeStrokeWidth:3,zoomable:!0,pannable:!0});var N=me(D,2);gn(N,{position:"top-left",children:(W,R)=>{var Y=Zf(),H=me(_e(Y),2),I=_e(H);{var v=p=>{var M=qf(),z=me(Ve(M)),A=_e(z,!0);we(z),Ne(()=>Tt(A,l(o).data.label)),$(p,M)},b=p=>{var M=ct(),z=Ve(M);{var A=L=>{var K=zi("Selected: Edge");$(L,K)},O=L=>{var K=zi("Click a node to configure it");$(L,K)};Re(z,L=>{l(a)?L(A):L(O,!1)},!0)}$(p,M)};Re(I,p=>{l(o)?p(v):p(b,!1)})}we(H),we(Y),$(W,Y)},$$slots:{default:!0}});var V=me(N,2);gn(V,{position:"top-right",children:(W,R)=>{var Y=Gf(),H=_e(Y),I=me(_e(H),2),v=_e(I,!0);we(I),we(H);var b=me(H,2),p=me(_e(b),2),M=_e(p,!0);we(p),we(b),we(Y),Ne(()=>{Tt(v,n().length),Tt(M,i().length)}),$(W,Y)},$$slots:{default:!0}}),$(_,y)},$$slots:{default:!0}}),we(S),$(e,S),ue()}export{gh as W};
